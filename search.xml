<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>leetcode 1-50</title>
    <url>/2019/07/12/leetcode1-50/</url>
    <content><![CDATA[<p><code>最近更新： 2020-6-6 upds。</code></p>
<h3 id="1-两数之和"><a href="#1-两数之和" class="headerlink" title="1. 两数之和"></a>1. 两数之和</h3><p>Given an array of integers, return indices of the two numbers such that they add up to a specific target.</p>
<p>You may assume that each input would have exactly one solution, and you may not use the same element twice.</p>
<p>Example:</p>
<a id="more"></a>
<blockquote>
<p>Given nums = [2, 7, 11, 15], target = 9,</p>
<p>Because nums[0] + nums[1] = 2 + 7 = 9,<br>return [0, 1].</p>
<p>这个是没有用到字典的代码，虽然实现了上述功能但是，时间花费很多。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;<span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">def</span> <span class="title">twoSum</span><span class="params">(self, nums,target)</span>:</span></span><br><span class="line">&gt;<span class="keyword">for</span> i <span class="keyword">in</span> nums:</span><br><span class="line">&gt;  j=target-i</span><br><span class="line">&gt;  start_index = nums.index(i)</span><br><span class="line">&gt;  next_index = start_index+<span class="number">1</span></span><br><span class="line">&gt;  temp_nums = nums[next_index:] //将从next_index到最后最后这些元素新建一个Array</span><br><span class="line">&gt;  <span class="keyword">if</span> j <span class="keyword">in</span> temp_nums:    //判断一下j是否在temp_nums这个数组中</span><br><span class="line">&gt;      <span class="keyword">return</span>(nums.index(i),next_index+temp_nums.index(j))</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="keyword">null</span> || nums.length&lt;<span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;-<span class="number">1</span>,-<span class="number">1</span>&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">       <span class="keyword">int</span>[] res=<span class="keyword">new</span> <span class="keyword">int</span> []&#123;-<span class="number">1</span>,-<span class="number">1</span>&#125;; <span class="comment">//为了存最后的访问结果 </span></span><br><span class="line">        HashMap&lt;Integer,Integer &gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();<span class="comment">//定义一个HashMap</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;nums.length;i++)&#123;              <span class="comment">//遍历这个数组</span></span><br><span class="line">             <span class="keyword">if</span> (map.containsKey(target-nums[i]))&#123;</span><br><span class="line">                 res[<span class="number">0</span>]= map.get(target-nums[i]);</span><br><span class="line">                 res[<span class="number">1</span>]=i;</span><br><span class="line">                 <span class="keyword">break</span>;</span><br><span class="line">             &#125; </span><br><span class="line">             map.put(nums[i],i);            <span class="comment">//HashMap存对应的每个值，和index</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这段代码主要用到了hashmap的算法，大大提高了效率，但是暂时还不会</p>
<h3 id="9-回文数"><a href="#9-回文数" class="headerlink" title="9. 回文数"></a>9. 回文数</h3><h4 id="题目摘要"><a href="#题目摘要" class="headerlink" title="题目摘要"></a>题目摘要</h4><p>判断一个整数是否是回文数。回文数是指正序（从左向右）和倒序（从右向左）读都是一样的整数。</p>
<h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>一些一定不为回文数的数：<br>1.负数<br>2.大于0，但末位为0的数（x&gt; 0 &amp;&amp; x % 10 == 0）<br>如果是上面这些情况则直接返回false。</p>
<p>将整数的每一位存入数组中，arr[i]代表整数的倒数i+1位。</p>
<p>然后判断arr[i]是否和arr[num -1 -i]位是否相等，如果相等则判断下一位；否则返回false<br>当i&gt; num-i-1时如果还没返回则代表所有字符的是相对称的，也就是回文数，返回true</p>
<h4 id="下面是python的代码："><a href="#下面是python的代码：" class="headerlink" title="下面是python的代码："></a>下面是python的代码：</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isPalindrome</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type x: int</span></span><br><span class="line"><span class="string">        :rtype: bool</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        a=abs(x)</span><br><span class="line">        sum=<span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span>(a!=<span class="number">0</span>):</span><br><span class="line">            p=x%<span class="number">10</span></span><br><span class="line">            sum=sum*<span class="number">10</span>+p</span><br><span class="line">            a=a//<span class="number">10</span></span><br><span class="line">        <span class="keyword">if</span> x&gt;=<span class="number">0</span> <span class="keyword">and</span> x==sum:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<h4 id="下面是高级版python代码：希望以后再回来看将它弄懂"><a href="#下面是高级版python代码：希望以后再回来看将它弄懂" class="headerlink" title="下面是高级版python代码：希望以后再回来看将它弄懂"></a>下面是高级版python代码：希望以后再回来看将它弄懂</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isPalindrome</span><span class="params">(self, x: int)</span> -&gt; bool:</span></span><br><span class="line">        r = list(map(<span class="keyword">lambda</span> i: int(<span class="number">10</span>**-i * x % <span class="number">10</span>), range(int(math.log10(x)), <span class="number">-1</span>, <span class="number">-1</span>))) <span class="keyword">if</span> x &gt; <span class="number">0</span> <span class="keyword">else</span> [<span class="number">0</span>, x]</span><br><span class="line">        <span class="keyword">return</span> r == r[::<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>
<h4 id="下面是java的代码："><a href="#下面是java的代码：" class="headerlink" title="下面是java的代码："></a>下面是java的代码：</h4><p>简单暴力型的主要是用到java自带的函数：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">///简单粗暴，看看就行</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        String reversedStr = (<span class="keyword">new</span> StringBuilder(x + <span class="string">""</span>)).reverse().toString();</span><br><span class="line">        <span class="keyword">return</span> (x + <span class="string">""</span>).equals(reversedStr);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="解法二："><a href="#解法二：" class="headerlink" title="解法二："></a>解法二：</h4><p>进阶解法—数学解法<br>通过取整和取余操作获取整数中对应的数字进行比较。</p>
<p>举个例子：1221 这个数字。具体做法如下：</p>
<ul>
<li>通过计算 1221 / 1000， 得首位1</li>
<li>通过计算 1221 % 10， 可得末位 1</li>
<li>进行比较</li>
<li>再将 22 取出来继续比较</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;  <span class="comment">//定义一个布尔类型的方法</span></span><br><span class="line">        <span class="comment">//边界判断</span></span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">int</span> div = <span class="number">1</span>;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="keyword">while</span> (x / div &gt;= <span class="number">10</span>) div *= <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">while</span> (x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> left = x / div;</span><br><span class="line">            <span class="keyword">int</span> right = x % <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">if</span> (left != right) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            x = (x % div) / <span class="number">10</span>;</span><br><span class="line">            div /= <span class="number">100</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="解法三："><a href="#解法三：" class="headerlink" title="解法三："></a>解法三：</h4><p>进阶解法—巧妙解法<br>直观上来看待回文数的话，就感觉像是将数字进行对折后看能否一一对应。</p>
<p>所以这个解法的操作就是 取出后半段数字进行翻转。</p>
<p>这里需要注意的一个点就是由于回文数的位数可奇可偶，所以当它的长度是偶数时，它对折过来应该是相等的；当它的长度是奇数时，那么它对折过来后，有一个的长度需要去掉一位数（除以 10 并取整）。</p>
<p>具体做法如下：</p>
<ul>
<li>每次进行取余操作 （ %10），取出最低的数字：<code>y = x % 10</code></li>
<li>将最低的数字加到取出数的末尾：<code>revertNum = revertNum * 10 + y</code></li>
<li>每取一个最低位数字，x 都要自除以 10</li>
<li>判断 x 是不是小于<code>revertNum</code> ，当它小于的时候，说明数字已经对半或者过半了</li>
<li>最后，判断奇偶数情况：如果是偶数的话，revertNum 和 x 相等；如果是奇数的话，最中间的数      字就在revertNum 的最低位上，将它除以 10 以后应该和 x 相等。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//思考：这里大家可以思考一下，为什么末尾为 0 就可以直接返回 false</span></span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span> || (x % <span class="number">10</span> == <span class="number">0</span> &amp;&amp; x != <span class="number">0</span>)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">int</span> revertedNumber = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (x &gt; revertedNumber) &#123;</span><br><span class="line">            revertedNumber = revertedNumber * <span class="number">10</span> + x % <span class="number">10</span>;</span><br><span class="line">            x /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> x == revertedNumber || x == revertedNumber / <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="14-最长公共前缀"><a href="#14-最长公共前缀" class="headerlink" title="14. 最长公共前缀"></a>14. 最长公共前缀</h3><p>难度 easy 题目名称 </p>
<!-- more -->
<h4 id="题目摘要-1"><a href="#题目摘要-1" class="headerlink" title="题目摘要"></a>题目摘要</h4><p>编写一个函数来查找字符串数组中的最长公共前缀。</p>
<p>如果不存在公共前缀，返回空字符串 “”。</p>
<p>示例 1:</p>
<blockquote>
<p>输入: [“flower”,”flow”,”flight”]<br>输出: “fl”<br>示例 2:</p>
</blockquote>
<blockquote>
<p>输入: [“dog”,”racecar”,”car”]<br>输出:<code>&quot;&quot;</code><br>解释: 输入不存在公共前缀。</p>
</blockquote>
<h4 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h4><p>首先判断字符串是否为空，如果是直接输出<code>&quot;&quot;</code>之后建立两个for循环，第一层循环是遍历第一个字符串，第二个循环是从第二个字符串开始和第一个字符串进行比较，这里有一些反常，就是不满足条件就退出。这个条件是i大于字符串的长度，或者就是遇到不相等的了，返回这个前缀，当然如果是一个空字符串，就返回<code>&quot;&quot;</code><br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">longestCommonPrefix</span><span class="params">(self, strs: List[str])</span> -&gt; str:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> strs:</span><br><span class="line">            <span class="keyword">return</span><span class="string">""</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(strs[<span class="number">0</span>])):</span><br><span class="line">            <span class="keyword">for</span> string <span class="keyword">in</span> strs[<span class="number">1</span>:]:  <span class="comment">#从列表中第一个位置与第0的位置比较</span></span><br><span class="line">                <span class="keyword">if</span>  i&gt;=len(string) <span class="keyword">or</span> string[i] != strs[<span class="number">0</span>][i] :  <span class="comment">#就是遍历的i大于单词的长度</span></span><br><span class="line">                    <span class="keyword">return</span> strs[<span class="number">0</span>][:i]</span><br><span class="line">        <span class="keyword">return</span> strs[<span class="number">0</span>]             <span class="comment">#如果是一个[""],这种情况下返回第一个字符</span></span><br></pre></td></tr></table></figure></p>
<p>下面是高级一些的python代码：</p>
<h4 id="思路2"><a href="#思路2" class="headerlink" title="思路2"></a>思路2</h4><p>我先设置一个空的字符串，<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">longestCommonPrefix</span><span class="params">(self, strs: List[str])</span> -&gt; str:</span></span><br><span class="line">        result =<span class="string">""</span></span><br><span class="line">        i=<span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                sets=set(string[i]<span class="keyword">for</span> string <span class="keyword">in</span> strs)</span><br><span class="line"><span class="comment">#因为set是集合的概念，遍历这个列表的每一个字符串的第i位，输出的都是不同的值，如果相同就输出一个，</span></span><br><span class="line">                <span class="keyword">if</span> len(sets)==<span class="number">1</span>:    <span class="comment">#如果对应位置不是同一个字符，那么就不会是1</span></span><br><span class="line">                    result+=sets.pop()</span><br><span class="line"><span class="comment"># pop是出栈的意思，后进后出（当然也只有一个元素）弹出加在result后面</span></span><br><span class="line">                    i+=<span class="number">1</span></span><br><span class="line"><span class="comment">#在去检查下一个字符</span></span><br><span class="line">                <span class="keyword">else</span>: <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:  <span class="comment">#</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure></p>
<p>$$ —- \mathcal{End} —- $$</p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>数据结构与算法</tag>
      </tags>
  </entry>
  <entry>
    <title>1.数据库基础—DQL</title>
    <url>/2020/06/06/%E6%95%B0%E6%8D%AE%E5%BA%93/1.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80-DQL/</url>
    <content><![CDATA[<p><code>最近更新： 2020-6-6 upds。</code></p>
<h1 id="数据库基础—DQL"><a href="#数据库基础—DQL" class="headerlink" title="数据库基础—DQL"></a>数据库基础—DQL</h1><h2 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h2><h3 id="数据库语言分类"><a href="#数据库语言分类" class="headerlink" title="数据库语言分类"></a>数据库语言分类</h3><a id="more"></a>
<p><strong>DQL</strong>（Data Query Language）：数据查询语言  select<br><strong>DML</strong>(Data Manipulate Language):数据操作语言  insert 、update、delete<br><strong>DDL</strong>（Data Define Languge）：数据定义语言 create、drop、alter<br><strong>TCL</strong>（Transaction Control Language）：事务控制语言  commit、rollback</p>
<h3 id="UTF-8和gb2312的区别"><a href="#UTF-8和gb2312的区别" class="headerlink" title="UTF-8和gb2312的区别"></a>UTF-8和gb2312的区别</h3><p>#utf8默认一个字母占一个字节，一个汉字占3个字节。</p>
<h2 id="1-基础查询-amp-条件查询"><a href="#1-基础查询-amp-条件查询" class="headerlink" title="1.基础查询&amp;条件查询"></a>1.基础查询&amp;条件查询</h2><h4 id="1-筛选条件的分类"><a href="#1-筛选条件的分类" class="headerlink" title="1.筛选条件的分类"></a>1.筛选条件的分类</h4><h5 id="1、简单条件运算符"><a href="#1、简单条件运算符" class="headerlink" title="1、简单条件运算符"></a>1、简单条件运算符</h5><p><strong>></strong>, <strong>&lt;</strong> <strong>=</strong> <strong>&lt;&gt;</strong> <strong>!=</strong> <strong>&gt;=</strong> <strong>&lt;=</strong>  <strong>&lt;=&gt;</strong>安全等于</p>
<h5 id="2、逻辑运算符"><a href="#2、逻辑运算符" class="headerlink" title="2、逻辑运算符"></a>2、逻辑运算符</h5><p>等价于&amp;&amp;  <strong>and</strong><br>等价于|| <strong>or</strong><br>等价于!  <strong>not</strong></p>
<h5 id="3、模糊查询"><a href="#3、模糊查询" class="headerlink" title="3、模糊查询"></a>3、模糊查询</h5><p><strong>like</strong>:一般搭配通配符使用，可以判断字符型或数值型<br>通配符：<strong>%</strong>任意多个字符，_任意单个字符</p>
<p><strong>between and</strong><br><strong>in</strong></p>
<ul>
<li>案例：查询部门编号不等于90号的员工名和部门编号</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	last_name,</span><br><span class="line">	department_id</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	department_id&lt;&gt;<span class="number">90</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>案例：查询工资z在10000到20000之间的员工名、工资以及奖金</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	salary,</span><br><span class="line">	commission_pct</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	salary&gt;=<span class="number">10000</span> <span class="keyword">AND</span> salary&lt;=<span class="number">20000</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>案例：查询部门编号不是在90到110之间，或者工资高于15000的员工信息</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	*</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	<span class="keyword">NOT</span>(department_id&gt;=<span class="number">90</span> <span class="keyword">AND</span> department_id&lt;=<span class="number">110</span>) <span class="keyword">OR</span> salary&gt;<span class="number">15000</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>案例：查询员工名中包含字符a的员工信息</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">	*</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	last_name <span class="keyword">like</span> <span class="string">'%a%'</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>案例：查询员工名中第三个字符为e，第五个字符为a的员工名和工资</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	salary</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	last_name <span class="keyword">LIKE</span> <span class="string">'__e_a%'</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>案例：查询员工名中第二个字符为_的员工名</li>
</ul>
<p>可以使用/作为转义字符；也可以使用任意转义字符如前面的$，这里使用escape目的是使得$没有实际意义；</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	last_name <span class="keyword">LIKE</span> <span class="string">'_$_%'</span> ESCAPE <span class="string">'$'</span>;</span><br></pre></td></tr></table></figure>
<h6 id="between-and"><a href="#between-and" class="headerlink" title="between and"></a>between and</h6><p>包含边界值</p>
<ul>
<li>案例1：查询员工编号在100到120之间的员工信息</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	*</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	employee_id &gt;= <span class="number">100</span> <span class="keyword">AND</span> employee_id&lt;=<span class="number">120</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	*</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	employee_id <span class="keyword">BETWEEN</span> <span class="number">100</span> <span class="keyword">AND</span> <span class="number">120</span>;</span><br></pre></td></tr></table></figure>
<h6 id="in"><a href="#in" class="headerlink" title="in"></a>in</h6><p>in列表的值类型必须一致或兼容<br>in列表中不支持通配符</p>
<ul>
<li>案例：查询员工的工种编号是 IT_PROG、AD_VP、AD_PRES中的一个员工名和工种编号</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	job_id</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	job_id = <span class="string">'IT_PROT'</span> <span class="keyword">OR</span> job_id = <span class="string">'AD_VP'</span> <span class="keyword">OR</span> JOB_ID =<span class="string">'AD_PRES'</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	job_id</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	job_id <span class="keyword">IN</span>( <span class="string">'IT_PROT'</span> ,<span class="string">'AD_VP'</span>,<span class="string">'AD_PRES'</span>);</span><br></pre></td></tr></table></figure>
<h6 id="is-null"><a href="#is-null" class="headerlink" title="is null"></a>is null</h6><p>=或&lt;&gt;不能用于判断null值<br>is null或is not null 可以判断null值,这个is not就是和null搭配的不可以用于其他内容</p>
<ul>
<li>案例1：查询没有奖金的员工名和奖金率</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	commission_pct</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	commission_pct <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	commission_pct</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	commission_pct &lt;=&gt;<span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>案例2：查询工资为17000的员工名和奖金率,注意：不可以用IS而是用17000</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	commission_pct</span><br><span class="line">	</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees</span><br><span class="line"> </span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">	salary &lt;=&gt; <span class="number">17000</span>;</span><br></pre></td></tr></table></figure>
<p><strong>is null</strong> /<strong>is not null</strong>：用于判断null值</p>
<p><strong>is null</strong>  PK  <strong>&lt;=&gt;</strong></p>
<p><strong>IS NULL</strong>:仅仅可以判断NULL值，可读性较高，建议使用<br><strong>&lt;=&gt;</strong>  :既可以判断NULL值，又可以判断普通的数值，可读性较低</p>
<table>
<thead>
<tr>
<th></th>
<th>普通类型的数值</th>
<th>null值</th>
<th>可读性</th>
</tr>
</thead>
<tbody>
<tr>
<td>is null</td>
<td>×</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>&lt;=&gt;</td>
<td>√</td>
<td>√</td>
<td>×</td>
</tr>
</tbody>
</table>
<ul>
<li>案例：查询工号为AD_VP的员工的姓名和部门的号的年薪</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	department_id,</span><br><span class="line">	salary</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	job_id =<span class="string">'AD_VP'</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>案例：查询没有奖金，且工资小于18000的salary，last_name</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	salary,</span><br><span class="line">	last_name</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	commission_pct <span class="keyword">IS</span> <span class="literal">NULL</span> <span class="keyword">AND</span> salary&lt;<span class="number">18000</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>案例：查询employees表中，job_id不为‘AD_VP’或者工资为12000的员工信息</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    salary,</span><br><span class="line">    last_name,</span><br><span class="line">    job_id</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    employees</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    job_id &lt;=&gt;<span class="string">'AD_VP'</span> <span class="keyword">OR</span> salary=<span class="number">18000</span>;</span><br></pre></td></tr></table></figure>
<h5 id="4、快速查询"><a href="#4、快速查询" class="headerlink" title="4、快速查询"></a>4、快速查询</h5><ul>
<li>查看部门</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">DESC departments;</span><br></pre></td></tr></table></figure>
<ul>
<li>查看部门department表中涉及到了哪些编号，DISTINCT具有去重的功能</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> location_id</span><br><span class="line"><span class="keyword">FROM</span> departments</span><br></pre></td></tr></table></figure>
<p>经典面试题：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">LIKE</span> <span class="string">'%%'</span> <span class="keyword">AND</span> last_name <span class="keyword">LIKE</span> <span class="string">'%%'</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>*<span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>
<p>是不一样的，上面的会把null的包含，如果将下面的AND变为or就一样了</p>
<h2 id="2-排序查询"><a href="#2-排序查询" class="headerlink" title="2.排序查询"></a>2.排序查询</h2><p>一、语法<br>select 查询列表<br>from 表<br>where 筛选条件<br>order by 排序列表 【asc/desc】</p>
<p>1、asc ：升序，如果不写默认升序<br>  desc：降序</p>
<p>2、排序列表 支持 单个字段、多个字段、函数、表达式、别名</p>
<p>3、order by的位置一般放在查询语句的最后（除limit语句之外）</p>
<h5 id="1-按单个字段排序"><a href="#1-按单个字段排序" class="headerlink" title="1. 按单个字段排序"></a>1. 按单个字段排序</h5><ul>
<li>案例：查询工资薪水按照降序排列</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
<h5 id="2-添加筛选条件再排序"><a href="#2-添加筛选条件再排序" class="headerlink" title="2. 添加筛选条件再排序"></a>2. 添加筛选条件再排序</h5><ul>
<li>案例：查询部门编号&gt;=90的员工信息，并按员工编号降序（入职的先后顺序）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id&gt;=<span class="number">90</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> employee_id <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
<h5 id="3-按表达式排序"><a href="#3-按表达式排序" class="headerlink" title="3. 按表达式排序"></a>3. 按表达式排序</h5><ul>
<li>案例：查询员工信息 按年薪降序</li>
</ul>
<p><strong>因为1+null等于null</strong>，所以需要处理一下，IFNULL(commission_pct,0))，如果不是null就加上奖金</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *,salary*<span class="number">12</span>*(<span class="number">1</span>+<span class="keyword">IFNULL</span>(commission_pct,<span class="number">0</span>)) </span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary*<span class="number">12</span>*(<span class="number">1</span>+<span class="keyword">IFNULL</span>(commission_pct,<span class="number">0</span>)) <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
<h3 id=""><a href="#" class="headerlink" title=""></a><img src="https://img-blog.csdnimg.cn/20200427202802726.png" alt="img"></h3><h5 id="4-按函数排序"><a href="#4-按函数排序" class="headerlink" title="4.按函数排序"></a>4.按函数排序</h5><ul>
<li>案例：查询员工名，并且按名字的长度降序</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LENGTH</span>(last_name),last_name ,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">LENGTH</span>(last_name) <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200427202516485.png" alt="img"></p>
<h5 id="5、按别名排序"><a href="#5、按别名排序" class="headerlink" title="5、按别名排序"></a>5、按别名排序</h5><ul>
<li>案例：查询员工信息 按年薪升序</li>
</ul>
<p>别名就是年薪，order by后面也是支持别名</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *,salary*<span class="number">12</span>*(<span class="number">1</span>+<span class="keyword">IFNULL</span>(commission_pct,<span class="number">0</span>)) 年薪 </span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> 年薪 <span class="keyword">ASC</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/2020042720263824.png" alt="img"></p>
<h5 id="6、按多个字段排序"><a href="#6、按多个字段排序" class="headerlink" title="6、按多个字段排序"></a>6、按多个字段排序</h5><ul>
<li>案例：查询员工信息，要求先按工资降序，再按employee_id升序</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span>,employee_id <span class="keyword">ASC</span>;</span><br></pre></td></tr></table></figure>
<p>先按照工资进行排序，然后按照员工编号排序（就是当有salary一样的时候，按照employee_id排序）</p>
<p><img src="https://img-blog.csdnimg.cn/20200427202951247.png" alt="img"></p>
<h2 id="3-常见函数"><a href="#3-常见函数" class="headerlink" title="3.常见函数"></a>3.常见函数</h2><h5 id="1-字符函数"><a href="#1-字符函数" class="headerlink" title="1. 字符函数"></a>1. 字符函数</h5><h5 id="2-数字函数"><a href="#2-数字函数" class="headerlink" title="2. 数字函数"></a>2. 数字函数</h5><h5 id="3-日期函数"><a href="#3-日期函数" class="headerlink" title="3. 日期函数"></a>3. 日期函数</h5><h5 id="4-流程控制函数"><a href="#4-流程控制函数" class="headerlink" title="4. 流程控制函数"></a>4. 流程控制函数</h5><p>聚合函数：将一列数据作为一个整体，进行纵向的计算。</p>
<ol>
<li><p>count：计算个数</p>
<ol>
<li>一般选择非空的列：主键</li>
<li>count(*)</li>
</ol>
</li>
<li><p>max：计算最大值</p>
</li>
<li><p>min：计算最小值</p>
</li>
<li><p>sum：计算和</p>
</li>
<li><p>avg：计算平均值</p>
<pre><code>* 注意：聚合函数的计算，排除null值。
       解决方案：
              1. 选择不包含非空的列进行计算
                             2. IFNULL函数
</code></pre></li>
</ol>
<h2 id="4-分组查询"><a href="#4-分组查询" class="headerlink" title="4. 分组查询"></a>4. 分组查询</h2><p>一、语法<br>select 分组函数，分组后的字段<br>from 表<br>【where 筛选条件】例如：奖金不为空<br>group by 分组的字段 例如：按照工种分<br>【having 分组后的筛选】例如：员工个数大于5<br>【order by 排序列表】例如：按照薪水降序</p>
<table>
<thead>
<tr>
<th></th>
<th>使用关键字</th>
<th>筛选的表</th>
<th>位置</th>
</tr>
</thead>
<tbody>
<tr>
<td>分组前筛选</td>
<td>where</td>
<td>原始表</td>
<td>group by的前面</td>
</tr>
<tr>
<td>分组后筛选</td>
<td>having</td>
<td>分组后结果</td>
<td>group by的后面</td>
</tr>
</tbody>
</table>
<ul>
<li>案例1：查询每个工种的员工平均工资<br>所以是按照每一种job_id 查询</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AVG</span>(salary),job_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> job_id;</span><br></pre></td></tr></table></figure>
<ul>
<li>案例2：查询每个位置的部门个数</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*),location_id</span><br><span class="line"><span class="keyword">FROM</span> departments</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> location_id;</span><br></pre></td></tr></table></figure>
<h5 id="1-可以实现分组前的筛选"><a href="#1-可以实现分组前的筛选" class="headerlink" title="1. 可以实现分组前的筛选"></a>1. 可以实现分组前的筛选</h5><ul>
<li>案例1：查询邮箱中包含a字符的 每个部门的最高工资（只在email中有a的中筛选）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(salary),department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> email <span class="keyword">LIKE</span> <span class="string">'%a%'</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br></pre></td></tr></table></figure>
<p>案例2：查询有奖金的每个领导手下员工的平均工资</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AVG</span>(salary),manager_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> manager_id;</span><br></pre></td></tr></table></figure>
<h5 id="2-分组后筛选"><a href="#2-分组后筛选" class="headerlink" title="2. 分组后筛选"></a>2. 分组后筛选</h5><ul>
<li><p>案例1：查询哪个部门的员工个数&gt;5</p>
<p>①查询每个部门的员工个数</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*),department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br></pre></td></tr></table></figure>
<p>#② 筛选刚才①结果</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*),department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(*)&gt;<span class="number">5</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>案例2：每个工种有奖金的员工的最高工资&gt;12000的工种编号和最高工资</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> job_id,<span class="keyword">MAX</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> job_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">MAX</span>(salary)&gt;<span class="number">12000</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>案例3：领导编号&gt;102的每个领导手下的最低工资大于5000的领导编号和最低工资</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> manager_id,<span class="keyword">MIN</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> manager_id&gt;<span class="number">102</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> manager_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">MIN</span>(salary)&gt;<span class="number">5000</span>;</span><br></pre></td></tr></table></figure>
<h5 id="3-添加排序"><a href="#3-添加排序" class="headerlink" title="3. 添加排序"></a>3. 添加排序</h5><ul>
<li>案例：每个工种有奖金的员工的最高工资&gt;6000的工种编号和最高工资,按最高工资升序</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> job_id,<span class="keyword">MAX</span>(salary) m</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> job_id</span><br><span class="line"><span class="keyword">HAVING</span> m&gt;<span class="number">6000</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> m ;</span><br></pre></td></tr></table></figure>
<h5 id="4-按多个字段分组"><a href="#4-按多个字段分组" class="headerlink" title="4. 按多个字段分组"></a>4. 按多个字段分组</h5><p>#案例：查询每个工种每个部门的最低工资,并按最低工资降序</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MIN</span>(salary),job_id,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id,job_id</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">MIN</span>(salary) <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200428092951299.png" alt="img"></p>
<h2 id="5-连接查询"><a href="#5-连接查询" class="headerlink" title="5. 连接查询"></a>5. 连接查询</h2><p>一、含义<br>当查询中涉及到了多个表的字段，需要使用多表连接<br>select 字段1，字段2<br>from 表1，表2,…;</p>
<p><strong>笛卡尔乘积</strong>：当查询多个表时，没有添加有效的连接条件，导致多个表所有行实现完全连接<br>如何解决：添加有效的连接条件</p>
<p>按年代分类：<br>   sql92标准:仅仅支持内连接（等值、非等值、和自连接）<br>   sql99标准【推荐】：支持内连接+外连接（左外和右外）+交叉连接</p>
<p>按功能分类：<br>     内连接：等值连接，非等值连接，自连接<br>     外连接： 左外连接，右外连接，全外连接<br>     交叉连接</p>
<h4 id="1-等值连接"><a href="#1-等值连接" class="headerlink" title="1. 等值连接"></a>1. 等值连接</h4><p>① 多表等值连接的结果为多表的交集部分<br>②n表连接，至少需要n-1个连接条件<br>③ 多表的顺序没有要求<br>④一般需要为表起别名<br>⑤可以搭配前面介绍的所有子句使用，比如排序、分组、筛选</p>
<ul>
<li>案例1：查询女神名和对应的男神名</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NAME</span>,boyName </span><br><span class="line"><span class="keyword">FROM</span> boys,beauty</span><br><span class="line"><span class="keyword">WHERE</span> beauty.boyfriend_id= boys.id;</span><br></pre></td></tr></table></figure>
<ul>
<li>案例2：查询员工名和对应的部门名</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,department_name</span><br><span class="line"><span class="keyword">FROM</span> employees,departments</span><br><span class="line"><span class="keyword">WHERE</span> employees.<span class="string">`department_id`</span>=departments.<span class="string">`department_id`</span>;</span><br></pre></td></tr></table></figure>
<h5 id="1-为表起别名"><a href="#1-为表起别名" class="headerlink" title="1. 为表起别名"></a>1. 为表起别名</h5><p>①提高语句的简洁度<br>②区分多个重名的字段</p>
<p>注意：如果为表起了别名，则查询的字段就不能使用原来的表名去限定</p>
<p>查询员工名、工种号、工种名</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.last_name,e.job_id,j.job_title</span><br><span class="line"><span class="keyword">FROM</span> employees e,jobs j</span><br><span class="line"><span class="keyword">WHERE</span> e.<span class="string">`job_id`</span>=j.<span class="string">`job_id`</span>;</span><br></pre></td></tr></table></figure>
<h5 id="2-两个表的顺序是否可以调换"><a href="#2-两个表的顺序是否可以调换" class="headerlink" title="2. 两个表的顺序是否可以调换"></a>2. 两个表的顺序是否可以调换</h5><p>查询员工名、工种号、工种名</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.last_name,e.job_id,j.job_title</span><br><span class="line"><span class="keyword">FROM</span> jobs j,employees e</span><br><span class="line"><span class="keyword">WHERE</span> e.<span class="string">`job_id`</span>=j.<span class="string">`job_id`</span>;</span><br></pre></td></tr></table></figure>
<h5 id="3-可以加筛选"><a href="#3-可以加筛选" class="headerlink" title="3. 可以加筛选"></a>3. 可以加筛选</h5><ul>
<li>案例1：查询有奖金的员工名、部门名</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,department_name,commission_pct</span><br><span class="line"><span class="keyword">FROM</span> employees e,departments d</span><br><span class="line"><span class="keyword">WHERE</span> e.<span class="string">`department_id`</span>=d.<span class="string">`department_id`</span></span><br><span class="line"><span class="keyword">AND</span> e.<span class="string">`commission_pct`</span> <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>案例2：查询城市名中第二个字符为o的部门名和城市名</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_name,city</span><br><span class="line"><span class="keyword">FROM</span> departments d,locations l</span><br><span class="line"><span class="keyword">WHERE</span> d.<span class="string">`location_id`</span> = l.<span class="string">`location_id`</span></span><br><span class="line"><span class="keyword">AND</span> city <span class="keyword">LIKE</span> <span class="string">'_o%'</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>案例3：查询每个城市的部门个数</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) 个数,city</span><br><span class="line"><span class="keyword">FROM</span> departments d,locations l</span><br><span class="line"><span class="keyword">WHERE</span> d.<span class="string">`location_id`</span>=l.<span class="string">`location_id`</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> city;</span><br></pre></td></tr></table></figure>
<ul>
<li>案例4：查询有奖金的每个部门的部门名和部门的领导编号和该部门的最低工资</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_name,d.<span class="string">`manager_id`</span>,<span class="keyword">MIN</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> departments d,employees e</span><br><span class="line"><span class="keyword">WHERE</span> d.<span class="string">`department_id`</span>=e.<span class="string">`department_id`</span></span><br><span class="line"><span class="keyword">AND</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_name,d.<span class="string">`manager_id`</span>;</span><br></pre></td></tr></table></figure>
<h5 id="4-可以加排序"><a href="#4-可以加排序" class="headerlink" title="4. 可以加排序"></a>4. 可以加排序</h5><p>案例：查询每个工种的工种名和员工的个数，并且按员工个数降序</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> job_title,<span class="keyword">COUNT</span>(*)</span><br><span class="line"><span class="keyword">FROM</span> employees e,jobs j</span><br><span class="line"><span class="keyword">WHERE</span> e.<span class="string">`job_id`</span>=j.<span class="string">`job_id`</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> job_title</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">COUNT</span>(*) <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
<h5 id="5-可以实现三表连接"><a href="#5-可以实现三表连接" class="headerlink" title="5.可以实现三表连接"></a>5.可以实现三表连接</h5><ul>
<li>案例：查询员工名、部门名和所在的城市</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,department_name,city</span><br><span class="line"><span class="keyword">FROM</span> employees e,departments d,locations l</span><br><span class="line"><span class="keyword">WHERE</span> e.<span class="string">`department_id`</span>=d.<span class="string">`department_id`</span></span><br><span class="line"><span class="keyword">AND</span> d.<span class="string">`location_id`</span>=l.<span class="string">`location_id`</span></span><br><span class="line"><span class="keyword">AND</span> city <span class="keyword">LIKE</span> <span class="string">'s%'</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> department_name <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
<h4 id="2-非等值连接"><a href="#2-非等值连接" class="headerlink" title="2. 非等值连接"></a>2. 非等值连接</h4><ul>
<li>案例1：工的工资级别</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> salary,grade_level</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> job_grades g</span><br><span class="line"><span class="keyword">ON</span> e.<span class="string">`salary`</span> <span class="keyword">BETWEEN</span> g.<span class="string">`lowest_sal`</span> <span class="keyword">AND</span> g.<span class="string">`highest_sal`</span>;</span><br></pre></td></tr></table></figure>
<p>对比sql92的格式：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> salary,grade_level</span><br><span class="line"><span class="keyword">FROM</span> employees e,job_grades g</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="keyword">BETWEEN</span> g.<span class="string">`lowest_sal`</span> <span class="keyword">AND</span> g.<span class="string">`highest_sal`</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>案例2：资级别的个数&gt;20的个数，并且按工资级别降序</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*),grade_level</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> job_grades g</span><br><span class="line"><span class="keyword">ON</span> e.<span class="string">`salary`</span> <span class="keyword">BETWEEN</span> g.<span class="string">`lowest_sal`</span> <span class="keyword">AND</span> g.<span class="string">`highest_sal`</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> grade_level</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(*)&gt;<span class="number">20</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> grade_level <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
<h4 id="3-自连接"><a href="#3-自连接" class="headerlink" title="3. 自连接"></a>3. 自连接</h4><p>自己连接自己</p>
<ul>
<li>案例：查询 员工名和上级的名称</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.employee_id,e.last_name,m.employee_id,m.last_name</span><br><span class="line"><span class="keyword">FROM</span> employees e,employees m</span><br><span class="line"><span class="keyword">WHERE</span> e.<span class="string">`manager_id`</span>=m.<span class="string">`employee_id`</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200428112437397.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>从上表可以看出k_ing的emplyee_id是100，kochhar的manage_id是100，所以kochhar的领导是k_ing，所以结果如下：</p>
<p><img src="https://img-blog.csdnimg.cn/20200428112531844.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"></p>
<h4 id="4-外连接"><a href="#4-外连接" class="headerlink" title="4. 外连接"></a>4. 外连接</h4><p>应用场景：用于查询一个表中有，另一个表没有的记录</p>
<p> 特点：<br> 1、外连接的查询结果为主表中的所有记录<br>   如果从表中有和它匹配的，则显示匹配的值<br>   如果从表中没有和它匹配的，则显示null<br>   外连接查询结果=内连接结果+主表中有而从表没有的记录<br> <strong>2、左外连接，left join左边的是主表<br>  右外连接，right join右边的是主表</strong><br> 3、左外和右外交换两个表的顺序，可以实现同样的效果<br> 4、全外连接=内连接的结果+表1中有但表2没有的+表2中有但表1没有的</p>
<p>如果仅仅是下面这样查询就只是笛卡尔乘积，出现很多的null</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> beauty;</span><br><span class="line"> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> boys;</span><br></pre></td></tr></table></figure>
<p>你要查询的信息主要在那个表，那个表就是主表。 </p>
<ul>
<li>左外连接，可以看出beauty是主表，左外连接了boy表，条件是b.<code>boyfriend_id</code> = bo.<code>id</code></li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> b.name,bo.*</span><br><span class="line"><span class="keyword">FROM</span>  beauty b</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> boys bo</span><br><span class="line"><span class="keyword">ON</span> b.<span class="string">`boyfriend_id`</span> = bo.<span class="string">`id`</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200428162259609.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"></p>
<p><strong>筛选出没有男朋友的beauty，分别用左外右外连接实现</strong></p>
<ul>
<li>左外连接</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> b.name,bo.*</span><br><span class="line"><span class="keyword">FROM</span>  beauty b</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> boys bo</span><br><span class="line"><span class="keyword">ON</span> b.<span class="string">`boyfriend_id`</span> = bo.<span class="string">`id`</span></span><br><span class="line"><span class="keyword">WHERE</span> bo.<span class="string">`id`</span> <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>右外连接（只需要修改几处即可）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> b.name,bo.*</span><br><span class="line"><span class="keyword">FROM</span> boys bo</span><br><span class="line"><span class="keyword">right</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> beauty b</span><br><span class="line"><span class="keyword">ON</span> b.<span class="string">`boyfriend_id`</span> = bo.<span class="string">`id`</span></span><br><span class="line"><span class="keyword">WHERE</span> bo.<span class="string">`id`</span> <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200428165757548.png" alt="img"></p>
<ul>
<li>案例1：查询哪个部门没有员工<br> 左外(LEFT OUTER JOIN 的左边是主表)</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> d.*,e.employee_id</span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> employees e</span><br><span class="line"><span class="keyword">ON</span> d.<span class="string">`department_id`</span> = e.<span class="string">`department_id`</span></span><br><span class="line"><span class="keyword">WHERE</span> e.<span class="string">`employee_id`</span> <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200428221338169.png" alt="img"></p>
<p>右外<br> 结果同上</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> d.*,e.employee_id</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> d.<span class="string">`department_id`</span> = e.<span class="string">`department_id`</span></span><br><span class="line"><span class="keyword">WHERE</span> e.<span class="string">`employee_id`</span> <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<p>全外<br>全外就是不分主从表，首先两部分的交集是可以出现的，左外的部分会出现，右外的部分也会出现</p>
<p>全外连接=内连接的结果+表1中有但表2没有的+表2中有但表1没有的</p>
<h3 id="6-子查询"><a href="#6-子查询" class="headerlink" title="6.子查询"></a>6.子查询</h3><p>含义：出现在其他语句中的select语句，称为子查询或内查询，外部的查询语句，称为主查询或外查询</p>
<p>特点：<br>①子查询放在小括号内<br>②子查询一般放在条件的右侧<br>③标量子查询，一般搭配着单行操作符使用<br>> &lt; &gt;= &lt;= = &lt;&gt;</p>
<p>列子查询，一般搭配着多行操作符使用<br>in、any/some、all</p>
<p><strong>④子查询的执行优先于主查询执行，主查询的条件用到了子查询的结果</strong></p>
<h4 id="1-标量子查询"><a href="#1-标量子查询" class="headerlink" title="1.标量子查询"></a>1.标量子查询</h4><p><strong>#案例1：谁的工资比 Abel 高?</strong></p>
<p>①查询Abel的工资</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name = <span class="string">'Abel'</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200429113901451.png" alt="img"></p>
<p>#②查询员工的信息，满足 salary&gt;①结果</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary&gt;(</span><br><span class="line">    <span class="keyword">SELECT</span> salary</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">    <span class="keyword">WHERE</span> last_name = <span class="string">'Abel'</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200429113957774.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"></p>
<p><strong>#案例2：返回job_id与141号员工相同，salary比143号员工多的员工 姓名，job_id 和工资</strong></p>
<h4 id="2-列子查询（多行子查询）一列多行"><a href="#2-列子查询（多行子查询）一列多行" class="headerlink" title="2.列子查询（多行子查询）一列多行"></a>2.列子查询（多行子查询）一列多行</h4><p><strong>案例：返回其它工种中比job_id为‘IT_PROG’工种任一工资低的员工的员工号、姓名、job_id 以及salary</strong></p>
<p>①查询job_id为‘IT_PROG’部门任一工资</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> job_id = <span class="string">'IT_PROG'</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200429134818252.png" alt="img"></p>
<p>②查询员工号、姓名、job_id 以及salary，salary&lt;(①)的任意一个</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,employee_id,job_id,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary&lt;<span class="keyword">ANY</span>(</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> salary</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">    <span class="keyword">WHERE</span> job_id = <span class="string">'IT_PROG'</span></span><br><span class="line">) <span class="keyword">AND</span> job_id&lt;&gt;<span class="string">'IT_PROG'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/2020042913492375.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"></p>
<h4 id="3-行子查询（结果集一行多列或多行多列）-了解"><a href="#3-行子查询（结果集一行多列或多行多列）-了解" class="headerlink" title="3. 行子查询（结果集一行多列或多行多列） 了解"></a>3. 行子查询（结果集一行多列或多行多列） 了解</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * </span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> (employee_id,salary)=(</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">MIN</span>(employee_id),<span class="keyword">MAX</span>(salary)</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>#①查询最小的员工编号</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MIN</span>(employee_id)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br></pre></td></tr></table></figure>
<p>#②查询最高工资</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br></pre></td></tr></table></figure>
<p>#③查询员工信息</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> employee_id=(</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">MIN</span>(employee_id)</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">)<span class="keyword">AND</span> salary=(</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">MAX</span>(salary)</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="以下几种情况："><a href="#以下几种情况：" class="headerlink" title="以下几种情况："></a>以下几种情况：</h4><h5 id="select后面"><a href="#select后面" class="headerlink" title="select后面"></a><strong>select后面</strong></h5><p>仅仅支持标量子查询</p>
<p>案例：查询每个部门的员工个数，牛逼！牛逼！</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> d.*,(</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*)</span><br><span class="line">    <span class="keyword">FROM</span> employees e</span><br><span class="line">    <span class="keyword">WHERE</span> e.department_id = d.<span class="string">`department_id`</span></span><br><span class="line"> ) 个数</span><br><span class="line"> <span class="keyword">FROM</span> departments d;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200429140836572.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"></p>
<h5 id="from后面"><a href="#from后面" class="headerlink" title="from后面"></a><strong>from后面</strong></h5><p>将子查询结果充当一张表，要求必须起别名</p>
<p>有时间将这里在补充一下，重新看一下尚硅谷是视频</p>
<h5 id="exists后面（相关子查询）"><a href="#exists后面（相关子查询）" class="headerlink" title="exists后面（相关子查询）"></a>exists后面（相关子查询）</h5><p>语法：exists(完整的查询语句)  结果：1或0</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">EXISTS</span>(<span class="keyword">SELECT</span> employee_id <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> salary=<span class="number">300000</span>);</span><br></pre></td></tr></table></figure>
<p>如果有的话，结果就是1，如果没有的话，结果是0；</p>
<p>#案例1：查询有员工的部门名#in，两种方式，一种是in一种是exist</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_name</span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">WHERE</span> d.<span class="string">`department_id`</span> <span class="keyword">IN</span>(</span><br><span class="line">    <span class="keyword">SELECT</span> department_id</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200502135832619.png" alt="img"></p>
<h3 id="7-分页查询"><a href="#7-分页查询" class="headerlink" title="7. 分页查询"></a>7. 分页查询</h3><p>应用场景：当要显示的数据，一页显示不全，需要分页提交sql请求<br>语法：<br>   select 查询列表<br>   from 表<br>   【join type join 表2<br>   on 连接条件<br>   where 筛选条件<br>   group by 分组字段<br>   having 分组后的筛选<br>   order by 排序的字段】<br>   limit 【offset,】size;</p>
<ul>
<li>案例1：查询前五条员工信息</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span>  employees <span class="keyword">LIMIT</span> <span class="number">0</span>,<span class="number">5</span>;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span>  employees <span class="keyword">LIMIT</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200502161348530.png" alt="img"></p>
<ul>
<li>案例2：查询第11条——第25条</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span>  employees <span class="keyword">LIMIT</span> <span class="number">10</span>,<span class="number">15</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200502161409547.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"></p>
<h3 id="8-联合查询"><a href="#8-联合查询" class="headerlink" title="8. 联合查询"></a>8. 联合查询</h3><p>union 联合 合并：将多条查询语句的结果合并成一个结果</p>
<p>语法：<br>查询语句1<br>union<br>查询语句2</p>
<p><strong>应用场景：</strong><br>要查询的结果来自于多个表，且多个表没有直接的连接关系，但查询的信息一致时</p>
<p>特点：<br>1、要求多条查询语句的查询<strong>列数</strong>是一致的！<br>2、要求多条查询语句的查询的每一列的<strong>类型和顺序最好一致</strong><br>3、union关键字默认<strong>去重</strong>，如果使用<strong>union all 可以包含重复项</strong></p>
<ul>
<li>案例：查询部门编号&gt;90或邮箱包含a的员工信息</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> email <span class="keyword">LIKE</span> <span class="string">'%a%'</span> <span class="keyword">OR</span> department_id&gt;<span class="number">90</span>;;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> employees  <span class="keyword">WHERE</span> email <span class="keyword">LIKE</span> <span class="string">'%a%'</span></span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> employees  <span class="keyword">WHERE</span> department_id&gt;<span class="number">90</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>案例：查询中国用户中男性的信息以及外国用户中年男性的用户信息</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,cname <span class="keyword">FROM</span> t_ca <span class="keyword">WHERE</span> csex=<span class="string">'男'</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> t_id,tname <span class="keyword">FROM</span> t_ua <span class="keyword">WHERE</span> tGender=<span class="string">'male'</span>;</span><br></pre></td></tr></table></figure>
<p>$$ —- \mathcal{End} —- $$</p>
]]></content>
      <categories>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>3.数据库的设计</title>
    <url>/2020/06/09/%E6%95%B0%E6%8D%AE%E5%BA%93/3.%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%AE%BE%E8%AE%A1/</url>
    <content><![CDATA[<p><code>最近更新： 2020-6-9 upds。</code></p>
<h4 id="数据库设计的范式"><a href="#数据库设计的范式" class="headerlink" title="数据库设计的范式"></a>数据库设计的范式</h4><p><strong>概念：</strong>设计数据库时，需要遵循的一些规范。要遵循后边的范式要求，必须先遵循前边的所有范式要求</p>
<a id="more"></a>
<p>设计关系数据库时，遵从不同的规范要求，设计出合理的关系型数据库，这些不同的规范要求被称为不同的范式，各种范式呈递次规范，越高的范式数据库冗余越小。<br>目前关系数据库有<strong>六种范式</strong>：第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、巴斯-科德范式（BCNF）、第四范式(4NF）和第五范式（5NF，又称完美范式）。</p>
<p>分类：</p>
<ol>
<li>第一范式（1NF）：每一列都是不可分割的原子数据项</li>
<li><p>第二范式（2NF）：在1NF的基础上，非码属性必须完全依赖于码（在1NF基础上消除非主属性对主码的部分函数依赖）</p>
<ul>
<li>几个概念：<ol>
<li>函数依赖：A–&gt;B,如果通过A属性(属性组)的值，可以确定唯一B属性的值。则称B依赖于A<br> 例如：学号–&gt;姓名。  （学号，课程名称） –&gt; 分数</li>
<li>完全函数依赖：A–&gt;B， 如果A是一个属性组，则B属性值得确定需要依赖于A属性组中所有的属性值。<br> 例如：（学号，课程名称） –&gt; 分数</li>
<li>部分函数依赖：A–&gt;B， 如果A是一个属性组，则B属性值得确定只需要依赖于A属性组中某一些值即可。<br> 例如：（学号，课程名称） – &gt; 姓名</li>
<li>传递函数依赖：A–&gt;B, B – &gt;C . 如果通过A属性(属性组)的值，可以确定唯一B属性的值，在通过B属性（属性组）的值可以确定唯一C属性的值，则称 C 传递函数依赖于A<br> 例如：学号–&gt;系名，系名–&gt;系主任</li>
<li>码：如果在一张表中，一个属性或属性组，被其他所有属性所完全依赖，则称这个属性(属性组)为该表的码<br> 例如：该表中码为：（学号，课程名称）<ul>
<li>主属性：码属性组中的所有属性</li>
<li>非主属性：除过码属性组的属性</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p>第三范式（3NF）：在2NF基础上，任何非主属性不依赖于其它非主属性（在2NF基础上消除传递依赖）</p>
</li>
</ol>
<h2 id="数据库的备份和还原"><a href="#数据库的备份和还原" class="headerlink" title="数据库的备份和还原"></a>数据库的备份和还原</h2><pre><code>1. 命令行：
    * 语法：
        * 备份： mysqldump -u用户名 -p密码 数据库名称 &gt; 保存的路径
        * 还原：
            1. 登录数据库
            2. 创建数据库
            3. 使用数据库
            4. 执行文件。source 文件路径
2. 图形化工具：
</code></pre><p>$$ —- \mathcal{End} —- $$</p>
]]></content>
      <categories>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>2.数据库基础-DML&amp;DDL</title>
    <url>/2020/06/08/%E6%95%B0%E6%8D%AE%E5%BA%93/2.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80-DML&amp;DDL%20/</url>
    <content><![CDATA[<p><code>最近更新： 2020-6-8 upds。</code></p>
<h2 id="DML-数据操作语言"><a href="#DML-数据操作语言" class="headerlink" title="DML-数据操作语言"></a>DML-数据操作语言</h2><p>插入：insert<br>修改：update<br>删除：delete</p>
<h3 id="1-插入语句"><a href="#1-插入语句" class="headerlink" title="1.插入语句"></a>1.插入语句</h3><a id="more"></a>
<h4 id="方式一：经典的插入"><a href="#方式一：经典的插入" class="headerlink" title="方式一：经典的插入"></a>方式一：经典的插入</h4><p>语法：insert into 表名(列名,…) values(值1,…);</p>
<p>1.插入的值的类型要与列的类型一致或兼容</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> beauty(<span class="keyword">id</span>,<span class="keyword">NAME</span>,sex,borndate,phone,photo,boyfriend_id)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">13</span>,<span class="string">'唐艺昕'</span>,<span class="string">'女'</span>,<span class="string">'1990-4-23'</span>,<span class="string">'1898888888'</span>,<span class="literal">NULL</span>,<span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<p>2.不可以为null的列必须插入值。可以为null的列如何插入值？</p>
<p>方式一：令其为null</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> beauty(<span class="keyword">id</span>,<span class="keyword">NAME</span>,sex,borndate,phone,photo,boyfriend_id)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">13</span>,<span class="string">'唐艺昕'</span>,<span class="string">'女'</span>,<span class="string">'1990-4-23'</span>,<span class="string">'1898888888'</span>,<span class="literal">NULL</span>,<span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<p>#方式二：可以为空的，不写就好</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> beauty(<span class="keyword">id</span>,<span class="keyword">NAME</span>,sex,phone)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">15</span>,<span class="string">'娜扎'</span>,<span class="string">'女'</span>,<span class="string">'1388888888'</span>);</span><br></pre></td></tr></table></figure>
<p>3.列的顺序是可以调换，但是value一定要一一对应</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> beauty(<span class="keyword">NAME</span>,sex,<span class="keyword">id</span>,phone)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">'蒋欣'</span>,<span class="string">'女'</span>,<span class="number">16</span>,<span class="string">'110'</span>);</span><br></pre></td></tr></table></figure>
<p>4.列数和值的个数必须一致</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> beauty(<span class="keyword">NAME</span>,sex,<span class="keyword">id</span>,phone)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">'关晓彤'</span>,<span class="string">'女'</span>,<span class="number">17</span>,<span class="string">'120'</span>);</span><br></pre></td></tr></table></figure>
<p>5.可以省略列名，默认所有列，而且列的顺序和表中列的顺序一致，可以的</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> beauty</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">18</span>,<span class="string">'张飞'</span>,<span class="string">'男'</span>,<span class="literal">NULL</span>,<span class="string">'119'</span>,<span class="literal">NULL</span>,<span class="literal">NULL</span>);</span><br></pre></td></tr></table></figure>
<h4 id="方式二："><a href="#方式二：" class="headerlink" title="方式二："></a>方式二：</h4><p>语法：<br>insert into 表名<br>set 列名=值,列名=值,…</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> beauty</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">id</span>=<span class="number">19</span>,<span class="keyword">NAME</span>=<span class="string">'刘涛'</span>,phone=<span class="string">'999'</span>;</span><br></pre></td></tr></table></figure>
<h4 id="两种方式大pk-："><a href="#两种方式大pk-：" class="headerlink" title="两种方式大pk ："></a>两种方式大pk ：</h4><p>1、方式一支持插入多行,方式二不支持</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> beauty</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">23</span>,<span class="string">'唐艺昕1'</span>,<span class="string">'女'</span>,<span class="string">'1990-4-23'</span>,<span class="string">'1898888888'</span>,<span class="literal">NULL</span>,<span class="number">2</span>)</span><br><span class="line">,(<span class="number">24</span>,<span class="string">'唐艺昕2'</span>,<span class="string">'女'</span>,<span class="string">'1990-4-23'</span>,<span class="string">'1898888888'</span>,<span class="literal">NULL</span>,<span class="number">2</span>)</span><br><span class="line">,(<span class="number">25</span>,<span class="string">'唐艺昕3'</span>,<span class="string">'女'</span>,<span class="string">'1990-4-23'</span>,<span class="string">'1898888888'</span>,<span class="literal">NULL</span>,<span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<p>2、方式一支持子查询，方式二不支持</p>
<p>先执行<code>SELECT 26,&#39;宋茜&#39;,&#39;11809866&#39;;</code>查出来的结果在进行insert</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> beauty(<span class="keyword">id</span>,<span class="keyword">NAME</span>,phone)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">26</span>,<span class="string">'宋茜'</span>,<span class="string">'11809866'</span>;</span><br></pre></td></tr></table></figure>
<p>先从boys中查询出结果，然后进行插入，</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> beauty(<span class="keyword">id</span>,<span class="keyword">NAME</span>,phone)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,boyname,<span class="string">'1234567'</span></span><br><span class="line"><span class="keyword">FROM</span> boys <span class="keyword">WHERE</span> <span class="keyword">id</span>&lt;<span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<h3 id="2-修改语句"><a href="#2-修改语句" class="headerlink" title="2. 修改语句"></a>2. 修改语句</h3><p>1.修改单表的记录★</p>
<p>语法：<br>update 表名<br>set 列=新值,列=新值,…<br>where 筛选条件;</p>
<p>2.修改多表的记录【补充】</p>
<p>语法：<br>sql92语法：<br>update 表1 别名,表2 别名<br>set 列=值,…<br>where 连接条件<br>and 筛选条件;</p>
<p>sql99语法：<br>update 表1 别名<br>inner|left|right join 表2 别名<br>on 连接条件<br>set 列=值,…<br>where 筛选条件;</p>
<p>1.修改单表的记录<br>案例1：修改beauty表中姓唐的女神的电话为13899888899</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> beauty <span class="keyword">SET</span> phone = <span class="string">'13899888899'</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NAME</span> <span class="keyword">LIKE</span> <span class="string">'唐%'</span>;</span><br></pre></td></tr></table></figure>
<p>案例2：修改boys表中id好为2的名称为张飞，魅力值 10</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> boys <span class="keyword">SET</span> boyname=<span class="string">'张飞'</span>,usercp=<span class="number">10</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<p>2.修改多表的记录</p>
<p>#案例 1：修改张无忌的女朋友的手机号为114</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> boys bo</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> beauty b <span class="keyword">ON</span> bo.<span class="string">`id`</span>=b.<span class="string">`boyfriend_id`</span></span><br><span class="line"><span class="keyword">SET</span> b.<span class="string">`phone`</span>=<span class="string">'114'</span></span><br><span class="line"><span class="keyword">WHERE</span> bo.<span class="string">`boyName`</span>=<span class="string">'张无忌'</span>;</span><br></pre></td></tr></table></figure>
<p>#案例2：修改没有男朋友的女神的男朋友编号都为2号</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> boys bo</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> beauty b <span class="keyword">ON</span> bo.<span class="string">`id`</span>=b.<span class="string">`boyfriend_id`</span></span><br><span class="line"><span class="keyword">SET</span> b.<span class="string">`boyfriend_id`</span>=<span class="number">2</span></span><br><span class="line"><span class="keyword">WHERE</span> bo.<span class="string">`id`</span> <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> boys;</span><br></pre></td></tr></table></figure>
<h3 id="3-删除语句"><a href="#3-删除语句" class="headerlink" title="3. 删除语句"></a>3. 删除语句</h3><p>方式一：delete</p>
<p>语法：</p>
<p>1、单表的删除【★】<br>delete from 表名 where 筛选条件</p>
<p>2、多表的删除【补充】</p>
<p>sql92语法：<br>delete 表1的别名,表2的别名<br>from 表1 别名,表2 别名<br>where 连接条件<br>and 筛选条件;</p>
<p>sql99语法：</p>
<p>delete 表1的别名,表2的别名<br>from 表1 别名<br>inner|left|right join 表2 别名 on 连接条件<br>where 筛选条件;</p>
<p>方式二：truncate</p>
<p>语法：truncate table 表名;</p>
<h4 id="方式一：delete"><a href="#方式一：delete" class="headerlink" title="方式一：delete"></a>方式一：delete</h4><h5 id="1-单表的删除"><a href="#1-单表的删除" class="headerlink" title="1.单表的删除"></a>1.单表的删除</h5><p>案例：删除手机号以9结尾的女神信息</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> beauty <span class="keyword">WHERE</span> phone <span class="keyword">LIKE</span> <span class="string">'%9'</span>;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> beauty;</span><br></pre></td></tr></table></figure>
<h5 id="2-多表的删除"><a href="#2-多表的删除" class="headerlink" title="2.多表的删除"></a>2.多表的删除</h5><p>案例：删除张无忌的女朋友的信息</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> b</span><br><span class="line"><span class="keyword">FROM</span> beauty b</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> boys bo <span class="keyword">ON</span> b.<span class="string">`boyfriend_id`</span> = bo.<span class="string">`id`</span></span><br><span class="line"><span class="keyword">WHERE</span> bo.<span class="string">`boyName`</span>=<span class="string">'张无忌'</span>;</span><br></pre></td></tr></table></figure>
<p>案例：删除黄晓明的信息以及他女朋友的信息</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> b,bo</span><br><span class="line"><span class="keyword">FROM</span> beauty b</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> boys bo <span class="keyword">ON</span> b.<span class="string">`boyfriend_id`</span>=bo.<span class="string">`id`</span></span><br><span class="line"><span class="keyword">WHERE</span> bo.<span class="string">`boyName`</span>=<span class="string">'黄晓明'</span>;</span><br></pre></td></tr></table></figure>
<h4 id="方式二：truncate语句"><a href="#方式二：truncate语句" class="headerlink" title="方式二：truncate语句"></a>方式二：truncate语句</h4><p>案例：将魅力值&gt;100的男神信息删除，其实是做不到的，因为不可能在后面加上where，所以truncate也被叫做清空数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> boys ;</span><br></pre></td></tr></table></figure>
<h5 id="delete-pk-truncate【面试题】"><a href="#delete-pk-truncate【面试题】" class="headerlink" title="delete pk truncate【面试题】"></a><strong>delete pk truncate【面试题】</strong></h5><p>1.delete 可以加where 条件，truncate不能加</p>
<p>2.truncate删除，效率高一丢丢<br>3.假如要删除的表中有自增长列（加入数据自己增长），如果用delete删除后，再插入数据，自增长列的值从断点开始，</p>
<p><img src="https://img-blog.csdnimg.cn/20200914220027937.png" alt="img"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p>而truncate删除后，再插入数据，自增长列的值从1开始。</p>
<p><img src="https://img-blog.csdnimg.cn/20200914220334303.png" alt="img"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p>4.truncate删除没有返回值，delete删除有返回值，告诉你几行被删除了</p>
<p>5.truncate删除不能回滚，delete删除可以回滚.</p>
<h2 id="DDL—数据定义语言（库和表的管理-）"><a href="#DDL—数据定义语言（库和表的管理-）" class="headerlink" title="DDL—数据定义语言（库和表的管理 ）"></a>DDL—数据定义语言（库和表的管理 ）</h2><p>库和表的管理</p>
<p>一、库的管理<br>创建、修改、删除<br>二、表的管理<br>创建、修改、删除</p>
<p>创建： create<br>修改： alter<br>删除： drop</p>
<h4 id="一、库的管理"><a href="#一、库的管理" class="headerlink" title="一、库的管理"></a>一、库的管理</h4><h5 id="1、库的创建"><a href="#1、库的创建" class="headerlink" title="1、库的创建"></a>1、库的创建</h5><p>语法：<br>create database  [if not exists]库名;</p>
<p>案例：创建库Books</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> books ;</span><br></pre></td></tr></table></figure>
<p>2、库的修改</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RENAME</span> <span class="keyword">DATABASE</span> books <span class="keyword">TO</span> 新库名;</span><br></pre></td></tr></table></figure>
<p>3.更改库的字符集</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> books <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> gbk;</span><br></pre></td></tr></table></figure>
<p>4、库的删除</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">DATABASE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> books;</span><br></pre></td></tr></table></figure>
<h4 id="二、表的管理"><a href="#二、表的管理" class="headerlink" title="二、表的管理"></a>二、表的管理</h4><h5 id="1-表的创建-★"><a href="#1-表的创建-★" class="headerlink" title="1.表的创建 ★"></a>1.表的创建 ★</h5><p>语法：<br>create table 表名(<br>   列名 列的类型【(长度) 约束】,<br>   列名 列的类型【(长度) 约束】,<br>   列名 列的类型【(长度) 约束】,<br>   …<br>   列名 列的类型【(长度) 约束】<br>)</p>
<ul>
<li>案例：创建表Book</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> book(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span>,<span class="comment">#编号</span></span><br><span class="line">    bName <span class="built_in">VARCHAR</span>(<span class="number">20</span>),<span class="comment">#图书名</span></span><br><span class="line">    price <span class="keyword">DOUBLE</span>,<span class="comment">#价格</span></span><br><span class="line">    authorId  <span class="built_in">INT</span>,<span class="comment">#作者编号</span></span><br><span class="line">    publishDate DATETIME<span class="comment">#出版日期</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">DESC book;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200503091631559.png" alt="img"></p>
<ul>
<li>案例：创建表author</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> author(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span>,</span><br><span class="line">    au_name <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">    nation <span class="built_in">VARCHAR</span>(<span class="number">10</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>DESC author;</p>
<h3 id=""><a href="#" class="headerlink" title=""></a><img src="https://img-blog.csdnimg.cn/2020050309181852.png" alt="img"></h3><h5 id="2-表的修改"><a href="#2-表的修改" class="headerlink" title="2. 表的修改"></a>2. 表的修改</h5><p>语法<br><strong>alter table 表名 add|drop|modify|change column 列名 【列类型 约束】;</strong></p>
<h6 id="①修改列名"><a href="#①修改列名" class="headerlink" title="①修改列名"></a>①修改列名</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book <span class="keyword">CHANGE</span> <span class="keyword">COLUMN</span> publishdate pubDate DATETIME;</span><br></pre></td></tr></table></figure>
<h6 id="②修改列的类型或约束"><a href="#②修改列的类型或约束" class="headerlink" title="②修改列的类型或约束"></a>②修改列的类型或约束</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book <span class="keyword">MODIFY</span> <span class="keyword">COLUMN</span> pubdate <span class="built_in">TIMESTAMP</span>;</span><br></pre></td></tr></table></figure>
<h6 id="③添加新列"><a href="#③添加新列" class="headerlink" title="③添加新列"></a>③添加新列</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> author <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> annual <span class="keyword">DOUBLE</span>;</span><br></pre></td></tr></table></figure>
<h6 id="④删除列"><a href="#④删除列" class="headerlink" title="④删除列"></a>④删除列</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book_author <span class="keyword">DROP</span> <span class="keyword">COLUMN</span>  annual;</span><br></pre></td></tr></table></figure>
<h6 id="⑤修改表名"><a href="#⑤修改表名" class="headerlink" title="⑤修改表名"></a>⑤修改表名</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> author <span class="keyword">RENAME</span> <span class="keyword">TO</span> book_author;</span><br></pre></td></tr></table></figure>
<p>表的删除</p>
<h5 id="3-表的删除"><a href="#3-表的删除" class="headerlink" title="3.表的删除"></a>3.表的删除</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> book_author;</span><br></pre></td></tr></table></figure>
<p>通用的写法：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">DATABASE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> 旧库名;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> 新库名;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> 旧表名;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span>  表名();</span><br></pre></td></tr></table></figure>
<h5 id="4-表的复制"><a href="#4-表的复制" class="headerlink" title="4.表的复制"></a>4.表的复制</h5><p>先创建一个表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> author <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>,<span class="string">'村上春树'</span>,<span class="string">'日本'</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">'莫言'</span>,<span class="string">'中国'</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">'冯唐'</span>,<span class="string">'中国'</span>),</span><br><span class="line">(<span class="number">4</span>,<span class="string">'金庸'</span>,<span class="string">'中国'</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> Author;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/2020050309360811.png" alt="img"></p>
<h6 id="1-仅仅复制表的结构，没有数据"><a href="#1-仅仅复制表的结构，没有数据" class="headerlink" title="1.仅仅复制表的结构，没有数据"></a>1.仅仅复制表的结构，没有数据</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> copy <span class="keyword">LIKE</span> author;</span><br></pre></td></tr></table></figure>
<h6 id="2-复制表的结构-数据"><a href="#2-复制表的结构-数据" class="headerlink" title="2.复制表的结构+数据"></a>2.复制表的结构+数据</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> copy2 </span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> author;</span><br></pre></td></tr></table></figure>
<p>只复制部分数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> copy3</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,au_name</span><br><span class="line"><span class="keyword">FROM</span> author </span><br><span class="line"><span class="keyword">WHERE</span> nation=<span class="string">'中国'</span>;</span><br></pre></td></tr></table></figure>
<p>仅仅复制某些字段，因为条件不满足直接是空列</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> copy4 </span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,au_name</span><br><span class="line"><span class="keyword">FROM</span> author</span><br><span class="line"><span class="keyword">WHERE</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>
<h5 id="5-案例讲解"><a href="#5-案例讲解" class="headerlink" title="5.案例讲解"></a>5.案例讲解</h5><ol>
<li>创建表dept1<br>id     INT(7)<br>NAME     VARCHAR(25)</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">USE</span> <span class="keyword">test</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept1(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span>(<span class="number">7</span>),</span><br><span class="line">    <span class="keyword">NAME</span> <span class="built_in">VARCHAR</span>(<span class="number">25</span>) </span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>将表departments中的数据插入新表dept2中，可以跨库去赋值表结构</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept2</span><br><span class="line"><span class="keyword">SELECT</span> department_id,department_name</span><br><span class="line"><span class="keyword">FROM</span> myemployees.departments;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>创建表emp5<br>id     INT(7)<br>First_name   VARCHAR (25)<br>Last_name   VARCHAR(25)<br>Dept_id     INT(7)</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp5(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">INT</span>(<span class="number">7</span>),</span><br><span class="line">first_name <span class="built_in">VARCHAR</span>(<span class="number">25</span>),</span><br><span class="line">last_name <span class="built_in">VARCHAR</span>(<span class="number">25</span>),</span><br><span class="line">dept_id <span class="built_in">INT</span>(<span class="number">7</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>将列Last_name的长度增加到50</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp5 <span class="keyword">MODIFY</span> <span class="keyword">COLUMN</span> last_name <span class="built_in">VARCHAR</span>(<span class="number">50</span>);</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>根据表employees创建employees2</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> employees2 <span class="keyword">LIKE</span> myemployees.employees;</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>删除表emp5</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> emp5;</span><br></pre></td></tr></table></figure>
<ol start="7">
<li>将表employees2重命名为emp5</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> employees2 <span class="keyword">RENAME</span> <span class="keyword">TO</span> emp5;</span><br></pre></td></tr></table></figure>
<ol start="8">
<li>在表dept和emp5中添加新列test_column，并检查所作的操作</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp5 <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> test_column <span class="built_in">INT</span>;</span><br></pre></td></tr></table></figure>
<ol start="9">
<li>直接删除表emp5中的列 dept_id</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">DESC emp5;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp5 <span class="keyword">DROP</span> <span class="keyword">COLUMN</span> test_column;</span><br></pre></td></tr></table></figure>
<h4 id="三、常见的数据类型"><a href="#三、常见的数据类型" class="headerlink" title="三、常见的数据类型"></a>三、常见的数据类型</h4><h5 id="数值型："><a href="#数值型：" class="headerlink" title="数值型："></a>数值型：</h5><h6 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h6><p>特点：<br><strong>① 如果不设置无符号还是有符号，默认是有符号，如果想设置无符号，需要添加unsigned关键字<br>② 如果插入的数值超出了整型的范围,会报out of range异常，并且插入临界值<br>③ 如果不设置长度，会有默认的长度</strong><br>长度代表了显示的最大宽度，如果不够会用0在左边填充，但必须搭配zerofill使用！</p>
<h6 id="小数："><a href="#小数：" class="headerlink" title="小数："></a>小数：</h6><p>​     分类：1.浮点型float(M,D)，double(M,D)<br>​                2.定点型 dec(M，D)，decimal(M,D)</p>
<p>特点：</p>
<p>①<br><strong>M：整数部位+小数部位<br>D：小数部位<br>如果超过范围，则插入临界值</strong></p>
<p>②<br><strong>M和D都可以省略<br>如果是decimal，则M默认为10，D默认为0<br>如果是float和double，则会根据插入的数值的精度来决定精度</strong></p>
<p><strong>③定点型的精确度较高，如果要求插入数值的精度较高如货币运算等则考虑使用</strong>字符型：</p>
<p>较短的文本：char、varchar<br>   较长的文本：text、blob（较长的二进制数据）</p>
<h6 id="字符型"><a href="#字符型" class="headerlink" title="字符型"></a>字符型</h6><p>较短的文本：char，varchar</p>
<p>其他：</p>
<p>binary和varbinary用于保存较短的二进制<br>enum用于保存枚举<br>set用于保存集合</p>
<p><strong>较长的文本：</strong><br>text<br>blob(较大的二进制)</p>
<p>特点：</p>
<table>
<thead>
<tr>
<th></th>
<th>写法</th>
<th>M的意思</th>
<th>特点</th>
<th>空间的耗费</th>
<th>效率</th>
</tr>
</thead>
<tbody>
<tr>
<td>char</td>
<td>char（M）</td>
<td>最大的字符数，可以省略，默认为1</td>
<td>固定长度</td>
<td>比较耗费</td>
<td>高</td>
</tr>
<tr>
<td>varchar</td>
<td>varchar（M）</td>
<td>最大的字符数，不可以省略</td>
<td>可变长度</td>
<td>比较节省</td>
<td>低</td>
</tr>
</tbody>
</table>
<h6 id="枚举：列表中只可以选择一个插入"><a href="#枚举：列表中只可以选择一个插入" class="headerlink" title="枚举：列表中只可以选择一个插入"></a>枚举：列表中只可以选择一个插入</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tab_char(</span><br><span class="line">    c1 ENUM(<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tab_char <span class="keyword">VALUES</span>(<span class="string">'a'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tab_char <span class="keyword">VALUES</span>(<span class="string">'b'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tab_char <span class="keyword">VALUES</span>(<span class="string">'c'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tab_char <span class="keyword">VALUES</span>(<span class="string">'m'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tab_char <span class="keyword">VALUES</span>(<span class="string">'A'</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tab_char;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200503110056783.png" alt="img"></p>
<p>因为A和m超出类型所以就显示为空</p>
<p>Set集合类型</p>
<p>和Enum类似，里面只可以保存0~64个成员，区别：Set一次可以选取多个成员，而Enum只能选一个根据成员个数不同</p>
<p>因为A和m超出类型所以就显示为空</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tab_set(</span><br><span class="line">    s1 <span class="keyword">SET</span>(<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tab_set <span class="keyword">VALUES</span>(<span class="string">'a'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tab_set <span class="keyword">VALUES</span>(<span class="string">'A,B'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tab_set <span class="keyword">VALUES</span>(<span class="string">'a,c,d'</span>);</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tab_set;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200503110459202.png" alt="img"></p>
<h4 id="四、常见约束"><a href="#四、常见约束" class="headerlink" title="四、常见约束"></a>四、常见约束</h4><p>含义：一种限制，用于限制表中的数据，为了保证表中的数据的准确和可靠性</p>
<p>分类：六大约束<br>   NOT NULL：非空，用于保证该字段的值不能为空<br>   比如姓名、学号等，就像挂星星的必选项<br>   DEFAULT:默认，用于保证该字段有默认值<br>   比如性别，默认为男<br>   PRIMARY KEY:<strong>主键</strong>，<strong>用于保证该字段的值具有唯一性，并且非空</strong><br>   比如学号、员工编号等<br>   UNIQUE:唯一，用于保证该字段的值具有唯一性，可以为空<br>   比如座位号<br>   CHECK:检查约束【mysql中不支持】<br>   比如年龄、性别<br>   FOREIGN KEY:外键，用于<strong>限制两个表的关系</strong>，用于保证该字段的值必须来自于主表的关联列的值</p>
<p><strong>在从表中添加外键约束，用于引用主表中某列的值</strong></p>
<p>例如：专业id就必须受到专业表的约束，必须在此专业表的范围内，部门编号、工种编号等</p>
<p>添加约束的时机：<br>   1.创建表时<br>   2.修改表时</p>
<p>约束的添加分类：自我感觉列级约束更像是人话，而表级约束更像是函数<br>   列级约束：<br>     六大约束语法上都支持，<strong>但外键约束没有效果</strong><br>   表级约束：<br>     除了非空、默认，其他的都支持</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE 表名(</span><br><span class="line">    字段名 字段类型 列级约束,</span><br><span class="line">    字段名 字段类型,</span><br><span class="line">    表级约束</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>主键和唯一的大对比：</strong></p>
<p>​             <strong>保证唯一性  是否允许为空   一个表中可以有多少个    是否允许组合<br>   主键           √                   ×                                至多有1个          √， 但不推荐<br>   唯一          √                  √                                可以有多个          √， 但不推荐</strong><br><strong>外键：<br>   1、要求在从表设置外键关系<br>   2、从表的外键列的类型和主表的关联列的类型要求一致或兼容，名称无要求<br>   3、主表的关联列必须是一个key（一般是主键或唯一）<br>   4、插入数据时，先插入主表，再插入从表</strong><br>   删除数据时，先删除从表，再删除主表</p>
<h5 id="1-添加列级约束"><a href="#1-添加列级约束" class="headerlink" title="1. 添加列级约束"></a>1. 添加列级约束</h5><p>语法：</p>
<p>直接在字段名和类型后面追加 约束类型即可。可以添加多个列级约束</p>
<p>只支持：默认、非空、主键、唯一</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">USE</span> students;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> stuinfo;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stuinfo(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span>,<span class="comment">#主键</span></span><br><span class="line">    stuName <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span>,<span class="comment">#非空</span></span><br><span class="line">    gender <span class="built_in">CHAR</span>(<span class="number">1</span>) <span class="keyword">CHECK</span>(gender=<span class="string">'男'</span> <span class="keyword">OR</span> gender =<span class="string">'女'</span>),<span class="comment">#检查</span></span><br><span class="line">    seat <span class="built_in">INT</span> <span class="keyword">UNIQUE</span>,<span class="comment">#唯一</span></span><br><span class="line">    age <span class="built_in">INT</span> <span class="keyword">DEFAULT</span>  <span class="number">18</span>,<span class="comment">#默认约束</span></span><br><span class="line">    majorId <span class="built_in">INT</span> <span class="keyword">REFERENCES</span> major(<span class="keyword">id</span>)<span class="comment">#外键</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> major(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">    majorName <span class="built_in">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>查看stuinfo中的所有索引，包括主键、外键、唯一</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">INDEX</span> <span class="keyword">FROM</span> stuinfo;</span><br></pre></td></tr></table></figure>
<h3 id="-1"><a href="#-1" class="headerlink" title=""></a><img src="https://img-blog.csdnimg.cn/20200503160944908.png" alt="img"></h3><h5 id="2-添加表级约束"><a href="#2-添加表级约束" class="headerlink" title="2.添加表级约束"></a>2.添加表级约束</h5><p>语法：在各个字段的最下面<br> 【constraint 约束名】 约束类型(字段名) </p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> stuinfo;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stuinfo(</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">INT</span>,</span><br><span class="line">	stuname <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	gender <span class="built_in">CHAR</span>(<span class="number">1</span>),</span><br><span class="line">	seat <span class="built_in">INT</span>,</span><br><span class="line">	age <span class="built_in">INT</span>,</span><br><span class="line">	majorid <span class="built_in">INT</span>,</span><br><span class="line">	<span class="keyword">CONSTRAINT</span> pk PRIMARY <span class="keyword">KEY</span>(<span class="keyword">id</span>),<span class="comment">#主键</span></span><br><span class="line">	<span class="keyword">CONSTRAINT</span> uq <span class="keyword">UNIQUE</span>(seat),<span class="comment">#唯一键</span></span><br><span class="line">	<span class="keyword">CONSTRAINT</span> ck <span class="keyword">CHECK</span>(gender =<span class="string">'男'</span> <span class="keyword">OR</span> gender  = <span class="string">'女'</span>),<span class="comment">#检查</span></span><br><span class="line">	<span class="keyword">CONSTRAINT</span> fk_stuinfo_major <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(majorid) <span class="keyword">REFERENCES</span> major(<span class="keyword">id</span>)<span class="comment">#外键</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">INDEX</span> <span class="keyword">FROM</span> stuinfo;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200915164247192.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p>可以去掉前面的设置名称：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> stuinfo;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stuinfo(</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">INT</span>,</span><br><span class="line">	stuname <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	gender <span class="built_in">CHAR</span>(<span class="number">1</span>),</span><br><span class="line">	seat <span class="built_in">INT</span>,</span><br><span class="line">	age <span class="built_in">INT</span>,</span><br><span class="line">	majorid <span class="built_in">INT</span>,</span><br><span class="line">	PRIMARY <span class="keyword">KEY</span>(<span class="keyword">id</span>),<span class="comment">#主键</span></span><br><span class="line">	<span class="keyword">UNIQUE</span>(seat),<span class="comment">#唯一键</span></span><br><span class="line">	<span class="keyword">CHECK</span>(gender =<span class="string">'男'</span> <span class="keyword">OR</span> gender  = <span class="string">'女'</span>),<span class="comment">#检查</span></span><br><span class="line">	<span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(majorid) <span class="keyword">REFERENCES</span> major(<span class="keyword">id</span>)<span class="comment">#外键</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>通用的写法：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> stuinfo(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">    stuname <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">    sex <span class="built_in">CHAR</span>(<span class="number">1</span>),</span><br><span class="line">    age <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">18</span>,</span><br><span class="line">    seat <span class="built_in">INT</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">    majorid <span class="built_in">INT</span>,</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> fk_stuinfo_major <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(majorid) <span class="keyword">REFERENCES</span> major(<span class="keyword">id</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="3-主键和唯一的大对比："><a href="#3-主键和唯一的大对比：" class="headerlink" title="3. 主键和唯一的大对比："></a>3. 主键和唯一的大对比：</h5><table>
<thead>
<tr>
<th></th>
<th>保证唯一性</th>
<th>是否允许为空</th>
<th>一个表中可以有多少个</th>
<th>是否允许组合</th>
</tr>
</thead>
<tbody>
<tr>
<td>主键</td>
<td>√</td>
<td>×</td>
<td>至多有1个</td>
<td>√，但不推荐（多个列组合成一个）</td>
</tr>
<tr>
<td>唯一键</td>
<td>√</td>
<td>√</td>
<td>可以有多个</td>
<td>√，但不推荐</td>
</tr>
</tbody>
</table>
<p><strong>外键：<br>   1、要求在从表设置外键关系<br>   2、从表的外键列的类型和主表（引用的表）的关联列的类型要求一致或兼容，名称无要求<br>   3、主表的关联列必须是一个key（一般是主键 primary key或唯一 unique）<br>   4、插入数据时，先插入主表，再插入从表</strong>（有了专业在招学生）<br>   删除数据时，先删除从表，再删除主表</p>
<h5 id="4-修改表时添加约束"><a href="#4-修改表时添加约束" class="headerlink" title="4. 修改表时添加约束"></a>4. 修改表时添加约束</h5><p>1、添加列级约束</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">modify</span> <span class="keyword">column</span> 字段名 字段类型 新约束;</span><br></pre></td></tr></table></figure>
<p>案例：首先创建表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> stuinfo;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stuinfo(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span>,</span><br><span class="line">    stuname <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">    gender <span class="built_in">CHAR</span>(<span class="number">1</span>),</span><br><span class="line">    seat <span class="built_in">INT</span>,</span><br><span class="line">    age <span class="built_in">INT</span>,</span><br><span class="line">    majorid <span class="built_in">INT</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">DESC</span> stuinfo;</span><br></pre></td></tr></table></figure>
<ol>
<li>添加非空约束，使得</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">MODIFY</span> <span class="keyword">COLUMN</span> stuname <span class="built_in">VARCHAR</span>(<span class="number">20</span>)  <span class="keyword">NOT</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200503221319592.png" alt="img"></p>
<p>2、添加表级约束</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> 【<span class="keyword">constraint</span> 约束名】 约束类型(字段名) 【外键的引用】;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>添加默认约束</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">MODIFY</span> <span class="keyword">COLUMN</span> age <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">18</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200503221352726.png" alt="img"></p>
<p>3.添加主键<br>①列级约束（把id添加为主键）</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">MODIFY</span> <span class="keyword">COLUMN</span> <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span>;</span><br></pre></td></tr></table></figure>
<p>②表级约束（把id添加为主键）</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">ADD</span> PRIMARY <span class="keyword">KEY</span>(<span class="keyword">id</span>);</span><br></pre></td></tr></table></figure>
<p>4.添加唯一</p>
<p>①列级约束</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">MODIFY</span> <span class="keyword">COLUMN</span> seat <span class="built_in">INT</span> <span class="keyword">UNIQUE</span>;</span><br></pre></td></tr></table></figure>
<p>②表级约束</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span>(seat);</span><br></pre></td></tr></table></figure>
<p>#5.添加外键</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_stuinfo_major <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(majorid) <span class="keyword">REFERENCES</span> major(<span class="keyword">id</span>);</span><br></pre></td></tr></table></figure>
<h5 id="5、修改表时删除约束"><a href="#5、修改表时删除约束" class="headerlink" title="5、修改表时删除约束"></a>5、修改表时删除约束</h5><p>1.删除非空约束</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">MODIFY</span> <span class="keyword">COLUMN</span> stuname <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<p>#2.删除默认约束，相当于又加了一遍的感觉</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">MODIFY</span> <span class="keyword">COLUMN</span> age <span class="built_in">INT</span> ;</span><br></pre></td></tr></table></figure>
<p>#3.删除主键</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">DROP</span> PRIMARY <span class="keyword">KEY</span>;</span><br></pre></td></tr></table></figure>
<p>#4.删除唯一</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">DROP</span> <span class="keyword">INDEX</span> seat;</span><br></pre></td></tr></table></figure>
<p>#5.删除外键</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> fk_stuinfo_major;</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">INDEX</span> <span class="keyword">FROM</span> stuinfo;</span><br></pre></td></tr></table></figure>
<h4 id="五、标识列"><a href="#五、标识列" class="headerlink" title="五、标识列"></a>五、标识列</h4><p>又称为<strong>自增长列</strong><br>含义：可以不用手动的插入值，系统提供默认的序列值</p>
<p>特点：<br>1、标识列必须和主键搭配吗？不一定，但要求是一个key<br>2、一个表可以有几个标识列？至多一个！<br>3、标识列的类型只能是数值型，一般是int<br>4、标识列可以通过 SET auto_increment_increment=3;设置步长<br>可以通过 手动插入值，设置起始值</p>
<p>一、创建表时设置标识列，通过auto_increment可以实现自增长</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> tab_identity;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tab_identity(</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">INT</span>  primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">	<span class="keyword">NAME</span> <span class="built_in">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200504101459425.png" alt="img"></p>
<p>设置步长和起始值（MySQL不支持）</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">VARIABLES</span> <span class="keyword">LIKE</span> <span class="string">'%auto_increment%'</span>;</span><br></pre></td></tr></table></figure>
<p>设置步长值为3：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> auto_increment_increment=<span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200504101830294.png" alt="img"></p>
<p>$$ —- \mathcal{End} —- $$</p>
]]></content>
      <categories>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>5.常见约束&amp;TCL事务控制语言</title>
    <url>/2020/06/06/%E6%95%B0%E6%8D%AE%E5%BA%93/5.%E5%B8%B8%E8%A7%81%E7%BA%A6%E6%9D%9F&amp;TCL%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E8%AF%AD%E8%A8%80/</url>
    <content><![CDATA[<p><code>最近更新： 2020-6-6 upds。</code></p>
<h2 id="常见约束"><a href="#常见约束" class="headerlink" title="常见约束"></a>常见约束</h2><p><strong>含义：</strong>一种限制，用于限制表中的数据，为了保证表中的数据的准确和可靠性</p>
<a id="more"></a>
<p>分类：六大约束<br>   NOT NULL：非空，用于保证该字段的值不能为空<br>   比如姓名、学号等<br>   DEFAULT:默认，用于保证该字段有默认值<br>   比如性别<br>   PRIMARY KEY:<strong>主键</strong>，<strong>用于保证该字段的值具有唯一性，并且非空</strong><br>   比如学号、员工编号等<br>   UNIQUE:唯一，用于保证该字段的值具有唯一性，可以为空<br>   比如座位号<br>   CHECK:检查约束【mysql中不支持】<br>   比如年龄、性别<br>   FOREIGN KEY:外键，用于<strong>限制两个表的关系</strong>，用于保证该字段的值必须来自于主表的关联列的值<br>     <strong>在从表添加外键约束，用于引用主表中某列的值</strong><br>   比如学生表的专业编号，员工表的部门编号，员工表的工种编号</p>
<p>约束的添加分类：</p>
<p>列级约束：<br>     六大约束语法上都支持，但外键约束没有效果<br>   表级约束：<br>      除了非空、默认，其他的都支持</p>
<p>​            保证唯一性  是否允许为空   一个表中可以有多少个    是否允许组合</p>
<p>   主键   √                     ×                           至多有1个                     √， 但不推荐<br>   唯一   √                      √                           可以有多个                   √， 但不推荐<br><strong>外键：<br>   1、要求在从表设置外键关系<br>   2、从表的外键列的类型和主表的关联列的类型要求一致或兼容，名称无要求<br>   3、主表的关联列必须是一个key（一般是主键或唯一）<br>   4、插入数据时，先插入主表，再插入从表</strong><br>   删除数据时，先删除从表，再删除主表</p>
<h3 id="一、创建表时添加约束"><a href="#一、创建表时添加约束" class="headerlink" title="一、创建表时添加约束"></a>一、创建表时添加约束</h3><h4 id="1-添加列级约束"><a href="#1-添加列级约束" class="headerlink" title="1.添加列级约束"></a>1.添加列级约束</h4><p>语法：</p>
<p>直接在字段名和类型后面追加 约束类型即可。</p>
<p>只支持：默认、非空、主键、唯一</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">USE</span> students;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> stuinfo;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stuinfo(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span>,<span class="comment">#主键</span></span><br><span class="line">    stuName <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span>,<span class="comment">#非空</span></span><br><span class="line">    gender <span class="built_in">CHAR</span>(<span class="number">1</span>) <span class="keyword">CHECK</span>(gender=<span class="string">'男'</span> <span class="keyword">OR</span> gender =<span class="string">'女'</span>),<span class="comment">#检查</span></span><br><span class="line">    seat <span class="built_in">INT</span> <span class="keyword">UNIQUE</span>,<span class="comment">#唯一</span></span><br><span class="line">    age <span class="built_in">INT</span> <span class="keyword">DEFAULT</span>  <span class="number">18</span>,<span class="comment">#默认约束</span></span><br><span class="line">    majorId <span class="built_in">INT</span> <span class="keyword">REFERENCES</span> major(<span class="keyword">id</span>)<span class="comment">#外键</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> major(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">    majorName <span class="built_in">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>查看stuinfo中的所有索引，包括主键、外键、唯一</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">INDEX</span> <span class="keyword">FROM</span> stuinfo;</span><br></pre></td></tr></table></figure>
<h3 id=""><a href="#" class="headerlink" title=""></a><img src="https://img-blog.csdnimg.cn/20200503160944908.png" alt="img"></h3><h4 id="2-添加表级约束"><a href="#2-添加表级约束" class="headerlink" title="2.添加表级约束"></a>2.添加表级约束</h4><p>语法：在各个字段的最下面<br> 【constraint 约束名】 约束类型(字段名) </p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> stuinfo;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stuinfo(</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">INT</span>,</span><br><span class="line">	stuname <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	gender <span class="built_in">CHAR</span>(<span class="number">1</span>),</span><br><span class="line">	seat <span class="built_in">INT</span>,</span><br><span class="line">	age <span class="built_in">INT</span>,</span><br><span class="line">	majorid <span class="built_in">INT</span>,</span><br><span class="line">	<span class="keyword">CONSTRAINT</span> pk PRIMARY <span class="keyword">KEY</span>(<span class="keyword">id</span>),<span class="comment">#主键</span></span><br><span class="line">	<span class="keyword">CONSTRAINT</span> uq <span class="keyword">UNIQUE</span>(seat),<span class="comment">#唯一键</span></span><br><span class="line">	<span class="keyword">CONSTRAINT</span> ck <span class="keyword">CHECK</span>(gender =<span class="string">'男'</span> <span class="keyword">OR</span> gender  = <span class="string">'女'</span>),<span class="comment">#检查</span></span><br><span class="line">	<span class="keyword">CONSTRAINT</span> fk_stuinfo_major <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(majorid) <span class="keyword">REFERENCES</span> major(<span class="keyword">id</span>)<span class="comment">#外键</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">INDEX</span> <span class="keyword">FROM</span> stuinfo;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200915164247192.png" alt="img"></p>
<p>#通用的写法：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> stuinfo(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">    stuname <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">    sex <span class="built_in">CHAR</span>(<span class="number">1</span>),</span><br><span class="line">    age <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">18</span>,</span><br><span class="line">    seat <span class="built_in">INT</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">    majorid <span class="built_in">INT</span>,</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> fk_stuinfo_major <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(majorid) <span class="keyword">REFERENCES</span> major(<span class="keyword">id</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="二、修改表时添加约束"><a href="#二、修改表时添加约束" class="headerlink" title="二、修改表时添加约束"></a>二、修改表时添加约束</h3><p>1、添加列级约束<br>alter table 表名 modify column 字段名 字段类型 新约束;</p>
<p>2、添加表级约束<br>alter table 表名 add 【constraint 约束名】 约束类型(字段名) 【外键的引用】;</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> stuinfo;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stuinfo(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span>,</span><br><span class="line">    stuname <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">    gender <span class="built_in">CHAR</span>(<span class="number">1</span>),</span><br><span class="line">    seat <span class="built_in">INT</span>,</span><br><span class="line">    age <span class="built_in">INT</span>,</span><br><span class="line">    majorid <span class="built_in">INT</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">DESC</span> stuinfo;</span><br></pre></td></tr></table></figure>
<h4 id="1-添加非空约束"><a href="#1-添加非空约束" class="headerlink" title="1.添加非空约束"></a>1.添加非空约束</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">MODIFY</span> <span class="keyword">COLUMN</span> stuname <span class="built_in">VARCHAR</span>(<span class="number">20</span>)  <span class="keyword">NOT</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200503221319592.png" alt="img"></p>
<h4 id="2-添加默认约束"><a href="#2-添加默认约束" class="headerlink" title="2.添加默认约束"></a>2.添加默认约束</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">MODIFY</span> <span class="keyword">COLUMN</span> age <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">18</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200503221352726.png" alt="img"></p>
<h4 id="3-添加主键"><a href="#3-添加主键" class="headerlink" title="3.添加主键"></a>3.添加主键</h4><p>①列级约束（把id添加为主键）</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">MODIFY</span> <span class="keyword">COLUMN</span> <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span>;</span><br></pre></td></tr></table></figure>
<p>②表级约束（把id添加为主键）</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">ADD</span> PRIMARY <span class="keyword">KEY</span>(<span class="keyword">id</span>);</span><br></pre></td></tr></table></figure>
<h4 id="4-添加唯一"><a href="#4-添加唯一" class="headerlink" title="4.添加唯一"></a>4.添加唯一</h4><p>#①列级约束</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">MODIFY</span> <span class="keyword">COLUMN</span> seat <span class="built_in">INT</span> <span class="keyword">UNIQUE</span>;</span><br></pre></td></tr></table></figure>
<p>#②表级约束</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span>(seat);</span><br></pre></td></tr></table></figure>
<h4 id="5-添加外键"><a href="#5-添加外键" class="headerlink" title="5.添加外键"></a>5.添加外键</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_stuinfo_major <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(majorid) <span class="keyword">REFERENCES</span> major(<span class="keyword">id</span>);</span><br></pre></td></tr></table></figure>
<h3 id="三、修改表时删除约束"><a href="#三、修改表时删除约束" class="headerlink" title="三、修改表时删除约束"></a>三、修改表时删除约束</h3><h4 id="1-删除非空约束"><a href="#1-删除非空约束" class="headerlink" title="1.删除非空约束"></a>1.删除非空约束</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">MODIFY</span> <span class="keyword">COLUMN</span> stuname <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<h4 id="2-删除默认约束，相当于又加了一遍的感觉"><a href="#2-删除默认约束，相当于又加了一遍的感觉" class="headerlink" title="2.删除默认约束，相当于又加了一遍的感觉"></a>2.删除默认约束，相当于又加了一遍的感觉</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">MODIFY</span> <span class="keyword">COLUMN</span> age <span class="built_in">INT</span> ;</span><br></pre></td></tr></table></figure>
<h4 id="3-删除主键"><a href="#3-删除主键" class="headerlink" title="3.删除主键"></a>3.删除主键</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">DROP</span> PRIMARY <span class="keyword">KEY</span>;</span><br></pre></td></tr></table></figure>
<h4 id="4-删除唯一"><a href="#4-删除唯一" class="headerlink" title="4.删除唯一"></a>4.删除唯一</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">DROP</span> <span class="keyword">INDEX</span> seat;</span><br></pre></td></tr></table></figure>
<h4 id="5-删除外键"><a href="#5-删除外键" class="headerlink" title="5.删除外键"></a>5.删除外键</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> fk_stuinfo_major;</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">INDEX</span> <span class="keyword">FROM</span> stuinfo;</span><br></pre></td></tr></table></figure>
<h3 id="标识列"><a href="#标识列" class="headerlink" title="标识列"></a>标识列</h3><p>又称为自增长列<br>含义：可以不用手动的插入值，系统提供默认的序列值<br><strong>特点：</strong><br>1、标识列必须和主键搭配吗？不一定，但要求是一个key<br>2、一个表可以有几个标识列？至多一个！<br>3、标识列的类型只能是数值型<br>4、标识列可以通过 SET auto_increment_increment=3;设置步长<br>可以通过 手动插入值，设置起始值</p>
<p>一、创建表时设置标识列</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> tab_identity;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tab_identity(</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">INT</span>  primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">	<span class="keyword">NAME</span> <span class="built_in">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> tab_identity;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tab_identity(<span class="keyword">id</span>,<span class="keyword">NAME</span>) <span class="keyword">VALUES</span>(<span class="literal">null</span>,<span class="string">'john'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tab_identity(<span class="keyword">NAME</span>) <span class="keyword">VALUES</span>(<span class="string">'lucy'</span>);</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tab_identity;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200504101459425.png" alt="img"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> tab_identity;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tab_identity(<span class="keyword">id</span>,<span class="keyword">NAME</span>) <span class="keyword">VALUES</span>(<span class="literal">NULL</span>,<span class="string">'john'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tab_identity(<span class="keyword">NAME</span>) <span class="keyword">VALUES</span>(<span class="string">'lucy'</span>);</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tab_identity;</span><br></pre></td></tr></table></figure>
<p>设置步长和起始值（MySQL不支持）</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">VARIABLES</span> <span class="keyword">LIKE</span> <span class="string">'%auto_increment%'</span>;</span><br></pre></td></tr></table></figure>
<p>设置步长值为3：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> auto_increment_increment=<span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200504101830294.png" alt="img"></p>
<h2 id="TCL-Transaction-Control-Language-事务控制语言"><a href="#TCL-Transaction-Control-Language-事务控制语言" class="headerlink" title="TCL-Transaction Control Language 事务控制语言"></a>TCL-Transaction Control Language 事务控制语言</h2><p><strong>事务：</strong><br>一个或一组sql语句组成一个执行单元，这个执行单元要么全部执行，要么全部不执行。</p>
<p>案例：转账</p>
<p>张三丰  1000<br>郭襄   1000</p>
<p><strong>存储引擎：</strong></p>
<p>1、数据用不同的存储技术进行存储，也称为表类型；</p>
<p>2、通过show engines;来查看mysql支持的存储引擎</p>
<p>3、mysql主流的存储引擎是innodb、myisam、memory，但是后两者不支持事务；</p>
<p>update 表 set 张三丰的余额=500 where name=’张三丰’<br>意外<br>update 表 set 郭襄的余额=1500 where name=’郭襄’</p>
<p><strong>事务的特性：</strong><br>ACID<br><strong>原子性：一个事务不可再分割，要么都执行要么都不执行<br>一致性：一个事务执行会使数据从一个一致状态切换到另外一个一致状态<br>隔离性：一个事务的执行不受其他事务的干扰<br>持久性：一个事务一旦提交，则会永久的改变数据库的数据.</strong></p>
<p><strong>事务的创建</strong><br><strong>隐式事务：</strong>事务没有明显的开启和结束的标记<br>比如insert、update、delete语句</p>
<p>delete from 表 where id =1;</p>
<p>但是很多时候，隐式事务不能够处理我们的问题，例如不能够同时执行这两条语句</p>
<p>update 表 set 张=500；</p>
<p>update 表 set 李=1500；</p>
<p><strong>显式事务</strong>：事务具有明显的开启和结束的标记<br>前提：必须先设置自动提交功能为禁用</p>
<p>开启显示事务，只针对当前这一次有效：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> autocommit=<span class="number">0</span>;</span><br></pre></td></tr></table></figure>
<p>步骤1：开启事务<br>set autocommit=0;<br>start transaction;可选的（上面的可以不写，因为写了这句就代表开启了上面那句）<br>步骤2：编写事务中的sql语句(select insert update delete)像create drop Alter 没有事务之说；<br>语句1;<br>语句2;<br>…</p>
<p>步骤3：结束事务<br>commit;提交事务<br>rollback;回滚事务，单纯的MySQL是做不到的，必须结合应用程序来进行</p>
<p>1.演示事务的使用步骤</p>
<p>开启事务</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> autocommit=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span>;</span><br></pre></td></tr></table></figure>
<p>编写一组事务的语句</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">account</span> <span class="keyword">SET</span> balance = <span class="number">1000</span> <span class="keyword">WHERE</span> username=<span class="string">'张无忌'</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">account</span> <span class="keyword">SET</span> balance = <span class="number">1000</span> <span class="keyword">WHERE</span> username=<span class="string">'赵敏'</span>;</span><br></pre></td></tr></table></figure>
<p>结束事务，回滚和提交都可以</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ROLLBACK</span>;</span><br><span class="line"><span class="comment">#commit;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">account</span>;</span><br></pre></td></tr></table></figure>
<p>但你没有结束事务之前，文件的修改都保留在内存，只有进行了提交才真正的写到了硬盘</p>
<h3 id="1-事务的隔离级别"><a href="#1-事务的隔离级别" class="headerlink" title="1. 事务的隔离级别"></a>1. 事务的隔离级别</h3><table>
<thead>
<tr>
<th></th>
<th>脏读</th>
<th>不可重复读</th>
<th>幻读</th>
</tr>
</thead>
<tbody>
<tr>
<td>read uncommited</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>read commited</td>
<td>×</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>repeatable read</td>
<td>×</td>
<td>×</td>
<td>√</td>
</tr>
<tr>
<td>serializable</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
</tbody>
</table>
<p><img src="https://img-blog.csdnimg.cn/20200504122837341.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"></p>
<p><img src="C:\Users\charl\AppData\Roaming\Typora\typora-user-images\image-20200917161126006.png" alt="image-20200917161126006"></p>
<p>脏读一般针对的是更新，例如update和rollback</p>
<p>不可重复读：也是对于更新，表示前后两次导致值不同</p>
<p>幻读：针对着是插入和删除，与脏读的相同点都是：没有提交，</p>
<p>mysql中默认 第三个隔离级别 repeatable read<br>oracle中默认第二个隔离级别 read committed查看当前的隔离级别：</p>
<p><img src="https://img-blog.csdnimg.cn/20200504142742665.png" alt="img"></p>
<p>1.设置为最低的隔离级别——READ-UNCOMMITTED</p>
<p>set session transaction isolation level read uncommitted;</p>
<p><img src="https://img-blog.csdnimg.cn/20200504143026108.png" alt="img"></p>
<p>开启事物：</p>
<p>set autocommit=0;</p>
<p><img src="https://img-blog.csdnimg.cn/20200504145051774.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"></p>
<h4 id="1-脏读演示"><a href="#1-脏读演示" class="headerlink" title="1. 脏读演示:"></a>1. 脏读演示:</h4><p>左表还没有提交，右边就可以看到数据修改内容（将张无忌替换为了join）</p>
<p><img src="https://img-blog.csdnimg.cn/20200504145503278.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>数据回滚：rollback；</p>
<p>此时又将join变为了张无忌</p>
<p><img src="https://img-blog.csdnimg.cn/20200504145741988.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>这个数据也可以叫做不可重复数据，因为在这种情况下三种并发问题都可以出现：</p>
<p><img src="https://img-blog.csdnimg.cn/20200504150848922.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"></p>
<h4 id="2-切换隔离级别为read-committed"><a href="#2-切换隔离级别为read-committed" class="headerlink" title="2. 切换隔离级别为read committed;"></a>2. 切换隔离级别为read committed;</h4><p><strong>避免了脏读，但是没有避免不可重复读</strong></p>
<p>set session transaction isolation level read committed;</p>
<p>左边已经修改了数据，为”张飞“，以为没有提交，所以右边没有改变，没有出现脏读：</p>
<p><img src="https://img-blog.csdnimg.cn/20200504151925463.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"></p>
<p><strong>不可重复读：</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20200918141011860.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p>总结：repeatable commited可以解决脏读但是解决不了，幻读和不可重复读</p>
<h4 id="3-切换隔离级别为repeatable-read"><a href="#3-切换隔离级别为repeatable-read" class="headerlink" title="3. 切换隔离级别为repeatable read"></a>3. 切换隔离级别为repeatable read</h4><p> set session transaction isolation level repeatable read;</p>
<p>解决了脏读（在未提交之前）和不可重复读（提交前后）：</p>
<p><img src="https://img-blog.csdnimg.cn/20200918141640566.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p>解决了提交事务查询才会变为刘备：</p>
<p><img src="https://img-blog.csdnimg.cn/20200504152552370.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>未解决幻读：幻读就是针对插入的</p>
<p>左边开启一个事务，右边执行了一个事务，在左边会发生一个莫名的变化（明明看到的是三行却有四行受到了影响）：</p>
<p><img src="https://img-blog.csdnimg.cn/20200918142328377.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<h4 id="4-事物隔离级别为serializable"><a href="#4-事物隔离级别为serializable" class="headerlink" title="4. 事物隔离级别为serializable;"></a>4. 事物隔离级别为serializable;</h4><p>set session transaction isolation level serializable;</p>
<p><img src="https://img-blog.csdnimg.cn/20200918143750862.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<h3 id="2-演示事务对于delete和truncate的处理的区别"><a href="#2-演示事务对于delete和truncate的处理的区别" class="headerlink" title="2. 演示事务对于delete和truncate的处理的区别"></a>2. 演示事务对于delete和truncate的处理的区别</h3><p><strong>delete可以成功回滚，truncate不支持回滚</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> autocommit=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span>;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="keyword">account</span>;</span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br></pre></td></tr></table></figure>
<h3 id="3-演示savepoint-的使用（有些像编程中的断点）"><a href="#3-演示savepoint-的使用（有些像编程中的断点）" class="headerlink" title="3. 演示savepoint 的使用（有些像编程中的断点）"></a>3. 演示savepoint 的使用（有些像编程中的断点）</h3><p>设置了SAVEPOINT a;#设置保存点，ROLLBACK TO a;#回滚到保存点,25删除了，因为rollback所以28又回来了</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> autocommit=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span>;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="keyword">account</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">25</span>;</span><br><span class="line"><span class="keyword">SAVEPOINT</span> a;<span class="comment">#设置保存点</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="keyword">account</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">28</span>;</span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> a;<span class="comment">#回滚到保存点</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">account</span>;</span><br></pre></td></tr></table></figure>
<h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><p>含义：虚拟表，和普通表一样使用，比如：舞蹈班和普通班级的对比，舞蹈班是临时的，但是普通班是一直存在的<br>mysql5.1版本出现的新特性，是通过表动态生成的数据</p>
<p>视图的好处：</p>
<ul>
<li>重用SQL语句；</li>
<li>简化了复杂的aql操作，不必知道查询细节；</li>
<li><p>保护数据，提高安全性；</p>
<p> 创建语法的关键字   是否实际占用物理空间   使用</p>
</li>
</ul>
<p>视图   create view     只是保存了sql逻辑   增删改查，只是一般不能增删改</p>
<p>表   create table     保存了数据     增删改查</p>
<table>
<thead>
<tr>
<th></th>
<th>创建语法的关键字</th>
<th>是否实际占用物理空间</th>
<th>使用</th>
</tr>
</thead>
<tbody>
<tr>
<td>视图</td>
<td>create view</td>
<td>没有（只是保存了逻辑）</td>
<td>增删改查，一般不能增删改</td>
</tr>
<tr>
<td>表</td>
<td>create table</td>
<td>占用</td>
<td>增删改查</td>
</tr>
</tbody>
</table>
<p>#案例：查询姓张的学生名和专业名</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> stuname,majorname</span><br><span class="line"><span class="keyword">FROM</span> stuinfo s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> major m <span class="keyword">ON</span> s.<span class="string">`majorid`</span>= m.<span class="string">`id`</span></span><br><span class="line"><span class="keyword">WHERE</span> s.<span class="string">`stuname`</span> <span class="keyword">LIKE</span> <span class="string">'张%'</span>;</span><br></pre></td></tr></table></figure>
<p>做成一个视图：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> v1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> stuname,majorname</span><br><span class="line"><span class="keyword">FROM</span> stuinfo s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> major m <span class="keyword">ON</span> s.<span class="string">`majorid`</span>= m.<span class="string">`id`</span>;</span><br></pre></td></tr></table></figure>
<p>此时在查询就很方便了</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> v1 <span class="keyword">WHERE</span> stuname <span class="keyword">LIKE</span> <span class="string">'张%'</span>;</span><br></pre></td></tr></table></figure>
<h4 id="一、创建视图"><a href="#一、创建视图" class="headerlink" title="一、创建视图"></a>一、创建视图</h4><p>语法：<br>create view 视图名<br>as<br>查询语句;</p>
<p>USE myemployees;</p>
<h5 id="1-查询姓名中包含a字符的员工名、部门名和工种信息"><a href="#1-查询姓名中包含a字符的员工名、部门名和工种信息" class="headerlink" title="1.查询姓名中包含a字符的员工名、部门名和工种信息"></a>1.查询姓名中包含a字符的员工名、部门名和工种信息</h5><p>①创建</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> myv1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,department_name,job_title</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.department_id  = d.department_id</span><br><span class="line"><span class="keyword">JOIN</span> jobs j <span class="keyword">ON</span> j.job_id  = e.job_id;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200505105051666.png" alt="img"></p>
<p>②使用</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> myv1 <span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">'%a%'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/2020050510392390.png" alt="img"></p>
<h5 id="2-查询各部门的平均工资级别"><a href="#2-查询各部门的平均工资级别" class="headerlink" title="2.查询各部门的平均工资级别"></a>2.查询各部门的平均工资级别</h5><p>①创建视图查看每个部门的平均工资，因为没有grade_level就没有生成结果</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> myv2</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AVG</span>(salary) ag,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br></pre></td></tr></table></figure>
<p>②使用</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> myv2.<span class="string">`ag`</span>,g.grade_level</span><br><span class="line"><span class="keyword">FROM</span> myv2</span><br><span class="line"><span class="keyword">JOIN</span> job_grades g</span><br><span class="line"><span class="keyword">ON</span> myv2.<span class="string">`ag`</span> <span class="keyword">BETWEEN</span> g.<span class="string">`lowest_sal`</span> <span class="keyword">AND</span> g.<span class="string">`highest_sal`</span>;</span><br></pre></td></tr></table></figure>
<h5 id="3-查询平均工资最低的部门信息，升序排列，只选择第一个1"><a href="#3-查询平均工资最低的部门信息，升序排列，只选择第一个1" class="headerlink" title="3.查询平均工资最低的部门信息，升序排列，只选择第一个1"></a>3.查询平均工资最低的部门信息，升序排列，只选择第一个1</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> myv2 <span class="keyword">ORDER</span> <span class="keyword">BY</span> ag <span class="keyword">LIMIT</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200505103637164.png" alt="img"></p>
<h5 id="4-查询平均工资最低的部门名和工资"><a href="#4-查询平均工资最低的部门名和工资" class="headerlink" title="4.查询平均工资最低的部门名和工资"></a>4.查询平均工资最低的部门名和工资</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> myv3</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> myv2 <span class="keyword">ORDER</span> <span class="keyword">BY</span> ag <span class="keyword">LIMIT</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> d.*,m.ag</span><br><span class="line"><span class="keyword">FROM</span> myv3 m</span><br><span class="line"><span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> m.<span class="string">`department_id`</span>=d.<span class="string">`department_id`</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200505104535704.png" alt="img"></p>
<h4 id="二、视图的修改"><a href="#二、视图的修改" class="headerlink" title="二、视图的修改"></a>二、视图的修改</h4><p>方式一：</p>
<p>create or replace view  视图名<br>as<br>查询语句;</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> myv3;</span><br></pre></td></tr></table></figure>
<p>下面是修改语句，进行修改之后，再次查询，就发生了变化</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">VIEW</span> myv3</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AVG</span>(salary),job_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> job_id;</span><br></pre></td></tr></table></figure>
<p>方式二：</p>
<p>语法：<br>alter view 视图名<br>as<br>查询语句;</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">VIEW</span> myv3</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>
<h4 id="三、删除视图"><a href="#三、删除视图" class="headerlink" title="三、删除视图"></a>三、删除视图</h4><p>语法：drop view 视图名,视图名,…;</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> emp_v1,emp_v2,myv3;</span><br></pre></td></tr></table></figure>
<h4 id="四、查看视图"><a href="#四、查看视图" class="headerlink" title="四、查看视图"></a>四、查看视图</h4><p>DESC myv3;</p>
<p>SHOW CREATE VIEW myv3;</p>
<p><img src="https://img-blog.csdnimg.cn/20200505105904766.png" alt="img"></p>
<h4 id="案例讲解"><a href="#案例讲解" class="headerlink" title="案例讲解"></a>案例讲解</h4><p>#一、创建视图emp_v1,要求查询电话号码以‘011’开头的员工姓名和工资、邮箱</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">VIEW</span> emp_v1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,salary,email</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> phone_number <span class="keyword">LIKE</span> <span class="string">'011%'</span>;</span><br></pre></td></tr></table></figure>
<p>#二、创建视图emp_v2，要求查询部门的最高工资高于12000的部门信息</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">VIEW</span> emp_v2</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(salary) mx_dep,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">MAX</span>(salary)&gt;<span class="number">12000</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> d.*,m.mx_dep</span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">JOIN</span> emp_v2 m</span><br><span class="line"><span class="keyword">ON</span> m.department_id = d.<span class="string">`department_id`</span>;</span><br></pre></td></tr></table></figure>
<h4 id="五、视图的更新"><a href="#五、视图的更新" class="headerlink" title="五、视图的更新"></a>五、视图的更新</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">VIEW</span> myv1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,email,salary*<span class="number">12</span>*(<span class="number">1</span>+<span class="keyword">IFNULL</span>(commission_pct,<span class="number">0</span>)) <span class="string">"annual salary"</span></span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">VIEW</span> myv1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,email</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> myv1;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200505110304935.png" alt="img"></p>
<h5 id="1-插入"><a href="#1-插入" class="headerlink" title="1.插入"></a>1.插入</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> myv1 <span class="keyword">VALUES</span>(<span class="string">'张飞'</span>,<span class="string">'zf@qq.com'</span>);</span><br></pre></td></tr></table></figure>
<h5 id="2-修改"><a href="#2-修改" class="headerlink" title="2.修改"></a>2.修改</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> myv1 <span class="keyword">SET</span> last_name = <span class="string">'张无忌'</span> <span class="keyword">WHERE</span> last_name=<span class="string">'张飞'</span>;</span><br></pre></td></tr></table></figure>
<h5 id="3-删除"><a href="#3-删除" class="headerlink" title="3.删除"></a>3.删除</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> myv1 <span class="keyword">WHERE</span> last_name = <span class="string">'张无忌'</span>;</span><br></pre></td></tr></table></figure>
<h5 id="具备以下特点的视图不允许更新"><a href="#具备以下特点的视图不允许更新" class="headerlink" title="具备以下特点的视图不允许更新"></a>具备以下特点的视图不允许更新</h5><p>①包含以下关键字的sql语句：分组函数、distinct、group  by、having、union或者union all</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">VIEW</span> myv1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(salary) m,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> myv1;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200505111708124.png" alt="img"></p>
<p>更新,不可以执行，因为包含GROUP BY:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> myv1 <span class="keyword">SET</span> m=<span class="number">9000</span> <span class="keyword">WHERE</span> department_id=<span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<p>②常量视图</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">VIEW</span> myv2</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">'john'</span> <span class="keyword">NAME</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> myv2;</span><br></pre></td></tr></table></figure>
<p>更新,不可以执行，因为包含常量：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> myv2 <span class="keyword">SET</span> <span class="keyword">NAME</span>=<span class="string">'lucy'</span>;</span><br></pre></td></tr></table></figure>
<p>③Select中包含子查询</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">VIEW</span> myv3</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> (<span class="keyword">SELECT</span> <span class="keyword">MAX</span>(salary) <span class="keyword">FROM</span> employees) 最高工资;</span><br></pre></td></tr></table></figure>
<p>更新<br>SELECT * FROM myv3;<br><img src="https://img-blog.csdnimg.cn/20200505112358366.png" alt="img"></p>
<p>UPDATE myv3 SET 最高工资=100000;不可以</p>
<p>④join</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">VIEW</span> myv4</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id  = d.department_id;</span><br></pre></td></tr></table></figure>
<p>更新,不可以执行，因为包含JOIN：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> myv4;</span><br><span class="line"><span class="keyword">UPDATE</span> myv4 <span class="keyword">SET</span> last_name  = <span class="string">'张飞'</span> <span class="keyword">WHERE</span> last_name=<span class="string">'Whalen'</span>;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> myv4 <span class="keyword">VALUES</span>(<span class="string">'陈真'</span>,<span class="string">'xxxx'</span>);</span><br></pre></td></tr></table></figure>
<p>⑤from一个不能更新的视图</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">VIEW</span> myv5</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> myv3;</span><br></pre></td></tr></table></figure>
<p>更新,不可以执行，因为包含不可以更新的视图</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> myv5;</span><br><span class="line"><span class="keyword">UPDATE</span> myv5 <span class="keyword">SET</span> 最高工资=<span class="number">10000</span> <span class="keyword">WHERE</span> department_id=<span class="number">60</span>;</span><br></pre></td></tr></table></figure>
<p>⑥where子句的子查询引用了from子句中的表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">VIEW</span> myv6</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,email,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> employee_id <span class="keyword">IN</span>(</span><br><span class="line">    <span class="keyword">SELECT</span>  manager_id</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">    <span class="keyword">WHERE</span> manager_id <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200505112845815.png" alt="img"></p>
<p>更新，不可以的</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> myv6;</span><br><span class="line"><span class="keyword">UPDATE</span> myv6 <span class="keyword">SET</span> salary=<span class="number">10000</span> <span class="keyword">WHERE</span> last_name = <span class="string">'k_ing'</span>;</span><br></pre></td></tr></table></figure>
<p><strong>测试题</strong></p>
<p>创建book表，字段如下：</p>
<p>bid整型，要求主键</p>
<p>bname字符型，要求设置唯一键，并非空</p>
<p>price浮点型，要求有默认值10</p>
<p>bttyped 类型编号，要求引用booktype表的id字段</p>
<p>已知booktype表（不用创建），字段如下：</p>
<p>id,name</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> book(</span><br><span class="line">	bid <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">	bname <span class="built_in">VARCHAR</span>(<span class="number">20</span>)<span class="keyword">UNIQUE</span> <span class="keyword">NOT</span> <span class="literal">NULL</span></span><br><span class="line">	price <span class="built_in">FLOAT</span> <span class="keyword">DEFAULT</span> <span class="number">10</span>,</span><br><span class="line">	btypedId <span class="built_in">INT</span>,</span><br><span class="line">	<span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(btypeid) <span class="keyword">REFERENCES</span> bookType(<span class="keyword">id</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>2.开启事物<br>向表中插入1行数据，并结束</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> autocommit=<span class="number">0</span>；</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> book(bid,bname,price,btypeId)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'小李飞刀'</span>，<span class="number">100</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">rollback</span>;</span><br></pre></td></tr></table></figure>
<p>3.创建视图，实现查询价格在90-120之间的书名和价格</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> myv1</span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> bname,<span class="keyword">name</span></span><br><span class="line"><span class="keyword">from</span> book b</span><br><span class="line"><span class="keyword">join</span> bookType t <span class="keyword">on</span> b.typeid=t.id</span><br><span class="line"><span class="keyword">where</span> price&gt;<span class="number">100</span>;</span><br></pre></td></tr></table></figure>
<p>4.修改视图，实现查询价格在90-120之间的书名和价格</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">view</span> myv1</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> bname,price</span><br><span class="line"><span class="keyword">from</span> book</span><br><span class="line"><span class="keyword">where</span> price <span class="keyword">between</span> <span class="number">90</span> <span class="keyword">and</span> <span class="number">120</span>;</span><br></pre></td></tr></table></figure>
<p>5.删除刚才建的视图</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> myv1；</span><br></pre></td></tr></table></figure>
<p>$$ —- \mathcal{End} —- $$</p>
]]></content>
      <categories>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>4.变量&amp;存储过程</title>
    <url>/2020/06/10/%E6%95%B0%E6%8D%AE%E5%BA%93/4.%E5%8F%98%E9%87%8F&amp;%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/</url>
    <content><![CDATA[<p><code>最近更新： 2020-6-10 upds。</code></p>
<h2 id="1-变量"><a href="#1-变量" class="headerlink" title="1. 变量"></a>1. 变量</h2><p>系统变量：<br>    全局变量<br>    会话变量</p>
<p>自定义变量：<br>    用户变量<br>    局部变量</p>
<a id="more"></a>
<h3 id="一、系统变量"><a href="#一、系统变量" class="headerlink" title="一、系统变量"></a>一、系统变量</h3><p>说明：变量由系统定义，不是用户定义，属于服务器层面<br>注意：全局变量需要添加global关键字，会话变量需要添加session关键字，如果不写，默认会话级别</p>
<h5 id="使用步骤："><a href="#使用步骤：" class="headerlink" title="使用步骤："></a>使用步骤：</h5><p>1、查看所有系统变量</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">show global|【session】variables;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> @@<span class="keyword">global</span>|【<span class="keyword">session</span>】系统变量名=值;</span><br></pre></td></tr></table></figure>
<p>2、查看满足条件的部分系统变量</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">show global|【session】 variables like &apos;%char%&apos;;</span><br></pre></td></tr></table></figure>
<p>3、查看指定的系统变量的值</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select @@global|【session】系统变量名;</span><br></pre></td></tr></table></figure>
<p>4、为某个系统变量赋值<br>方式一：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">set global|【session】系统变量名=值;</span><br></pre></td></tr></table></figure>
<p>方式二：</p>
<h4 id="1-全局变量"><a href="#1-全局变量" class="headerlink" title="1.全局变量"></a>1.全局变量</h4><p><strong>作用域</strong>：针对于所有会话（连接）有效，但不能跨重启</p>
<p>①查看所有全局变量</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SHOW GLOBAL VARIABLES;</span><br></pre></td></tr></table></figure>
<p>②查看满足条件的部分系统变量</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SHOW GLOBAL VARIABLES LIKE &apos;%char%&apos;;</span><br></pre></td></tr></table></figure>
<p>③查看指定的系统变量的值</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT @@global.autocommit;</span><br></pre></td></tr></table></figure>
<p>④为某个系统变量赋值</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SET @@global.autocommit=0;</span><br><span class="line">SET GLOBAL autocommit=0;</span><br></pre></td></tr></table></figure>
<h4 id="2-会话变量"><a href="#2-会话变量" class="headerlink" title="2. 会话变量"></a>2. 会话变量</h4><p><strong>作用域</strong>：针对于当前会话（连接）有效</p>
<p>①查看所有会话变量</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SHOW SESSION VARIABLES;</span><br></pre></td></tr></table></figure>
<p>#②查看满足条件的部分会话变量</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SHOW SESSION VARIABLES LIKE &apos;%char%&apos;;</span><br></pre></td></tr></table></figure>
<p>#③查看指定的会话变量的值</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT @@autocommit;</span><br><span class="line">SELECT @@session.tx_isolation;</span><br></pre></td></tr></table></figure>
<p>#④为某个会话变量赋值</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SET @@session.tx_isolation=&apos;read-uncommitted&apos;;</span><br><span class="line">SET SESSION tx_isolation=&apos;read-committed&apos;;</span><br></pre></td></tr></table></figure>
<h3 id="二、自定义变量"><a href="#二、自定义变量" class="headerlink" title="二、自定义变量"></a>二、自定义变量</h3><p>说明：变量由用户自定义，而不是系统提供的<br>使用步骤：<br>1、声明<br>2、赋值<br>3、使用（查看、比较、运算等）</p>
<h4 id="1-用户变量"><a href="#1-用户变量" class="headerlink" title="1. 用户变量"></a>1. 用户变量</h4><p><strong>作用域：</strong>针对于当前会话（连接）有效，作用域同于会话变量</p>
<p><strong>赋值操作符</strong>：=或:=<br>①声明并初始化,三种方式：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SET @变量名=值;</span><br><span class="line">SET @变量名:=值;</span><br><span class="line">SELECT @变量名:=值;</span><br></pre></td></tr></table></figure>
<p>②赋值（更新变量的值）和上面一样，所以既可以当声明又可以当赋值<br>方式一：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SET @变量名=值;</span><br><span class="line">SET @变量名:=值;</span><br><span class="line">SELECT @变量名:=值;</span><br></pre></td></tr></table></figure>
<p>方式二：  </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT 字段 INTO @变量名</span><br><span class="line">	FROM 表;</span><br></pre></td></tr></table></figure>
<p>③使用（查看变量的值）</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT @变量名;</span><br></pre></td></tr></table></figure>
<h4 id="2-局部变量"><a href="#2-局部变量" class="headerlink" title="2.局部变量"></a>2.局部变量</h4><p>作用域：仅仅在定义它的begin end块中有效<br>应用在 begin end中的第一句话</p>
<p>①声明</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DECLARE 变量名 类型;</span><br><span class="line">DECLARE 变量名 类型 【DEFAULT 值】;</span><br></pre></td></tr></table></figure>
<p>②赋值（更新变量的值）</p>
<p>方式一：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SET 局部变量名=值;</span><br><span class="line">SET 局部变量名:=值;</span><br><span class="line">SELECT 局部变量名:=值;</span><br></pre></td></tr></table></figure>
<p>方式二：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT 字段 INTO 具备变量名</span><br><span class="line">FROM 表;</span><br></pre></td></tr></table></figure>
<p>③使用（查看变量的值）</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT 局部变量名;</span><br></pre></td></tr></table></figure>
<p>案例：声明两个变量，求和并打印</p>
<p>用户变量</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SET @m=1;</span><br><span class="line">SET @n=1;</span><br><span class="line">SET @sum=@m+@n;</span><br><span class="line">SELECT @sum;</span><br></pre></td></tr></table></figure>
<p>局部变量</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DECLARE m INT DEFAULT 1;</span><br><span class="line">DECLARE n INT DEFAULT 1;</span><br><span class="line">DECLARE SUM INT;</span><br><span class="line">SET SUM=m+n;</span><br><span class="line">SELECT SUM;</span><br></pre></td></tr></table></figure>
<p>用户变量和局部变量的对比:</p>
<table>
<thead>
<tr>
<th>作用域</th>
<th>作用域</th>
<th>定义位置</th>
<th>语法</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户变量</td>
<td>当前会话</td>
<td>会话的任何地方</td>
<td>必须加@符号，不用限定类型</td>
</tr>
<tr>
<td>局部变量</td>
<td>BEGIN END中</td>
<td>只能在BEGIN END中，且为第一句话</td>
<td>一般不用加@符号，需要限定类型</td>
</tr>
</tbody>
</table>
<h2 id="2-存储过程"><a href="#2-存储过程" class="headerlink" title="2.存储过程"></a>2.存储过程</h2><p>存储过程和函数：类似于java中的方法<br>好处：<br>1、提高代码的重用性<br>2、简化操作</p>
<p>存储过程<br>含义：一组预先编译好的SQL语句的集合，理解成批处理语句<br>1、提高代码的重用性<br>2、简化操作<br>3、减少了编译次数并且减少了和数据库服务器的连接次数，提高了效率</p>
<h3 id="一、创建语法"><a href="#一、创建语法" class="headerlink" title="一、创建语法"></a>一、创建语法</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> 存储过程名(参数列表)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	存储过程体（一组合法的<span class="keyword">SQL</span>语句）</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure>
<p>注意：<br>1、参数列表包含三部分<br>参数模式  参数名  参数类型<br>举例：<br>in stuname varchar(20)</p>
<p><strong>参数模式：</strong><br>in：该参数可以作为输入，也就是该参数需要调用方传入值<br>out：该参数可以作为输出，也就是该参数可以作为返回值<br>inout：该参数既可以作为输入又可以作为输出，也就是该参数既需要传入值，又可以返回值</p>
<p>2、如果存储过程体仅仅只有一句话，begin end可以省略<br>存储过程体中的每条sql语句的结尾<strong>要求必须加分号</strong>。<br>存储过程的结尾可以使用 <strong>delimiter</strong> 重新设置<br>语法：<br>delimiter 结束标记<br>案例：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">delimiter $</span><br></pre></td></tr></table></figure>
<h3 id="二、调用语法"><a href="#二、调用语法" class="headerlink" title="二、调用语法"></a>二、调用语法</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CALL</span> 存储过程名(实参列表);</span><br></pre></td></tr></table></figure>
<h4 id="1-空参列表"><a href="#1-空参列表" class="headerlink" title="1.空参列表"></a>1.空参列表</h4><p>案例：插入到admin表中五条记录</p>
<p>SELECT * FROM admin;</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> myp1()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">admin</span>(username,<span class="string">`password`</span>) </span><br><span class="line">	<span class="keyword">VALUES</span>(<span class="string">'john1'</span>,<span class="string">'0000'</span>),(<span class="string">'lily'</span>,<span class="string">'0000'</span>),(<span class="string">'rose'</span>,<span class="string">'0000'</span>),(<span class="string">'jack'</span>,<span class="string">'0000'</span>),(<span class="string">'tom'</span>,<span class="string">'0000'</span>);</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<p>运行上面的结束之后就会在存储过程的文件夹下存在myp1</p>
<p>调用（就和调用函数是一样的）：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CALL</span> myp1()$</span><br></pre></td></tr></table></figure>
<h4 id="2-创建带in模式参数的存储过程"><a href="#2-创建带in模式参数的存储过程" class="headerlink" title="2.创建带in模式参数的存储过程"></a>2.创建带in模式参数的存储过程</h4><p>案例1：创建存储过程实现 根据女神名，查询对应的男神信息</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> myp2(<span class="keyword">IN</span> beautyName <span class="built_in">VARCHAR</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SELECT</span> bo.*</span><br><span class="line">	<span class="keyword">FROM</span> boys bo</span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> beauty b <span class="keyword">ON</span> bo.id = b.boyfriend_id</span><br><span class="line">	<span class="keyword">WHERE</span> b.name=beautyName;</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<p>调用：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CALL</span> myp2(<span class="string">'小昭'</span>)$</span><br></pre></td></tr></table></figure>
<p>案例2 ：创建存储过程实现，用户是否登录成功</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> myp4(<span class="keyword">IN</span> username <span class="built_in">VARCHAR</span>(<span class="number">20</span>),<span class="keyword">IN</span> <span class="keyword">PASSWORD</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> <span class="keyword">result</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="string">''</span>;<span class="comment">#声明并初始化</span></span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">INTO</span> <span class="keyword">result</span><span class="comment">#赋值</span></span><br><span class="line">	<span class="keyword">FROM</span> <span class="keyword">admin</span></span><br><span class="line">	<span class="keyword">WHERE</span> admin.username = username</span><br><span class="line">	<span class="keyword">AND</span> admin.password = <span class="keyword">PASSWORD</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">IF</span>(<span class="keyword">result</span>&gt;<span class="number">0</span>,<span class="string">'成功'</span>,<span class="string">'失败'</span>);<span class="comment">#使用</span></span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<p> 调用</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CALL</span> myp3(<span class="string">'张飞'</span>,<span class="string">'8888'</span>)$</span><br></pre></td></tr></table></figure>
<h4 id="3-创建out-模式参数的存储过程"><a href="#3-创建out-模式参数的存储过程" class="headerlink" title="3. 创建out 模式参数的存储过程"></a>3. 创建out 模式参数的存储过程</h4><p>案例1：根据输入的女神名，返回对应的男神名</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> myp6(<span class="keyword">IN</span> beautyName <span class="built_in">VARCHAR</span>(<span class="number">20</span>),<span class="keyword">OUT</span> boyName <span class="built_in">VARCHAR</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SELECT</span> bo.boyname <span class="keyword">INTO</span> boyname</span><br><span class="line">	<span class="keyword">FROM</span> boys bo</span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span></span><br><span class="line">	beauty b <span class="keyword">ON</span> b.boyfriend_id = bo.id</span><br><span class="line">	<span class="keyword">WHERE</span> b.name=beautyName ;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<p>案例2：根据输入的女神名，返回对应的男神名和魅力值</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> myp7(<span class="keyword">IN</span> beautyName <span class="built_in">VARCHAR</span>(<span class="number">20</span>),<span class="keyword">OUT</span> boyName <span class="built_in">VARCHAR</span>(<span class="number">20</span>),<span class="keyword">OUT</span> usercp <span class="built_in">INT</span>) </span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SELECT</span> boys.boyname ,boys.usercp <span class="keyword">INTO</span> boyname,usercp</span><br><span class="line">	<span class="keyword">FROM</span> boys </span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span></span><br><span class="line">	beauty b <span class="keyword">ON</span> b.boyfriend_id = boys.id</span><br><span class="line">	<span class="keyword">WHERE</span> b.name=beautyName ;</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<p>调用</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CALL</span> myp7(<span class="string">'小昭'</span>,@<span class="keyword">name</span>,@cp)$</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> @<span class="keyword">name</span>,@cp$</span><br></pre></td></tr></table></figure>
<h4 id="4-创建带inout模式参数的存储过程"><a href="#4-创建带inout模式参数的存储过程" class="headerlink" title="4.创建带inout模式参数的存储过程"></a>4.创建带inout模式参数的存储过程</h4><p>案例1：传入a和b两个值，最终a和b都翻倍并返回</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> myp8(INOUT a <span class="built_in">INT</span> ,INOUT b <span class="built_in">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SET</span> a=a*<span class="number">2</span>;</span><br><span class="line">	<span class="keyword">SET</span> b=b*<span class="number">2</span>;</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<p>调用</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> @m=<span class="number">10</span>$</span><br><span class="line"><span class="keyword">SET</span> @n=<span class="number">20</span>$</span><br><span class="line"><span class="keyword">CALL</span> myp8(@m,@n)$</span><br></pre></td></tr></table></figure>
<p>SELECT @m,@n$</p>
<h4 id="案例讲解："><a href="#案例讲解：" class="headerlink" title="案例讲解："></a>案例讲解：</h4><h5 id="一、创建存储过程实现传入用户名和密码，插入到admin表中"><a href="#一、创建存储过程实现传入用户名和密码，插入到admin表中" class="headerlink" title="一、创建存储过程实现传入用户名和密码，插入到admin表中"></a>一、创建存储过程实现传入用户名和密码，插入到admin表中</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_pro1(<span class="keyword">IN</span> username <span class="built_in">VARCHAR</span>(<span class="number">20</span>),<span class="keyword">IN</span> loginPwd <span class="built_in">VARCHAR</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">admin</span>(admin.username,<span class="keyword">PASSWORD</span>)</span><br><span class="line">	<span class="keyword">VALUES</span>(username,loginpwd);</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<h5 id="二、创建存储过程实现传入女神编号，返回女神名称和女神电话"><a href="#二、创建存储过程实现传入女神编号，返回女神名称和女神电话" class="headerlink" title="二、创建存储过程实现传入女神编号，返回女神名称和女神电话"></a>二、创建存储过程实现传入女神编号，返回女神名称和女神电话</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_pro2(<span class="keyword">IN</span> <span class="keyword">id</span> <span class="built_in">INT</span>,<span class="keyword">OUT</span> <span class="keyword">NAME</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>),<span class="keyword">OUT</span> phone <span class="built_in">VARCHAR</span>(<span class="number">20</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SELECT</span> b.name ,b.phone <span class="keyword">INTO</span> <span class="keyword">NAME</span>,phone</span><br><span class="line">	<span class="keyword">FROM</span> beauty b</span><br><span class="line">	<span class="keyword">WHERE</span> b.id = <span class="keyword">id</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<h5 id="三、创建存储存储过程或函数实现传入两个女神生日，返回大小"><a href="#三、创建存储存储过程或函数实现传入两个女神生日，返回大小" class="headerlink" title="三、创建存储存储过程或函数实现传入两个女神生日，返回大小"></a>三、创建存储存储过程或函数实现传入两个女神生日，返回大小</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_pro3(<span class="keyword">IN</span> birth1 DATETIME,<span class="keyword">IN</span> birth2 DATETIME,<span class="keyword">OUT</span> <span class="keyword">result</span> <span class="built_in">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">DATEDIFF</span>(birth1,birth2) <span class="keyword">INTO</span> <span class="keyword">result</span>;</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<h5 id="四、创建存储过程或函数实现传入一个日期，格式化成xx年xx月xx日并返回"><a href="#四、创建存储过程或函数实现传入一个日期，格式化成xx年xx月xx日并返回" class="headerlink" title="四、创建存储过程或函数实现传入一个日期，格式化成xx年xx月xx日并返回"></a>四、创建存储过程或函数实现传入一个日期，格式化成xx年xx月xx日并返回</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">DELIMITER //</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_pro4(<span class="keyword">IN</span> mydate DATETIME,<span class="keyword">OUT</span> strDate <span class="built_in">VARCHAR</span>(<span class="number">50</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">DATE_FORMAT</span>(mydate,<span class="string">'%y年%m月%d日'</span>) <span class="keyword">INTO</span> strDate;</span><br><span class="line"><span class="keyword">END</span> </span><br><span class="line">//</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CALL</span> test_pro4(<span class="keyword">NOW</span>(),@<span class="keyword">str</span>)</span><br><span class="line"><span class="keyword">SELECT</span> @<span class="keyword">str</span> $</span><br><span class="line">//</span><br></pre></td></tr></table></figure>
<h5 id="五、创建存储过程或函数实现传入女神名称，返回：女神-and-男神-格式的字符串"><a href="#五、创建存储过程或函数实现传入女神名称，返回：女神-and-男神-格式的字符串" class="headerlink" title="五、创建存储过程或函数实现传入女神名称，返回：女神 and 男神  格式的字符串"></a>五、创建存储过程或函数实现传入女神名称，返回：女神 and 男神  格式的字符串</h5><p>如 传入 ：小昭<br>返回： 小昭 AND 张无忌</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> test_pro5 $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_pro5(<span class="keyword">IN</span> beautyName <span class="built_in">VARCHAR</span>(<span class="number">20</span>),<span class="keyword">OUT</span> <span class="keyword">str</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(beautyName,<span class="string">' and '</span>,<span class="keyword">IFNULL</span>(boyName,<span class="string">'null'</span>)) <span class="keyword">INTO</span> <span class="keyword">str</span></span><br><span class="line">	<span class="keyword">FROM</span> boys bo</span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> beauty b <span class="keyword">ON</span> b.boyfriend_id = bo.id</span><br><span class="line">	<span class="keyword">WHERE</span> b.name=beautyName;</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<p>​    </p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CALL</span> test_pro5(<span class="string">'柳岩'</span>,@<span class="keyword">str</span>)$</span><br><span class="line"><span class="keyword">SELECT</span> @<span class="keyword">str</span> $</span><br></pre></td></tr></table></figure>
<h5 id="六、创建存储过程或函数，根据传入的条目数和起始索引，查询beauty表的记录"><a href="#六、创建存储过程或函数，根据传入的条目数和起始索引，查询beauty表的记录" class="headerlink" title="六、创建存储过程或函数，根据传入的条目数和起始索引，查询beauty表的记录"></a>六、创建存储过程或函数，根据传入的条目数和起始索引，查询beauty表的记录</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> test_pro6$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_pro6(<span class="keyword">IN</span> startIndex <span class="built_in">INT</span>,<span class="keyword">IN</span> <span class="keyword">size</span> <span class="built_in">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> beauty <span class="keyword">LIMIT</span> startIndex,<span class="keyword">size</span>;</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CALL</span> test_pro6(<span class="number">3</span>,<span class="number">5</span>)$</span><br></pre></td></tr></table></figure>
<h4 id="三、删除存储过程"><a href="#三、删除存储过程" class="headerlink" title="三、删除存储过程"></a>三、删除存储过程</h4><p>语法：drop procedure 存储过程名</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> p1;</span><br></pre></td></tr></table></figure>
<p>不可以：DROP PROCEDURE p2,p3;#×</p>
<h4 id="四、查看存储过程的信息"><a href="#四、查看存储过程的信息" class="headerlink" title="四、查看存储过程的信息"></a>四、查看存储过程的信息</h4><p>DESC myp1;×</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span>  myp1;</span><br></pre></td></tr></table></figure>
<p>注意：没有办法修改里面的逻辑语句，所以只可以删除重新建立 </p>
<h2 id="3-函数"><a href="#3-函数" class="headerlink" title="3. 函数"></a>3. 函数</h2><p><strong>含义</strong>：一组预先编译好的SQL语句的集合，理解成批处理语句<br>1、提高代码的重用性<br>2、简化操作<br>3、减少了编译次数并且减少了和数据库服务器的连接次数，提高了效率</p>
<p><strong>区别：</strong></p>
<p>存储过程：可以有0个返回，也可以有多个返回，<strong>适合做批量插入、批量更新</strong><br>函数：有且仅有1 个返回，适合做<strong>处理数据后返回一个结果</strong></p>
<h4 id="一、创建语法-1"><a href="#一、创建语法-1" class="headerlink" title="一、创建语法"></a>一、创建语法</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> 函数名(参数列表) <span class="keyword">RETURNS</span> 返回类型</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	函数体</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure>
<p>注意：<br>1.参数列表 包含两部分：<br>参数名 参数类型</p>
<p>2.函数体：肯定会有return语句，如果   没有会报错<br>如果return语句没有放在函数体的最后也不报错，但不建议</p>
<p>return 值;<br>3.函数体中仅有一句话，则可以省略begin end<br>4.使用 delimiter语句设置结束标记</p>
<h4 id="二、调用语法-1"><a href="#二、调用语法-1" class="headerlink" title="二、调用语法"></a>二、调用语法</h4><p>SELECT 函数名(参数列表)</p>
<h6 id="1-无参有返回"><a href="#1-无参有返回" class="headerlink" title="1.无参有返回"></a>1.无参有返回</h6><p>案例：返回公司的员工个数</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> myf1() <span class="keyword">RETURNS</span> <span class="built_in">INT</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">DECLARE</span> c <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;<span class="comment">#定义局部变量</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">INTO</span> c<span class="comment">#赋值</span></span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line">RETURN c;</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> myf1()$</span><br></pre></td></tr></table></figure>
<h6 id="2-有参有返回"><a href="#2-有参有返回" class="headerlink" title="2.有参有返回"></a>2.有参有返回</h6><p>案例1：根据员工名，返回它的工资</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> myf2(empName <span class="built_in">VARCHAR</span>(<span class="number">20</span>)) <span class="keyword">RETURNS</span> <span class="keyword">DOUBLE</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SET</span> @sal=<span class="number">0</span>;<span class="comment">#定义用户变量 </span></span><br><span class="line">	<span class="keyword">SELECT</span> salary <span class="keyword">INTO</span> @sal <span class="comment">#赋值</span></span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">	<span class="keyword">WHERE</span> last_name = empName;</span><br><span class="line">RETURN @sal;</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> myf2(<span class="string">'k_ing'</span>) $</span><br></pre></td></tr></table></figure>
<p>案例2：根据部门名，返回该部门的平均工资</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> myf3(deptName <span class="built_in">VARCHAR</span>(<span class="number">20</span>)) <span class="keyword">RETURNS</span> <span class="keyword">DOUBLE</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> sal <span class="keyword">DOUBLE</span> ;</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">AVG</span>(salary) <span class="keyword">INTO</span> sal</span><br><span class="line">	<span class="keyword">FROM</span> employees e</span><br><span class="line">	<span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.department_id = d.department_id</span><br><span class="line">	<span class="keyword">WHERE</span> d.department_name=deptName;</span><br><span class="line">	RETURN sal;</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> myf3(<span class="string">'IT'</span>)$</span><br></pre></td></tr></table></figure>
<h4 id="三、查看函数"><a href="#三、查看函数" class="headerlink" title="三、查看函数"></a>三、查看函数</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> myf3;</span><br></pre></td></tr></table></figure>
<h4 id="四、删除函数"><a href="#四、删除函数" class="headerlink" title="四、删除函数"></a>四、删除函数</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">FUNCTION</span> myf3;</span><br></pre></td></tr></table></figure>
<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><p>一、创建函数，实现传入两个float，返回二者之和</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> test_fun1(num1 <span class="built_in">FLOAT</span>,num2 <span class="built_in">FLOAT</span>) <span class="keyword">RETURNS</span> <span class="built_in">FLOAT</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> <span class="keyword">SUM</span> <span class="built_in">FLOAT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">SET</span> <span class="keyword">SUM</span>=num1+num2;</span><br><span class="line">	RETURN SUM;</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT test_fun1(1,2)$</span><br></pre></td></tr></table></figure>
<h2 id="4-流程控制结构"><a href="#4-流程控制结构" class="headerlink" title="4.流程控制结构"></a>4.流程控制结构</h2><p>顺序、分支、循环</p>
<h4 id="一、分支结构"><a href="#一、分支结构" class="headerlink" title="一、分支结构"></a>一、分支结构</h4><h5 id="1-if函数"><a href="#1-if函数" class="headerlink" title="1.if函数"></a>1.if函数</h5><p>语法：if(条件,值1，值2)<br>功能：实现双分支<br>应用在begin end中或外面</p>
<h5 id="2-case结构"><a href="#2-case结构" class="headerlink" title="2.case结构"></a>2.case结构</h5><p>语法：</p>
<h6 id="情况1：类似于switch"><a href="#情况1：类似于switch" class="headerlink" title="情况1：类似于switch"></a>情况1：类似于switch</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">case 变量或表达式</span><br><span class="line">when 值1 then 语句1;</span><br><span class="line">when 值2 then 语句2;</span><br><span class="line">...</span><br><span class="line">else 语句n;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h6 id="情况2：类似于java中的多重if语句，一般用于实现区间判断"><a href="#情况2：类似于java中的多重if语句，一般用于实现区间判断" class="headerlink" title="情况2：类似于java中的多重if语句，一般用于实现区间判断"></a>情况2：类似于java中的多重if语句，一般用于实现区间判断</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">case </span><br><span class="line">when 条件1 then 语句1;</span><br><span class="line">when 条件2 then 语句2;</span><br><span class="line">...</span><br><span class="line">else 语句n;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>特点：</p>
<ol>
<li>可以作为表达式，嵌套在其他语句中，可以放在任何地方，应用在begin end 中或外面</li>
</ol>
<p>可以作为独立的语句使用，但只能放在BEGIN END中</p>
<ol start="2">
<li>如果when 中的值满足或者条件成立，则执行对应的THEN后面的语句，并且结束case，如果不满足则执行else的语句和值</li>
<li>ELSE可以省略，当when都不满足，返回null</li>
</ol>
<h5 id="3-if结构"><a href="#3-if结构" class="headerlink" title="3.if结构"></a>3.if结构</h5><p>语法：<br>if 条件1 then 语句1;<br>elseif 条件2 then 语句2;<br>….<br>else 语句n;<br>end if;<br>功能：类似于多重if</p>
<p>只能应用在begin end 中</p>
<p>案例1：创建函数，实现传入成绩，如果成绩&gt;90,返回A，如果成绩&gt;80,返回B，如果成绩&gt;60,返回C，否则返回D</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> test_if(score <span class="built_in">FLOAT</span>) <span class="keyword">RETURNS</span> <span class="built_in">CHAR</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> ch <span class="built_in">CHAR</span> <span class="keyword">DEFAULT</span> <span class="string">'A'</span>;</span><br><span class="line">	IF score&gt;90 THEN SET ch='A';</span><br><span class="line">	ELSEIF score&gt;80 THEN SET ch='B';</span><br><span class="line">	ELSEIF score&gt;60 THEN SET ch='C';</span><br><span class="line">	ELSET ch='D';</span><br><span class="line">	RETURN ch;</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> test_if(<span class="number">87</span>)$</span><br></pre></td></tr></table></figure>
<p>案例2：创建存储过程，如果工资&lt;2000,则删除，如果5000&gt;工资&gt;2000,则涨工资1000，否则涨工资500</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_if_pro(<span class="keyword">IN</span> sal <span class="keyword">DOUBLE</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">IF</span> sal&lt;<span class="number">2000</span> <span class="keyword">THEN</span> <span class="keyword">DELETE</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> employees.salary=sal;</span><br><span class="line">	ELSEIF sal&gt;=2000 AND sal&lt;5000 THEN UPDATE employees SET salary=salary+1000 WHERE employees.`salary`=sal;</span><br><span class="line">	ELSE <span class="keyword">UPDATE</span> employees <span class="keyword">SET</span> salary=salary+<span class="number">500</span> <span class="keyword">WHERE</span> employees.<span class="string">`salary`</span>=sal;</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CALL</span> test_if_pro(<span class="number">2100</span>)$</span><br></pre></td></tr></table></figure>
<p>案例1：创建函数，实现传入成绩，如果成绩&gt;90,返回A，如果成绩&gt;80,返回B，如果成绩&gt;60,返回C，否则返回D</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> test_case(score <span class="built_in">FLOAT</span>) <span class="keyword">RETURNS</span> <span class="built_in">CHAR</span></span><br><span class="line"><span class="keyword">BEGIN</span> </span><br><span class="line">	<span class="keyword">DECLARE</span> ch <span class="built_in">CHAR</span> <span class="keyword">DEFAULT</span> <span class="string">'A'</span>;</span><br><span class="line">CASE </span><br><span class="line">WHEN score&gt;90 THEN SET ch='A';</span><br><span class="line">WHEN score&gt;80 THEN SET ch='B';</span><br><span class="line">WHEN score&gt;60 THEN SET ch='C';</span><br><span class="line">ELSE <span class="keyword">SET</span> ch=<span class="string">'D'</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line"></span><br><span class="line">RETURN ch;</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> test_case(<span class="number">56</span>)$</span><br></pre></td></tr></table></figure>
<h4 id="二、循环结构"><a href="#二、循环结构" class="headerlink" title="二、循环结构"></a>二、循环结构</h4><p><img src="https://img-blog.csdnimg.cn/20200922193341370.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"><br>分类：<br>we、loop、repeat</p>
<p>循环控制：</p>
<p>iterate类似于 continue，继续，结束本次循环，继续下一次<br>leave 类似于  break，跳出，结束当前所在的循环</p>
<h5 id="1-while"><a href="#1-while" class="headerlink" title="1.while"></a>1.while</h5><p>语法：</p>
<p>【标签:】while 循环条件 do<br>    循环体;<br>end while【 标签】;</p>
<p>联想：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">while(循环条件)&#123;</span><br><span class="line"></span><br><span class="line">	循环体;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="2-loop"><a href="#2-loop" class="headerlink" title="2.loop"></a>2.loop</h5><p>语法：<br>【标签:】loop<br>    循环体;<br>end loop 【标签】;</p>
<p>可以用来模拟简单的死循环</p>
<h5 id="3-repeat"><a href="#3-repeat" class="headerlink" title="3.repeat"></a>3.repeat</h5><p>语法：<br>【标签：】repeat<br>    循环体;<br>until 结束循环的条件<br>end repeat 【标签】;</p>
<h6 id="1-没有添加循环控制语句"><a href="#1-没有添加循环控制语句" class="headerlink" title="1.没有添加循环控制语句"></a>1.没有添加循环控制语句</h6><p>案例：批量插入，根据次数插入到admin表中多条记录</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> pro_while1$</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> pro_while1(<span class="keyword">IN</span> insertCount <span class="built_in">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> i <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>;</span><br><span class="line">	WHILE i&lt;=insertCount DO</span><br><span class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">admin</span>(username,<span class="string">`password`</span>) <span class="keyword">VALUES</span>(<span class="keyword">CONCAT</span>(<span class="string">'Rose'</span>,i),<span class="string">'666'</span>);</span><br><span class="line">		<span class="keyword">SET</span> i=i+<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">WHILE</span>;</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CALL</span> pro_while1(<span class="number">100</span>)$</span><br></pre></td></tr></table></figure>
<p>语法：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">int i=1;</span><br><span class="line">while(i&lt;=ertcount)&#123;</span><br><span class="line"></span><br><span class="line">	//插入</span><br><span class="line">	</span><br><span class="line">	i++;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="2-添加leave语句"><a href="#2-添加leave语句" class="headerlink" title="2.添加leave语句"></a>2.添加leave语句</h6><p>案例：批量插入，根据次数插入到admin表中多条记录，如果次数&gt;20则停止<br>TRUNCATE TABLE admin$<br>DROP PROCEDURE test_while1$</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_while1(<span class="keyword">IN</span> insertCount <span class="built_in">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> i <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>;</span><br><span class="line">	a:WHILE i&lt;=insertCount DO</span><br><span class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">admin</span>(username,<span class="string">`password`</span>) <span class="keyword">VALUES</span>(<span class="keyword">CONCAT</span>(<span class="string">'xiaohua'</span>,i),<span class="string">'0000'</span>);</span><br><span class="line">		IF i&gt;=20 THEN LEAVE a;</span><br><span class="line">		<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">		<span class="keyword">SET</span> i=i+<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">WHILE</span> a;</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<p>CALL test_while1(100)$</p>
<h6 id="3-添加iterate语句"><a href="#3-添加iterate语句" class="headerlink" title="3.添加iterate语句"></a>3.添加iterate语句</h6><p>案例：批量插入，根据次数插入到admin表中多条记录，只插入偶数次</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> <span class="keyword">admin</span>$</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> test_while1$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_while1(<span class="keyword">IN</span> insertCount <span class="built_in">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> i <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">	a:WHILE i&lt;=insertCount DO</span><br><span class="line">		<span class="keyword">SET</span> i=i+<span class="number">1</span>;</span><br><span class="line">		IF MOD(i,2)!=0 THEN ITERATE a;</span><br><span class="line">		<span class="keyword">END</span> <span class="keyword">IF</span>;	</span><br><span class="line">	<span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">admin</span>(username,<span class="string">`password`</span>) <span class="keyword">VALUES</span>(<span class="keyword">CONCAT</span>(<span class="string">'xiaohua'</span>,i),<span class="string">'0000'</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">WHILE</span> a;</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<p>CALL test_while1(100)$</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">int i=0;</span><br><span class="line">while(insertCount)&#123;</span><br><span class="line">	i++;</span><br><span class="line">	if(i%2==0)&#123;</span><br><span class="line">		continue;</span><br><span class="line">	&#125;</span><br><span class="line">	插入</span><br><span class="line">&#125;已知表stringcontent</span><br><span class="line">其中字段：</span><br><span class="line">id 自增长</span><br><span class="line">content varchar(20)</span><br></pre></td></tr></table></figure>
<h6 id="案例："><a href="#案例：" class="headerlink" title="案例："></a>案例：</h6><p>已知表stringcontent<br>其中字段：<br>id 自增长<br>content varchar(20)</p>
<p>向该表插入指定个数的，随机的字符串</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> stringcontent;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stringcontent(</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">	<span class="keyword">content</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line">DELIMITER $</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_randstr_insert(<span class="keyword">IN</span> insertCount <span class="built_in">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> i <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">DECLARE</span> <span class="keyword">str</span> <span class="built_in">VARCHAR</span>(<span class="number">26</span>) <span class="keyword">DEFAULT</span> <span class="string">'abcdefghijklmnopqrstuvwxyz'</span>;</span><br><span class="line">	<span class="keyword">DECLARE</span> startIndex <span class="built_in">INT</span>;<span class="comment">#代表初始索引</span></span><br><span class="line">	<span class="keyword">DECLARE</span> <span class="keyword">len</span> <span class="built_in">INT</span>;<span class="comment">#代表截取的字符长度</span></span><br><span class="line">	WHILE i&lt;=insertcount DO</span><br><span class="line">		<span class="keyword">SET</span> startIndex=<span class="keyword">FLOOR</span>(<span class="keyword">RAND</span>()*<span class="number">26</span>+<span class="number">1</span>);<span class="comment">#代表初始索引，随机范围1-26</span></span><br><span class="line">		<span class="keyword">SET</span> <span class="keyword">len</span>=<span class="keyword">FLOOR</span>(<span class="keyword">RAND</span>()*(<span class="number">20</span>-startIndex+<span class="number">1</span>)+<span class="number">1</span>);<span class="comment">#代表截取长度，随机范围1-（20-startIndex+1）</span></span><br><span class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> stringcontent(<span class="keyword">content</span>) <span class="keyword">VALUES</span>(<span class="keyword">SUBSTR</span>(<span class="keyword">str</span>,startIndex,<span class="keyword">len</span>));</span><br><span class="line">		<span class="keyword">SET</span> i=i+<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">WHILE</span>;</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CALL</span> test_randstr_insert(<span class="number">10</span>)$</span><br></pre></td></tr></table></figure>
<p>$$ —- \mathcal{End} —- $$</p>
]]></content>
      <categories>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>equals和&quot;==&quot;</title>
    <url>/2020/05/06/java/equals%E5%92%8C==%EF%BC%88%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E3%80%81%E5%BC%95%E7%94%A8%E3%80%81String%EF%BC%89/</url>
    <content><![CDATA[<p><code>最近更新： 2020-5-6</code></p>
<h1 id="equals和-（基本数据类型、引用、String）"><a href="#equals和-（基本数据类型、引用、String）" class="headerlink" title="equals和==（基本数据类型、引用、String）"></a>equals和==（基本数据类型、引用、String）</h1><h3 id="1-必备知识："><a href="#1-必备知识：" class="headerlink" title="1. 必备知识："></a>1. 必备知识：</h3><p><img src="https://img-blog.csdnimg.cn/20200923145435903.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p>
<p>equals方法最初是在所有类的基类Object中进行定义的，源码是</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">this</span> == obj);   </span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="1-1-特殊的String"><a href="#1-1-特殊的String" class="headerlink" title="1.1 特殊的String:"></a>1.1 特殊的String:</h4><p>String s=”abce”是一种非常特殊的形式,和new 有本质的区别。它是java中唯一不需要new 就可以产生对象的途径。以String s=”abce”;形式赋值在java中叫直接量,它是在常量池中而不是象new一样放在堆中。这种形式的字符串，在JVM内部发生字符串拘留，即当声明这样的一个字符串后，JVM会在常量池中先查找有有没有一个值为”abcd”的对象,如果有,就会把它赋给当前引用.即原来那个引用和现在这个引用指点向了同一对象,如果没有,则在常量池中新创建一个”abcd”,下一次如果有String s1 = “abcd”;又会将s1指向”abcd”这个对象,即以这形式声明的字符串,只要值相等,任何多个引用都指向同一对象。</p>
<p>而String s = new String(“abcd”);和其它任何对象一样.每调用一次就产生一个对象，只要它们调用。</p>
<p>也可以这么理解: String str = “hello”; 先在内存中找是不是有”hello”这个对象,如果有，就让str指向那个”hello”.如果内存里没有”hello”，就创建一个新的对象保存”hello”. String str=new String (“hello”) 就是不管内存里是不是已经有”hello”这个对象，都新建一个对象保存”hello”。</p>
<p><img src="https://img-blog.csdnimg.cn/20200923154632919.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p>
<p>1、两个对象，必然会在堆空间中创建”ab”对象，同时也会在常量池中放”ab”</p>
<p> 一个对象是：new关键字在堆空间创建的</p>
<p>  另一个对象是：字符串常量池中的对象”ab”。 字节码指令：ldc</p>
<p>2、new String(“a”) + new String(“b”)呢？</p>
<p> 对象1：new StringBuilder()</p>
<p>对象2： new String(“a”)</p>
<p> 对象3： 常量池中的”a”</p>
<p>对象4： new String(“b”)</p>
<p>对象5： 常量池中的”b”</p>
<h3 id="一、基本数据类型"><a href="#一、基本数据类型" class="headerlink" title="一、基本数据类型"></a>一、基本数据类型</h3><p><strong>存放位置：</strong>所有的基本dao数据类型全du部是存储在栈里面，速度快。</p>
<p><strong>equal和==</strong>：数据大小确定，内存空间大小可以分配，<strong>它们是直接按值存放的，所以可以直接</strong>按值访问。他们之间的比较直接选择==，这里直接比较的是他们的值，equal也是一样的。</p>
<h3 id="二-引用数据类型"><a href="#二-引用数据类型" class="headerlink" title="二.引用数据类型"></a>二.<strong>引用数据类型</strong></h3><ol>
<li><strong>==</strong>比较两个对象在内存里是不是同一个对象，就是说在内存里的<strong>存储位置</strong>一致。 两个String对象存储的值是一样的，但有可能在内存里存储在不同的地方.</li>
<li><p><strong>==比较的是引用而equals方法比较的是内容。</strong></p>
<p>public boolean equals(Object obj)这个方法是由Object对象提供的，可以由子类进行重写。默认的实现只有当对象和自身进行比较时才会返回true,这个时候和==是等价的。<strong>String, BitSet, Date,和File</strong>都对equals方法进行了重写，对两个String对象而言，<strong>值</strong>相等意味着它们包含同样的字符序列。对于基本类型的包装类说，值相等意味着对应的基本类型的值一样。</p>
</li>
</ol>
<h3 id="三、字符串缓冲池"><a href="#三、字符串缓冲池" class="headerlink" title="三、字符串缓冲池"></a>三、字符串缓冲池</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String s1 = <span class="string">"hello"</span>; </span><br><span class="line">String s2 = <span class="string">"hello"</span>; </span><br><span class="line">System.out.println(s1 == s2);<span class="comment">//true </span></span><br><span class="line">System.out.println(s1.equals(s2));<span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>原来，程序在运行的时候会创建一个字符串缓冲池（字符串常量池）当使用 s2 = “hello” 这样的表达是创建字符串的时候，程序首先会在字符串常量池寻找，s1先被放到了池中，所以在s2被创建的时候，程序找到了具有相同值的 s1 将s2引用s1所引用的对象”hello”；</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String s1 = <span class="string">"hello"</span>; </span><br><span class="line">String s2 = <span class="keyword">new</span> String(<span class="string">"hello"</span>);</span><br><span class="line">System.out.println(s1==s2);<span class="comment">//false</span></span><br><span class="line">System.out.println(s1.equals(s2));<span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>然而 第二段程序中，使用了 new 操作符，必然会在堆空间中创建”hello”对象，同时也会在字符串常量池中放”hello”存中（因为已经存在所以没有放）。他们的值相同，但是位置不同，由此他们的地址值发生了改变！</p>
<h3 id="简单总结："><a href="#简单总结：" class="headerlink" title="简单总结："></a><strong>简单总结：</strong></h3><p><strong>==：</strong></p>
<p>1、比较的是操作符两端的操作数是否是同一个对象。</p>
<p>2、两边的操作数必须是同一类型的（可以是父子类之间）才能编译通过。</p>
<p>3、比较的是<strong>地址</strong>，如果是具体的阿拉伯数字的比较，值相等则为true，如：</p>
<p>int a=10 与 long b=10L与 double c=10.0都是相同的（为true），因为他们都指向地址为10的堆。</p>
<p><strong>equals：</strong></p>
<p>　equals用来比较的是两个对象的内容是否相等，由于所有的类都是继承自java.lang.Object类的，所以适用于所有对象，如果没有对该方法进行重写的话，调用的仍然是Object类中的方法，而Object中的equals方法返回的却是==的判断。</p>
<p>　　</p>
<h3 id="equals和-的区别"><a href="#equals和-的区别" class="headerlink" title="equals和==的区别"></a><strong>equals和==的区别</strong></h3><p>equals方法最初是在所有类的基类Object中进行定义的，源码是</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">this</span> == obj);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>由equals的源码可以看出这里定义的equals与==是等效的（Object类中的equals没什么区别），不同的原因就在于有些类（像String、Integer等类）对equals进行了重写，但是没有对equals进行重写的类（比如我们自己写的类）就只能从Object类中继承equals方法，其equals方法与==就也是等效的，除非我们在此类中重写equals。</p>
<p>　　对equals重新需要注意五点：</p>
<p>　　1  自反性：对任意引用值X，x.equals(x)的返回值一定为true；</p>
<p>　　2  对称性：对于任何引用值x,y,当且仅当y.equals(x)返回值为true时，x.equals(y)的返回值一定为true；</p>
<p>　　3  传递性：如果x.equals(y)=true, y.equals(z)=true,则x.equals(z)=true ；</p>
<p>　　4  一致性：如果参与比较的对象没任何改变，则对象比较的结果也不应该有任何改变；</p>
<p>　　5  非空性：任何非空的引用值X，x.equals(null)的返回值一定为false 。</p>
<p>另外，”==”比”equals”运行速度快,因为”==”只是比较引用。</p>
<p>$$ —- \mathcal{End} —- $$</p>
]]></content>
      <categories>
        <category>java语法</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>icarus主题配置</title>
    <url>/2020/07/20/%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8E%E9%85%8D%E7%BD%AE/icarus%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<h3 id="日常操作命令："><a href="#日常操作命令：" class="headerlink" title="日常操作命令："></a>日常操作命令：</h3><ul>
<li><code>hexo server</code> : 简写 hexo s #启动服务</li>
<li><code>hexo generate</code> : 简写 hexo g #生成静态网页</li>
<li><code>hexo deploy</code> : 简写 hexo d #部署</li>
</ul>
<h3 id="侧边栏"><a href="#侧边栏" class="headerlink" title="侧边栏"></a>侧边栏</h3><h5 id="右侧边栏"><a href="#右侧边栏" class="headerlink" title="右侧边栏"></a>右侧边栏</h5><p>这个是recent我把他改为了“推荐阅读”，打开<code>\icarus\layout\widget\recent_posts.ejs</code>，找到：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">site.posts.sort</span>('<span class="attr">date</span>', <span class="attr">-1</span>)<span class="attr">.limit</span>(<span class="attr">5</span>)<span class="attr">.each</span>(<span class="attr">post</span> =&gt;</span> &#123; %&gt;</span><br></pre></td></tr></table></figure>
<p>一行，改成：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">site.posts.sort</span>('<span class="attr">priority</span>', <span class="attr">-1</span>)<span class="attr">.limit</span>(<span class="attr">5</span>)<span class="attr">.each</span>(<span class="attr">post</span> =&gt;</span> &#123; %&gt;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>然后只需要在每篇文章上面的配置里加上<code>priority: xxx</code>，其中<code>xxx</code>是你自由确定的优先级（1,2,3之类的数字），就可以自由更改显示在那里的文章了。<br>当然也可以调整显示在那里的文章数量，像这样：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">site.posts.sort</span>('<span class="attr">priority</span>', <span class="attr">-1</span>)<span class="attr">.limit</span>(<span class="attr">10</span>)<span class="attr">.each</span>(<span class="attr">post</span> =&gt;</span> &#123; %&gt;</span><br></pre></td></tr></table></figure>
<p>就是显示10篇文章。10也可以改成其它数字。</p>
<p>然后更改栏目名称。打开<code>\icarus\languages\zh-CN.yml</code>，找到：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">recents: '最新文章'</span><br></pre></td></tr></table></figure>
<p>一句，把“最新文章”替换成“阅读推荐”就好了。</p>
<h5 id="侧边栏目录的自动编号"><a href="#侧边栏目录的自动编号" class="headerlink" title="侧边栏目录的自动编号"></a>侧边栏目录的自动编号</h5><p>这个我暂时没有感觉自动编号对我有什么不舒服，如果以后觉得需要改再弄吧</p>
<p>目录本人一般会手动编号，所以这个自动编号功能对我来说并不友好。所以加个开关好了。</p>
<p>打开<code>\icarus\layout\widget\toc.ejs</code>，把整个文件复制一遍然后粘贴到最后面。然后会有两行像这样的语句：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span> (<span class="attr">get_config</span>('<span class="attr">toc</span>') === <span class="string">true</span> &amp;&amp; (<span class="attr">post.layout</span> === <span class="string">'page'</span> || <span class="attr">post.layout</span> === <span class="string">'post'</span>)) &#123;</span></span><br></pre></td></tr></table></figure>
<p>把第一句改成：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span> (<span class="attr">get_config</span>('<span class="attr">toc_auto_num</span>') === <span class="string">false</span> &amp;&amp; <span class="attr">get_config</span>('<span class="attr">toc</span>') === <span class="string">true</span> &amp;&amp; (<span class="attr">post.layout</span> === <span class="string">'page'</span> || <span class="attr">post.layout</span> === <span class="string">'post'</span>)) &#123;</span></span><br></pre></td></tr></table></figure>
<p>第二句改成：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span> ((<span class="attr">get_config</span>('<span class="attr">toc_auto_num</span>') === <span class="string">true</span> || !<span class="attr">has_config</span>('<span class="attr">toc_auto_num</span>')) &amp;&amp; <span class="attr">get_config</span>('<span class="attr">toc</span>') === <span class="string">true</span> &amp;&amp; (<span class="attr">post.layout</span> === <span class="string">'page'</span> || <span class="attr">post.layout</span> === <span class="string">'post'</span>)) &#123;</span></span><br></pre></td></tr></table></figure>
<p>然后找到第一个<code>if</code>语段中如下的位置：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"has-mr-6"</span>&gt;</span>$&#123;toc.index&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>把它注释掉：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--span class="has-mr-6"&gt;$&#123;toc.index&#125;&lt;/span--&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后就可以通过文章前面的<code>toc_auto_num: true/false</code>来控制是不是开启自动编号。</p>
<h5 id="第二种办法："><a href="#第二种办法：" class="headerlink" title="第二种办法："></a>第二种办法：</h5><p>themes/icarus/layout/widget/toc.ejs</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">删除第6行代码即可</span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"has-mr-6"</span>&gt;</span>$&#123;toc.index&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="关注改为关于"><a href="#关注改为关于" class="headerlink" title="关注改为关于"></a>关注改为关于</h5><p>这个东西对我来说也没什么用处。把它链接到关于页面之后，在<code>\icarus\languages\zh-CN.yml</code>里，找到：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">follow: &apos;关注&apos;</span><br></pre></td></tr></table></figure>
<p>一句，改成：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">follow: &apos;关于&apos;</span><br></pre></td></tr></table></figure>
<p>然后更改页面打开方式为同一页面跳转，具体做法是打开<code>\icarus\layout\widget\profile.ejs</code>，找到：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"level-item button is-link is-rounded"</span> <span class="attr">href</span>=<span class="string">"&lt;%= url_for(widget.follow_link) %&gt;"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">%=</span> <span class="attr">__</span>('<span class="attr">widget.follow</span>') %&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>把<code>target=&quot;_blank&quot;</code>属性删掉就好了。</p>
<h5 id="站底数字统计"><a href="#站底数字统计" class="headerlink" title="站底数字统计"></a>站底数字统计</h5><p>主题是默认支持<a href="https://busuanzi.ibruce.info/">BuSuanZi</a>，只需要在配置文件中把busuanzi 改为true即可。</p>
<p>在本机通过<a href="http://localhost/访问会发现访客数很大，我百度后说是发布到服务器上就好了。确实是。">http://localhost/访问会发现访客数很大，我百度后说是发布到服务器上就好了。确实是。</a></p>
<p>初步感觉应该是按照IP为维度来分的，大家本机访问域名都是localhost，所以访客数不断累积。放到自己服务器就重新计算了。</p>
<h5 id="站点推送"><a href="#站点推送" class="headerlink" title="站点推送"></a>站点推送</h5><h5 id="分享插件"><a href="#分享插件" class="headerlink" title="分享插件"></a>分享插件</h5><h5 id="隐藏首页文章"><a href="#隐藏首页文章" class="headerlink" title="隐藏首页文章"></a>隐藏首页文章</h5><h3 id="文章里面改动"><a href="#文章里面改动" class="headerlink" title="文章里面改动"></a>文章里面改动</h3><p><strong>文章发表时间修改</strong></p>
<p>如果文章发布时间较早，那么默认会显示一年前两年前等，看着不是很美观，于是全部修改为发表的年月日。<br>源码中改动如下：</p>
<ul>
<li><p>themes/icarus/layout/common/article.ejs</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">第14行</span><br><span class="line">&lt;span class=&quot;level-item has-text-grey&quot;&gt;写于&lt;%= date(post.date) %&gt;&lt;/span&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="添加评论系统"><a href="#添加评论系统" class="headerlink" title="添加评论系统"></a>添加评论系统</h4><p>之前的WordPress用的是内置评论系统，现在主题里支持很多第三方的评论系统。我采用的是<a href="https://valine.js.org/quickstart.html">valine</a>，具体配置详见<a href="https://ppoffice.github.io/hexo-theme-icarus/categories/Plugins/Comment">官方文档</a>。</p>
<p>$$ —- \mathcal{End} —- $$</p>
]]></content>
      <categories>
        <category>命令行与配置</category>
      </categories>
      <tags>
        <tag>博客主题</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown基础</title>
    <url>/2019/05/14/%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8E%E9%85%8D%E7%BD%AE/Markdown%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h2 id="1-文字内容部分"><a href="#1-文字内容部分" class="headerlink" title="1 文字内容部分"></a>1 文字内容部分</h2><h3 id="1-1-标题"><a href="#1-1-标题" class="headerlink" title="1.1 标题"></a>1.1 标题</h3><a id="more"></a>
<p>Markdown支持6种级别的标题，对应html标签 h1 ~ h6</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># h1</span><br><span class="line">## h2</span><br><span class="line">### h3</span><br><span class="line">#### h4</span><br><span class="line">##### h5</span><br><span class="line">###### h6</span><br></pre></td></tr></table></figure>
<ul>
<li>以上标记效果如下：<br>！<a href="E:/blog/source/_posts/标题.png">标题</a></li>
</ul>
<p>除此之外，Markdown还支持另外一种形式的标题展示形式，其类似于 Setext 标记语言的表现形式，使用下划线进行文本大小的控制<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">这是一级标题</span><br><span class="line">===</span><br><span class="line">这是二级标题</span><br><span class="line">---</span><br></pre></td></tr></table></figure></p>
<h3 id="1-2-区块引用"><a href="#1-2-区块引用" class="headerlink" title="1.2 区块引用"></a>1.2 区块引用</h3><p>而另外一个比较常见的需求就是，我们可能希望对某段文字进行强调处理。Markdown提供了一个特殊符号&gt;用于段首进行强调，被强调的文字部分将会高亮显示<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; 这段文字将被高亮显示...</span><br></pre></td></tr></table></figure></p>
<ul>
<li>以上标记效果如下：<blockquote>
<p>这段文字将被高亮显示…</p>
</blockquote>
</li>
</ul>
<hr>
<h3 id="1-3-标题居中"><a href="#1-3-标题居中" class="headerlink" title="1.3 标题居中"></a>1.3 标题居中</h3><p>/<center>图3 全连接层<center></p>
<p>效果如下:</p>
<p><center>图3 全连接层<center></p>
<h3 id="1-4-列表"><a href="#1-4-列表" class="headerlink" title="1.4 列表"></a>1.4 列表</h3><p>Markdown支持有序列表和无序列表两种形式：</p>
<p>无序列表使用*或+或-标识<br>有序列表使用数字加.标识，例如：1.</p>
<figure class="highlight plain"><figcaption><span>黄瓜</span></figcaption><table><tr><td class="code"><pre><span class="line">* 玉米</span><br><span class="line">* 茄子</span><br><span class="line"></span><br><span class="line">+ 黄瓜</span><br><span class="line">+ 玉米</span><br><span class="line">+ 茄子</span><br><span class="line"></span><br><span class="line">- 黄瓜</span><br><span class="line">- 玉米</span><br><span class="line">- 茄子</span><br><span class="line"></span><br><span class="line">1. 黄瓜</span><br><span class="line">2. 玉米</span><br><span class="line">3. 茄子</span><br></pre></td></tr></table></figure>
<ul>
<li>以上标记效果如下：</li>
</ul>
<ul>
<li>玉米</li>
<li>茄子</li>
</ul>
<ul>
<li>黄瓜</li>
<li>玉米</li>
<li>茄子</li>
</ul>
<ul>
<li>黄瓜</li>
<li>玉米</li>
<li>茄子</li>
</ul>
<ol>
<li>黄瓜</li>
<li>玉米</li>
<li>茄子</li>
</ol>
<p><strong>注</strong>：这里比较有趣的地方是，对于有序列表，Markdown将只关注你的第一个项目的数字编号。例如：如果第一个项目编号是3，以此类推，第二个项目应该是4，最终将显示为3、4、5。而如果你指定了第一个编号，后面的编号指定错误也没有关系，Markdown将只在乎你的第一个项目编号。</p>
<hr>
<h4 id="1-4-1-使用列表的注意事项"><a href="#1-4-1-使用列表的注意事项" class="headerlink" title="1.4.1 使用列表的注意事项"></a>1.4.1 使用列表的注意事项</h4><p>如果在单一列表项中包含了多个段落，为了保证渲染正常，*与段落首字母之间必须保留四个空格</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">*    段落一</span><br><span class="line"></span><br><span class="line">     小段一</span><br><span class="line">*    段落二</span><br><span class="line"></span><br><span class="line">     小段二</span><br></pre></td></tr></table></figure>
<ul>
<li>以上标记效果如下：</li>
</ul>
<ul>
<li><p>段落一</p>
<p>小段一</p>
</li>
<li><p>段落二</p>
<p>小段二</p>
</li>
</ul>
<p>另外，如果在列表中加入了区块引用，区域引用标记符也需要缩进4个空格</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* 段落一</span><br><span class="line">    &gt; 区块标记一</span><br><span class="line">* 段落二</span><br><span class="line">    &gt; 区块标记二</span><br></pre></td></tr></table></figure>
<ul>
<li>以上标记效果如下：</li>
</ul>
<ul>
<li><p>段落一</p>
<blockquote>
<p>区块标记一</p>
</blockquote>
</li>
<li><p>段落二</p>
<blockquote>
<p>区块标记二</p>
</blockquote>
</li>
</ul>
<p><strong>注</strong>：记住一个原则，如果在和列表配合使用的时候出现了问题，就缩进一次，四个空格或者一个制表符代表一次缩进。如果一次缩进没有解决问题，那就两次。</p>
<h3 id="1-5-强调"><a href="#1-5-强调" class="headerlink" title="1.5 强调"></a>1.5 强调</h3><p>有时候，我们希望对某一部分文字进行强调，使用*或_包裹即可。使用单一符号标记的效果是斜体，使用两个符号标记的效果是加粗。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">*这里是斜体*</span><br><span class="line">_这里是斜体_</span><br><span class="line"></span><br><span class="line">**这里是加粗**</span><br><span class="line">__这里是加粗__</span><br></pre></td></tr></table></figure>
<ul>
<li>以上标记效果如下：</li>
</ul>
<p><em>这里是斜体</em><br><em>这里是斜体</em></p>
<p><strong>这里是加粗</strong><br><strong>这里是加粗</strong></p>
<hr>
<h3 id="1-6-插入代码块"><a href="#1-6-插入代码块" class="headerlink" title="1.6 插入代码块"></a>1.6 插入代码块</h3><p>Markdown在IT圈子里面比较流行的一个重要原因是，它能够轻松漂亮地插入代码。方法是，使用反引号进行包裹即可。如果是行内代码引用，使用单个反引号进行包裹<br>这是一段<code>var x = 3</code>行内代码<br>如果插入一整段代码，需要至少使用两个以上反引号进行包裹， 看效果：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">fun (x: Int, y: Int): Int &#123;</span><br><span class="line">  return x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当然typora使用快捷键ctrl+shift+k可以快速解决</p>
<h3 id="1-7-插入表格"><a href="#1-7-插入表格" class="headerlink" title="1.7  插入表格"></a>1.7  插入表格</h3><p>表格是Markdown语法中比较复杂的一个，其语法如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表头|条目一|条目二</span><br><span class="line">:---:|:---:|:---:</span><br><span class="line">项目|项目一|项目二</span><br></pre></td></tr></table></figure>
<ul>
<li>显示效果如下：</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">表头</th>
<th style="text-align:center">条目一</th>
<th style="text-align:center">条目二</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">项目</td>
<td style="text-align:center">项目一</td>
<td style="text-align:center">项目二</td>
</tr>
</tbody>
</table>
<p><strong>注</strong>：三个短斜杠左右的冒号用于控制对齐方式，只放置左边冒号表示文字居左，只放置右边冒号表示文字居右，如果两边都放置冒号表示文字居中。</p>
<h3 id="1-8-特殊符号处理"><a href="#1-8-特殊符号处理" class="headerlink" title="1.8 特殊符号处理"></a>1.8 特殊符号处理</h3><p>Markdown使用反斜杠\插入语法中用到的特殊符号。在Markdown中，主要有以下几种特殊符号需要处理：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">\   反斜线</span><br><span class="line">`   反引号</span><br><span class="line">*   星号</span><br><span class="line">_   底线</span><br><span class="line">&#123;&#125;  花括号</span><br><span class="line">[]  方括号</span><br><span class="line">()  括弧</span><br><span class="line">#   井字号</span><br><span class="line">+   加号</span><br><span class="line">-   减号</span><br><span class="line">.   英文句点</span><br><span class="line">!   惊叹号</span><br></pre></td></tr></table></figure>
<p>例如，如果你需要插入反斜杠，就连续输入两个反斜杠即可：\ =&gt; \ 。<br><strong>注</strong>：在内容中输入以上特殊符号的时候一定要注意转义，否则将导致内容显示不全，甚至排版混乱。</p>
<h2 id="2-链接图片样式"><a href="#2-链接图片样式" class="headerlink" title="2 链接图片样式"></a>2 链接图片样式</h2><h3 id="2-1-插入图片和引用链接"><a href="#2-1-插入图片和引用链接" class="headerlink" title="2.1 插入图片和引用链接"></a>2.1 插入图片和引用链接</h3><p>Markdown针对链接和图片的处理也比较简单，可以使用下面的语法进行标记<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[点击跳转至百度](http://www.baidu.com)</span><br><span class="line">![图片](https://upload-images.jianshu.io/upload_images/703764-605e3cc2ecb664f6.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br></pre></td></tr></table></figure></p>
<p><a href="http://www.baidu.com">点击跳转至百度</a><br><img src="https://upload-images.jianshu.io/upload_images/703764-605e3cc2ecb664f6.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片"></p>
<p><strong>注</strong>： 引用图片和链接的唯一区别就是在最前方添加一个感叹号。</p>
<hr>
<h2 id="3-其他"><a href="#3-其他" class="headerlink" title="3 其他"></a>3 其他</h2><h3 id="3-1-分隔线"><a href="#3-1-分隔线" class="headerlink" title="3.1 分隔线"></a>3.1 分隔线</h3><p>有时候，为了排版漂亮，可能会加入分隔线。Markdown加入分隔线非常简单，使用下面任意一种形式都可以,产生分隔线的语法要求比较松，符号之间添加空格也可以。<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">***</span><br><span class="line">---</span><br></pre></td></tr></table></figure></p>
<ul>
<li>以上标记效果如下：</li>
</ul>
<hr>
<hr>
<p>$$ —- \mathcal{End} —- $$</p>
]]></content>
      <categories>
        <category>命令语法</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>linux基础篇</title>
    <url>/2019/05/14/%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8E%E9%85%8D%E7%BD%AE/linux%20%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h2 id="第一章-实操类-实用指令"><a href="#第一章-实操类-实用指令" class="headerlink" title="第一章 实操类 实用指令"></a>第一章 实操类 实用指令</h2><h3 id="1-1文件目录类"><a href="#1-1文件目录类" class="headerlink" title="1.1文件目录类"></a>1.1文件目录类</h3><h4 id="pwd：查看当前所在文件"><a href="#pwd：查看当前所在文件" class="headerlink" title="pwd：查看当前所在文件"></a><code>pwd</code>：查看当前所在文件</h4><h4 id="ls：查看当前所在文件夹下内容"><a href="#ls：查看当前所在文件夹下内容" class="headerlink" title="ls：查看当前所在文件夹下内容"></a><code>ls</code>：查看当前所在文件夹下内容</h4><p> <code>ls -a</code>：显示指定目录下所有子目录与文件，包含隐藏文件。<br> <code>ls -l</code>：以列表方式显示文件的详细信息。</p>
<p><img src="https://gitee.com/charles1844988765/cloudimage/raw/master/img/ls-l.png" alt=""></p>
<a id="more"></a>
<p> <code>ls -h</code>：配合-l以人性化方式显示文件大小。</p>
<p><img src="https://gitee.com/charles1844988765/cloudimage/raw/master/img/ls-lh.png" alt=""></p>
<h4 id="cd-目录名-：切换文件夹"><a href="#cd-目录名-：切换文件夹" class="headerlink" title="cd [目录名]：切换文件夹"></a><code>cd</code> [目录名]：切换文件夹</h4><h4 id="touch-文件名-：如果文件不存在，新建文件"><a href="#touch-文件名-：如果文件不存在，新建文件" class="headerlink" title="touch [文件名]：如果文件不存在，新建文件"></a><code>touch</code> [文件名]：如果文件不存在，新建文件</h4><p><img src="https://img-blog.csdnimg.cn/20200909162010624.png "  /></p>
<h4 id="mkdir-目录名-：创建目录"><a href="#mkdir-目录名-：创建目录" class="headerlink" title="mkdir [目录名]：创建目录"></a><code>mkdir</code> [目录名]：创建目录</h4><p><img src="https://upload-images.jianshu.io/upload_images/4612913-136c42d0b741c655.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h4 id="rmdir-目录名-：删除空目录"><a href="#rmdir-目录名-：删除空目录" class="headerlink" title="rmdir[目录名]：删除空目录"></a><code>rmdir</code>[目录名]：删除空目录</h4><p><img src="https://upload-images.jianshu.io/upload_images/4612913-5586053fbd910e2b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h4 id="rm-文件名-：删除文件名"><a href="#rm-文件名-：删除文件名" class="headerlink" title="rm[文件名]：删除文件名"></a><code>rm</code>[文件名]：删除文件名</h4><blockquote>
<p>使用rm要小心因为删除后文件不可以恢复</p>
</blockquote>
<table>
<thead>
<tr>
<th>选项</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>-f</td>
<td>强制删除，忽略不存在的文件，无需提示</td>
</tr>
<tr>
<td>-r</td>
<td>递归的删除目录下的文件的内容，<strong>删除文件夹时候，必须带此参数</strong></td>
</tr>
</tbody>
</table>
<h4 id="cp-文件名-或-目录名"><a href="#cp-文件名-或-目录名" class="headerlink" title="cp [文件名] 或 [目录名]"></a><code>cp</code> [文件名] 或 [目录名]</h4><ul>
<li><p>常用选型</p>
<p>​        <code>-r</code>:递归复制整个文件夹</p>
</li>
<li><p>案例1：将/home/aaa.txt 拷贝到 /home/bbb目录下：</p>
<p><img src="https://img-blog.csdnimg.cn/20200909163348353.png" alt=""></p>
</li>
<li><p>案例2：将/home/test 整个目录copy到  /home/zwj/</p>
</li>
</ul>
<div align="center"> <img src="https://img-blog.csdnimg.cn/20200909165816383.png" width = 50%/> </div>

<h4 id="clear-清屏"><a href="#clear-清屏" class="headerlink" title="clear :清屏"></a><code>clear</code> :清屏</h4><h4 id="cat-以只读的格式打开文件"><a href="#cat-以只读的格式打开文件" class="headerlink" title="cat:以只读的格式打开文件"></a><code>cat</code>:以只读的格式打开文件</h4><p><code>more</code>:分屏显示文件内容，每次只显示一页内容</p>
<p><code>less</code>:和上面类似，但对于大型文件具有较高的效率</p>
<p><img src="https://img-blog.csdnimg.cn/20200909170955447.png#pic_center" alt=""></p>
<p><code>head</code>:用于显示文件开头部分内容</p>
<p><img src="https://img-blog.csdnimg.cn/20200909171323893.png#pic_center" alt=""></p>
<p><code>tail</code>:用于输出文件尾部的内容</p>
<p><img src="https://img-blog.csdnimg.cn/20200909171507390.png#pic_center" alt=""></p>
<p><code>echo</code>:输出内容到控制台</p>
<p><code>ln</code>:软连接，类似于windows的快捷方式</p>
<h3 id="1-2搜索查找类"><a href="#1-2搜索查找类" class="headerlink" title="1.2搜索查找类"></a>1.2搜索查找类</h3><h4 id="find："><a href="#find：" class="headerlink" title="find："></a><code>find</code>：</h4><p><strong>从指定的目录下递归的查找各个子目录，将满足条件的文件或者目录显示在终端上</strong></p>
<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>-name</td>
<td>按照指定文件名查找文件</td>
</tr>
<tr>
<td>-user</td>
<td>查找属于指定用户的所有文件</td>
</tr>
<tr>
<td>-size</td>
<td>按照指定文件大小查找文件</td>
</tr>
</tbody>
</table>
<p>案例1：按照文件名，根据名称查找/home目录下的hello.txt</p>
<p><img src="https://img-blog.csdnimg.cn/2020090921252274.png#pic_center" alt=""></p>
<p>案例2：按照拥有者，查找/opt目录下的，用户名称为nodody的文件</p>
<p><img src="https://img-blog.csdnimg.cn/20200909212724794.png#pic_center" alt=""></p>
<p>案例3：查找Linux系统下大于20M的文件</p>
<p><img src="https://img-blog.csdnimg.cn/20200909212914870.png#pic_center" alt=""></p>
<p>案例4：查找 / 目录下所有的.txt的文件</p>
<p><img src="C:\Users\charl\AppData\Roaming\Typora\typora-user-images\image-20200909213030659.png" alt="image-20200909213030659"></p>
<h4 id="locate"><a href="#locate" class="headerlink" title="locate:"></a><code>locate</code>:</h4><p><strong>快速定位文件路径</strong></p>
<p>特别说明：由于locate指令基于数据库进行查询，所以第一次运行前，必须使用updatedb指令创建locate数据库</p>
<p>案例：定位hello.txt文件的所在目录</p>
<p><img src="https://img-blog.csdnimg.cn/20200909213836585.png#pic_center" alt="在这里插入图片描述"></p>
<h4 id="grep：过滤查找"><a href="#grep：过滤查找" class="headerlink" title="grep：过滤查找"></a><code>grep</code>：过滤查找</h4><p>管道符，”|”,表示将前一个命令的处理结果输出传递给后面的命令处理</p>
<table>
<thead>
<tr>
<th>-n</th>
<th>显示匹配行和行号</th>
</tr>
</thead>
<tbody>
<tr>
<td>-i</td>
<td>忽略字母大小写</td>
</tr>
</tbody>
</table>
<p>案例1：请在hello.txt文件中，查找“yes“所在行，并且显示行号</p>
<p><img src="https://img-blog.csdnimg.cn/20200909214459982.png#pic_center" alt="在这里插入图片描述"></p>
<h3 id="1-3压缩和解压类"><a href="#1-3压缩和解压类" class="headerlink" title="1.3压缩和解压类"></a>1.3压缩和解压类</h3><p>以后补上，看尚硅谷老师的课</p>
<h3 id="1-4-Vim-amp-查看文章"><a href="#1-4-Vim-amp-查看文章" class="headerlink" title="1.4 Vim&amp;查看文章"></a>1.4 Vim&amp;查看文章</h3><ul>
<li><p><strong>查看</strong>的常用命令<br><code>空格键</code>：显示下一屏<br><code>Enter键</code>：一次滚动一行<br><code>b</code>：回滚一屏<br><code>f</code>：前滚一屏<br><code>q</code>：退出<br><code>Tab</code>:自动补全（若有歧义在按一下,提示可能有的目录）<br><code>ctrl+c</code>:退出选择，重新回到终端</p>
</li>
<li><p><strong>通配符</strong>的使用<br><code>*</code>:代表任意一个字符<br><code>?</code>:代表任意一个字符，至少一个<br><code>[]</code>：表示可以匹配字符组的任意一个<br><code>[]</code>：匹配a,b,c中的任意一个<br><code>[a-f]</code>：匹配a到f中的任意一个</p>
<font color="#0099FF">例子：LS <em>5.txt （也可以不加后缀名）；</font>     <font color="#0099FF">LS \</em>3*</font>

<p><code>ctrl+s</code>：保存文件（文件如多有一个*说明这个文件没有被保存）<br><strong>man</strong>是manual的缩写，是linux提供的手册</p>
</li>
</ul>
<h2 id="第二章-实操类-进程管理"><a href="#第二章-实操类-进程管理" class="headerlink" title="第二章 实操类 进程管理"></a>第二章 实操类 进程管理</h2><h4 id="ps-查看进程的使用指令"><a href="#ps-查看进程的使用指令" class="headerlink" title="ps:查看进程的使用指令"></a><code>ps</code>:查看进程的使用指令</h4><blockquote>
<p>一般使用的参数是 ps -aux</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left">PID</th>
<th>进程识别号</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">TTY</td>
<td>终端机号</td>
</tr>
<tr>
<td style="text-align:left">TIME</td>
<td>此进程所消耗的CPU时间</td>
</tr>
<tr>
<td style="text-align:left">CMD</td>
<td>正在执行的命令或者进程名</td>
</tr>
</tbody>
</table>
<p>ps -a：显示当前终端的所有进程信息</p>
<p>ps -u:以用户的格式显示进行信息</p>
<p>ps -x:显示后台进程运行的参数</p>
<p>ps -ef:以全格式显示当前的所有进程</p>
<p><img src="https://img-blog.csdnimg.cn/2020090921563579.png#pic_center" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/20200909220004521.png#pic_center" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/20200909220229314.png#pic_center" alt="在这里插入图片描述"></p>
<h4 id="kill-终止进程"><a href="#kill-终止进程" class="headerlink" title="kill:终止进程"></a><code>kill</code>:终止进程</h4><p>kill [进程号]，killall，也可以使用通配符</p>
<p>-9：表示强迫进程立即停止</p>
<p>案例1:踢掉某个非法登录用户</p>
<p><img src="https://img-blog.csdnimg.cn/20200909220619385.png#pic_center" alt="在这里插入图片描述"></p>
<p>案例2：终止远程登录服务sshd，在适当时候再次重启sshd服务</p>
<p><img src="C:\Users\charl\AppData\Roaming\Typora\typora-user-images\image-20200909221008105.png" alt="image-20200909221008105"></p>
<p>案例3：终止多个gedit编辑器</p>
<p><code>killall gedit</code></p>
<p>案例4：强制杀掉一个终端</p>
<p><img src="https://img-blog.csdnimg.cn/20200909221401212.png#pic_center" alt="在这里插入图片描述"></p>
<h4 id="pstree：查看进程树"><a href="#pstree：查看进程树" class="headerlink" title="pstree：查看进程树"></a>pstree：查看进程树</h4><p>-p:显示进程PID</p>
<p>-u：显示进程的所有属性</p>
<p><img src="https://img-blog.csdnimg.cn/20200909221726474.png#pic_center" alt="在这里插入图片描述"></p>
<h4 id="Service-服务管理"><a href="#Service-服务管理" class="headerlink" title="Service:服务管理"></a><code>Service</code>:服务管理</h4><p>服务本质就是进程，只是运行在后台，通常会监听某个端口，等待其他程序请求，比如（mysql，sshd 防火墙等），因此我们又称为<strong>守护线程</strong>，是Linux中非常重要的知识点</p>
<p><img src="https://img-blog.csdnimg.cn/20200909222329890.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>在centos7.0以后，不在使用service，而是systemctl</p>
<p>使用案例：查看当前防火墙状态，关闭防火墙和重启防火墙</p>
<p><img src="https://img-blog.csdnimg.cn/20200909222717637.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h4 id="etc-init-d-服务名称"><a href="#etc-init-d-服务名称" class="headerlink" title="/etc/init.d/服务名称"></a>/etc/init.d/服务名称</h4><p><img src="https://img-blog.csdnimg.cn/20200909222925230.png#pic_center" alt="在这里插入图片描述"></p>
<p>服务的运行级别：</p>
<p><img src="C:\Users\charl\AppData\Roaming\Typora\typora-user-images\image-20200909223200299.png" alt="image-20200909223200299"></p>
<p><code>chkconfig</code>为每个服务的各个运行级别设置自启动/关闭</p>
<p><img src="https://img-blog.csdnimg.cn/20200909223721239.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/20200909223740444.png#pic_center" alt="在这里插入图片描述"></p>
<h4 id="top动态监控进程"><a href="#top动态监控进程" class="headerlink" title="top动态监控进程"></a><code>top</code>动态监控进程</h4><p>top与ps命令很相似，都是用来显示正在执行的进程，top的不同在于可以更新正在运行的进程</p>
<table>
<thead>
<tr>
<th>-d</th>
<th>指定top命令每隔几秒钟更新，默认是3秒</th>
</tr>
</thead>
<tbody>
<tr>
<td>-i</td>
<td>使top不显示闲置和僵死的进程</td>
</tr>
<tr>
<td>-p</td>
<td>通过指定监控进程ID来仅仅监控某个进程</td>
</tr>
<tr>
<td>-u</td>
<td>后加用户名即可查看指定的用户</td>
</tr>
</tbody>
</table>
<p>监控特定用户：</p>
<p><img src="https://img-blog.csdnimg.cn/20200909224709837.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>输入top后，回车查看进程，然后输入“k”回车，在输入要结束的进程ID号</p>
<p><img src="C:\Users\charl\AppData\Roaming\Typora\typora-user-images\image-20200909224941476.png" alt="image-20200909224941476"></p>
<h4 id="netstat查看系统网络情况"><a href="#netstat查看系统网络情况" class="headerlink" title="netstat查看系统网络情况"></a><code>netstat</code>查看系统网络情况</h4><table>
<thead>
<tr>
<th>-an</th>
<th>按照一定排列顺序输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>-p</td>
<td>显示哪个进程在调用</td>
</tr>
</tbody>
</table>
<p>   查看系统所有的网络服务</p>
<p><img src="https://img-blog.csdnimg.cn/20200909225258104.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>查看服务名为sshd的服务信息</p>
<p><img src="https://img-blog.csdnimg.cn/20200909225352325.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTU5MTYx,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>之前查询端口是否被占用一直搞不明白，问了好多人，终于搞懂了，现在总结下：</p>
<p><strong>1.netstat  -anp  |grep  端口号</strong></p>
<p>如下，我以3306为例，netstat  -anp  |grep  3306（此处备注下，我是以普通用户操作，故加上了sudo，如果是以root用户操作，不用加sudo即可查看），如下图1：</p>
<p><img src="https://images2017.cnblogs.com/blog/919962/201707/919962-20170728111009665-1483804266.png" alt="img"></p>
<p>​                                           图1</p>
<p>图1中主要看监控状态为LISTEN表示已经被占用，最后一列显示被服务mysqld占用，查看具体端口号，只要有如图这一行就表示被占用了。</p>
<p><strong>2.netstat  -nultp（此处不用加端口号）</strong></p>
<p>该命令是查看当前所有已经使用的端口情况，如图2：</p>
<p><img src="https://images2017.cnblogs.com/blog/919962/201707/919962-20170728111406758-217779688.png" alt="img"></p>
<h3 id="软连接和硬链接"><a href="#软连接和硬链接" class="headerlink" title="软连接和硬链接"></a>软连接和硬链接</h3><p>软连接：（符号连接）等同于Windows的快捷方式</p>
<ul>
<li><p>创建一个软连接<br>注意创建的语法：<code>ln -s</code>是必须的，然后后面跟一个目标文件夹，最后是一个当前目录的软连接名。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@server6 ~]# ln -s test_chk/ test_chk_ln</span><br><span class="line">[root@server6 ~]# ll</span><br><span class="line">总用量 84</span><br><span class="line">-rw-------.  1 root root  1257 6月  16 01:17 anaconda-ks.cfg</span><br><span class="line">drwxr-xr-x. 25 root root  4096 11月  1 10:28 azkabanJob</span><br><span class="line">-rw-r--r--.  1 root root 67322 11月  4 10:24 azkabanJob.zip</span><br><span class="line">drwxr-xr-x.  4 root root    37 7月  13 11:01 hadoop_temp</span><br><span class="line">-rw-r--r--.  1 root root    54 7月   4 14:11 HelloLinux.txt</span><br><span class="line">drwxr-xr-x.  2 root root    22 11月  4 10:41 test_chk</span><br><span class="line">lrwxrwxrwx.  1 root root     9 11月  4 10:42 test_chk_ln -&gt; test_chk/</span><br><span class="line">-rw-r--r--.  1 root root    67 10月  8 15:52 zookeeper.out</span><br><span class="line">[root@server6 ~]# cd test_chk_ln/</span><br><span class="line">[root@server6 test_chk_ln]# ll</span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 12 11月  4 10:41 test.txt</span><br><span class="line">[root@server6 test_chk_ln]# cat test.txt </span><br><span class="line">hello spark</span><br><span class="line">[root@server6 test_chk_ln]# ll</span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 12 11月  4 10:41 test.txt</span><br><span class="line">[root@server6 test_chk_ln]# cat test.txt </span><br><span class="line">hello spark</span><br></pre></td></tr></table></figure>
<p>可以看到软连接文件前面是l其他都是-，-代表文本文件，d代表是一个文件夹，而l就是连接文件</p>
</li>
</ul>
<p><strong>硬连接</strong>：ln 源文件名 连接文件名</p>
<p><strong>硬链接</strong>：就好像是copy，但是在linux里面就只有一份，这个文件好像多了几条命，</p>
<p>$$ —- \mathcal{End} —- $$</p>
]]></content>
      <categories>
        <category>命令语法</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>从CNN到UNet</title>
    <url>/2021/01/12/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E4%BB%8ECNN%E5%88%B0UNet/</url>
    <content><![CDATA[<h2 id="1-FCN改变了什么？"><a href="#1-FCN改变了什么？" class="headerlink" title="1 FCN改变了什么？"></a>1 FCN改变了什么？</h2><p>对于一般的分类CNN网络，如VGG和Resnet，都会在网络的最后加入一些全连接层，经过softmax后就可以获得类别概率信息。但是这个概率信息是1维的，即只能标识整个图片的类别，不能标识每个像素点的类别，所以这种全连接方法不适用于图像分割。</p>
<p><img src="https://gitee.com/charles1844988765/cloudimage/raw/master/img/v2-014376d177fc218308334905a3b5ff64_720w.jpg" alt="img"></p>
<a id="more"></a>
<p><center>图3 全连接层<center></p>
<p>而FCN提出可以把后面几个全连接都换成卷积，这样就可以获得一张2维的feature map，后接softmax获得每个像素点的分类信息，从而解决了分割问题，如图4。</p>
<p><img src="https://gitee.com/charles1844988765/cloudimage/raw/master/img/v2-7bfe6e1792c2fb8bcfab6eea632d5e2c_r.jpg" alt="全连接层到卷积层"></p>
<p><center>图4<center></p>
<h2 id="2-FCN结构"><a href="#2-FCN结构" class="headerlink" title="2 FCN结构"></a>2 FCN结构</h2><p>整个FCN网络基本原理如图5<strong>（只是原理示意图）</strong>：</p>
<ol>
<li><p>image经过多个conv和+一个max pooling变为pool1 feature，宽高变为1/2</p>
</li>
<li><p>pool1 feature再经过多个conv+一个max pooling变为pool2 feature，宽高变为1/4</p>
</li>
<li><p>pool2 feature再经过多个conv+一个max pooling变为pool3 feature，宽高变为1/8</p>
</li>
<li><p>……</p>
</li>
<li><p>直到pool5 feature，宽高变为1/32。</p>
</li>
</ol>
<p><img src="https://gitee.com/charles1844988765/cloudimage/raw/master/img/FCN%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84%E7%A4%BA%E6%84%8F%E5%9B%BE.jpg" alt=""></p>
<p><center>图5 FCN网络结构示意图<center></p>
<p>那么：</p>
<ol>
<li>对于FCN-32s，直接对pool5 feature进行32倍上采样获得32x upsampled feature，再对32x upsampled  feature每个点做softmax prediction获得32x upsampled feature prediction（即分割图）。</li>
<li>对于FCN-16s，首先对pool5 feature进行2倍上采样获得2x upsampled feature，再把pool4 feature和2x upsampled feature<strong>逐点相加</strong>，然后对相加的feature进行16倍上采样，并softmax prediction，获得16x upsampled feature prediction。</li>
<li>对于FCN-8s，首先进行pool4+2x upsampled feature<strong>逐点相加</strong>，然后又进行pool3+2x upsampled<strong>逐点相加</strong>，即进行更多次特征融合。具体过程与16s类似，不再赘述。</li>
</ol>
<p>作者在原文种给出3种网络结果对比，明显可以看出效果：FCN-32s &lt; FCN-16s &lt; FCN-8s，即<strong>使用多层feature融合有利于提高分割准确性</strong>。</p>
<p><img src="https://gitee.com/charles1844988765/cloudimage/raw/master/img/分割准确度.jpg" alt=""></p>
<p><center>图5.1<center></p>
<h2 id="3-什么是上采样？"><a href="#3-什么是上采样？" class="headerlink" title="3 什么是上采样？"></a>3 什么是上采样？</h2><p>说了半天，到底什么是上采样？</p>
<p><strong>实际上，上采样（upsampling）一般包括2种方式：</strong></p>
<ol>
<li><strong>Resize，如双线性插值直接缩放，类似于图像缩放（这种方法在原文中提到）</strong></li>
<li><strong>Deconvolution，也叫Transposed Convolution</strong></li>
</ol>
<p>什么是Resize就不多说了，这里解释一下Deconvolution。</p>
<p>对于一般卷积，输入蓝色4x4矩阵，卷积核大小3x3。当设置卷积参数pad=0，stride=1时，卷积输出绿色2x2矩阵，如图6。</p>
<p><img src="https://gitee.com/charles1844988765/cloudimage/raw/master/img/v2-705305fee5a050575544c64067405fce_b.webp" alt=""></p>
<p><center>图6 Convolution forward示意图<center></p>
<p>而对于反卷积，相当于把普通卷积反过来，输入蓝色2x2矩阵（周围填0变成6x6），卷积核大小还是3x3。当设置反卷积参数pad=0，stride=1时<strong>输出绿色4x4矩阵</strong>，如图7，这相当于完全将图4倒过来（<a href="https://link.zhihu.com/?target=https%3A//github.com/vdumoulin/conv_arithmetic">其他更多卷积示意图点这里</a>）。</p>
<p><img src="https://gitee.com/charles1844988765/cloudimage/raw/master/img/Deconvolution.webp" alt=""></p>
<p><center>图7 Deconvolution forward示意图<center></p>
<p>传统的网络是subsampling的，对应的输出尺寸会降低；<strong>upsampling的意义在于将小尺寸的高维度feature map恢复回去</strong>，以便做pixelwise prediction，获得每个点的分类信息。</p>
<p><img src="https://gitee.com/charles1844988765/cloudimage/raw/master/img/v2-613b7a2d61f20ff007239e15d6c0c771_720w.jpg" alt="img"></p>
<p><center>图8 Subsampling vs Upsampling<center></p>
<p>上采样在FCN网络中的作用如图8，明显可以看到经过上采样后恢复了较大的pixelwise feature map（其中最后一个层21-dim是因为PACSAL数据集有20个类别+Background）。这其实相当于一个Encode-Decode的过程。</p>
<p>$$ —- \mathcal{End} —- $$</p>
]]></content>
      <categories>
        <category>深度学习</category>
      </categories>
      <tags>
        <tag>U-net</tag>
        <tag>卷积神经网络</tag>
      </tags>
  </entry>
  <entry>
    <title>python面向对象</title>
    <url>/2020/07/12/python/python%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/</url>
    <content><![CDATA[<p><code>最近更新： 2020-9-21</code></p>
<h3 id="类定义"><a href="#类定义" class="headerlink" title="类定义"></a>类定义</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassName</span>:</span>    </span><br><span class="line">    &lt;statement<span class="number">-1</span>&gt;    </span><br><span class="line">    .   </span><br><span class="line">    &lt;statement-N&gt;</span><br></pre></td></tr></table></figure>
<p>类实例化后，可以使用其属性，实际上，创建一个类之后，可以通过类名访问其属性。</p>
<a id="more"></a>
<h3 id="类对象"><a href="#类对象" class="headerlink" title="类对象"></a>类对象</h3><p>类对象支持两种操作：属性引用和实例化。</p>
<p>属性引用使用和 Python 中所有的属性引用一样的标准语法：<strong>obj.name</strong>。</p>
<p>类对象创建后，类命名空间中所有的命名都是有效属性名。所以如果类定义是这样:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span>:</span></span><br><span class="line">    <span class="string">"""一个简单的类实例"""</span></span><br><span class="line">    i = <span class="number">12345</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'hello world'</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 实例化类</span></span><br><span class="line">x = MyClass()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 访问类的属性和方法</span></span><br><span class="line">print(<span class="string">"MyClass 类的属性 i 为："</span>, x.i)</span><br><span class="line">print(<span class="string">"MyClass 类的方法 f 输出为："</span>, x.f())</span><br></pre></td></tr></table></figure>
<p>执行以上程序输出结果为：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">MyClass 类的属性 i 为： <span class="number">12345</span></span><br><span class="line">MyClass 类的方法 f 输出为： hello world</span><br></pre></td></tr></table></figure>
<p>类有一个名为 <strong>init</strong>() 的特殊方法（<strong>构造方法</strong>），该方法在类实例化时会自动调用，像下面这样：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">    self.data = []</span><br></pre></td></tr></table></figure>
<p>类定义了 <strong>init</strong>() 方法，类的实例化操作会自动调用 <strong>init</strong>() 方法。如下实例化类 MyClass，对应的 <strong>init</strong>() 方法就会被调用:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = MyClass()</span><br></pre></td></tr></table></figure>
<p>当然， <strong>init</strong>() 方法可以有参数，参数通过 <strong>init</strong>() 传递到类的实例化操作上。例如:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Complex</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, realpart, imagpart)</span>:</span></span><br><span class="line">        self.r = realpart</span><br><span class="line">        self.i = imagpart</span><br><span class="line">x = Complex(<span class="number">3.0</span>, <span class="number">-4.5</span>)</span><br><span class="line">print(x.r, x.i)   <span class="comment"># 输出结果：3.0 -4.5</span></span><br></pre></td></tr></table></figure>
<h3 id="self代表类的实例，而非类"><a href="#self代表类的实例，而非类" class="headerlink" title="self代表类的实例，而非类"></a>self代表类的实例，而非类</h3><p>类的方法与普通的函数只有一个特别的区别——它们必须有一个额外的<strong>第一个参数名称</strong>, 按照惯例它的名称是 self。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">prt</span><span class="params">(self)</span>:</span>        </span><br><span class="line">	print(self)        </span><br><span class="line">	print(self.__class__)  </span><br><span class="line">	t = Test() t.prt()</span><br></pre></td></tr></table></figure>
<p>以上实例执行结果为：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&lt;__main__.Test instance at <span class="number">0x100771878</span>&gt;</span><br><span class="line">__main__.Test</span><br></pre></td></tr></table></figure>
<p>从执行结果可以很明显的看出，self 代表的是类的实例，代表当前对象的地址，而 self.class 则指向类。</p>
<p>self 不是 python 关键字，我们把他换成 runoob 也是可以正常执行的:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">prt</span><span class="params">(runoob)</span>:</span></span><br><span class="line">        print(runoob)</span><br><span class="line">        print(runoob.__class__)</span><br><span class="line"> </span><br><span class="line">t = Test()</span><br><span class="line">t.prt()</span><br></pre></td></tr></table></figure>
<p>self 不是 python 关键字，我们把他换成 runoob 也是可以正常执行的:</p>
<p>class Test:    def prt(runoob):        print(runoob)        print(runoob.<strong>class</strong>)  t = Test() t.prt()</p>
<p>以上实例执行结果为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;__main__.Test instance at 0x100771878&gt;</span><br><span class="line">__main__.Test</span><br></pre></td></tr></table></figure>
<h2 id="类的方法"><a href="#类的方法" class="headerlink" title="类的方法"></a>类的方法</h2><p>在类的内部，使用 <strong>def</strong> 关键字来定义一个方法，与一般函数定义不同，类方法必须包含参数 self, 且为第一个参数，self 代表的是类的实例。</p>
<h2 id="实例-Python-3-0"><a href="#实例-Python-3-0" class="headerlink" title="实例(Python 3.0+)"></a>实例(Python 3.0+)</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#类定义</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">people</span>:</span></span><br><span class="line">    <span class="comment">#定义基本属性</span></span><br><span class="line">    name = <span class="string">''</span></span><br><span class="line">    age = <span class="number">0</span></span><br><span class="line">    <span class="comment">#定义私有属性,私有属性在类外部无法直接进行访问</span></span><br><span class="line">    __weight = <span class="number">0</span></span><br><span class="line">    <span class="comment">#定义构造方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,n,a,w)</span>:</span></span><br><span class="line">        self.name = n</span><br><span class="line">        self.age = a</span><br><span class="line">        self.__weight = w</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">speak</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"%s 说: 我 %d 岁。"</span> %(self.name,self.age))</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 实例化类</span></span><br><span class="line">p = people(<span class="string">'runoob'</span>,<span class="number">10</span>,<span class="number">30</span>)</span><br><span class="line">p.speak()</span><br></pre></td></tr></table></figure>
<p>执行以上程序输出结果为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">runoob 说: 我 10 岁。</span><br></pre></td></tr></table></figure>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><p>Python 同样支持类的继承，如果一种语言不支持继承，类就没有什么意义。派生类的定义如下所示:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DerivedClassName</span><span class="params">(BaseClassName1)</span>:</span></span><br><span class="line">    &lt;statement<span class="number">-1</span>&gt;</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    &lt;statement-N&gt;</span><br></pre></td></tr></table></figure>
<p>BaseClassName（示例中的基类名）必须与派生类定义在一个作用域内。除了类，还可以用表达式，基类定义在另一个模块中时这一点非常有用:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DerivedClassName</span><span class="params">(modname.BaseClassName)</span>:</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#类定义</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">people</span>:</span></span><br><span class="line">    <span class="comment">#定义基本属性</span></span><br><span class="line">    name = <span class="string">''</span></span><br><span class="line">    age = <span class="number">0</span></span><br><span class="line">    <span class="comment">#定义私有属性,私有属性在类外部无法直接进行访问</span></span><br><span class="line">    __weight = <span class="number">0</span></span><br><span class="line">    <span class="comment">#定义构造方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,n,a,w)</span>:</span></span><br><span class="line">        self.name = n</span><br><span class="line">        self.age = a</span><br><span class="line">        self.__weight = w</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">speak</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"%s 说: 我 %d 岁。"</span> %(self.name,self.age))</span><br><span class="line"> </span><br><span class="line"><span class="comment">#单继承示例</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">student</span><span class="params">(people)</span>:</span></span><br><span class="line">    grade = <span class="string">''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,n,a,w,g)</span>:</span></span><br><span class="line">        <span class="comment">#调用父类的构函</span></span><br><span class="line">        people.__init__(self,n,a,w)</span><br><span class="line">        self.grade = g</span><br><span class="line">    <span class="comment">#覆写父类的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">speak</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"%s 说: 我 %d 岁了，我在读 %d 年级"</span>%(self.name,self.age,self.grade))</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">s = student(<span class="string">'ken'</span>,<span class="number">10</span>,<span class="number">60</span>,<span class="number">3</span>)</span><br><span class="line">s.speak()</span><br></pre></td></tr></table></figure>
<p>执行以上程序输出结果为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ken 说: 我 10 岁了，我在读 3 年级</span><br></pre></td></tr></table></figure>
<h2 id="多继承"><a href="#多继承" class="headerlink" title="多继承"></a>多继承</h2><p>Python同样有限的支持多继承形式。多继承的类定义形如下例:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DerivedClassName</span><span class="params">(Base1, Base2, Base3)</span>:</span></span><br><span class="line">    &lt;statement<span class="number">-1</span>&gt;</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    &lt;statement-N&gt;</span><br></pre></td></tr></table></figure>
<p>需要注意圆括号中父类的顺序，若是父类中有相同的方法名，而在子类使用时未指定，python从左至右搜索 即方法在子类中未找到时，从左到右查找父类中是否包含方法。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#类定义</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">people</span>:</span></span><br><span class="line">    <span class="comment">#定义基本属性</span></span><br><span class="line">    name = <span class="string">''</span></span><br><span class="line">    age = <span class="number">0</span></span><br><span class="line">    <span class="comment">#定义私有属性,私有属性在类外部无法直接进行访问</span></span><br><span class="line">    __weight = <span class="number">0</span></span><br><span class="line">    <span class="comment">#定义构造方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,n,a,w)</span>:</span></span><br><span class="line">        self.name = n</span><br><span class="line">        self.age = a</span><br><span class="line">        self.__weight = w</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">speak</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"%s 说: 我 %d 岁。"</span> %(self.name,self.age))</span><br><span class="line"> </span><br><span class="line"><span class="comment">#单继承示例</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">student</span><span class="params">(people)</span>:</span></span><br><span class="line">    grade = <span class="string">''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,n,a,w,g)</span>:</span></span><br><span class="line">        <span class="comment">#调用父类的构函</span></span><br><span class="line">        people.__init__(self,n,a,w)</span><br><span class="line">        self.grade = g</span><br><span class="line">    <span class="comment">#覆写父类的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">speak</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"%s 说: 我 %d 岁了，我在读 %d 年级"</span>%(self.name,self.age,self.grade))</span><br><span class="line"> </span><br><span class="line"><span class="comment">#另一个类，多重继承之前的准备</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">speaker</span><span class="params">()</span>:</span></span><br><span class="line">    topic = <span class="string">''</span></span><br><span class="line">    name = <span class="string">''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,n,t)</span>:</span></span><br><span class="line">        self.name = n</span><br><span class="line">        self.topic = t</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">speak</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"我叫 %s，我是一个演说家，我演讲的主题是 %s"</span>%(self.name,self.topic))</span><br><span class="line"> </span><br><span class="line"><span class="comment">#多重继承</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">sample</span><span class="params">(speaker,student)</span>:</span></span><br><span class="line">    a =<span class="string">''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,n,a,w,g,t)</span>:</span></span><br><span class="line">        student.__init__(self,n,a,w,g)</span><br><span class="line">        speaker.__init__(self,n,t)</span><br><span class="line"> </span><br><span class="line">test = sample(<span class="string">"Tim"</span>,<span class="number">25</span>,<span class="number">80</span>,<span class="number">4</span>,<span class="string">"Python"</span>)</span><br><span class="line">test.speak()   <span class="comment">#方法名同，默认调用的是在括号中排前地父类的方法</span></span><br></pre></td></tr></table></figure>
<p>执行以上程序输出结果为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">我叫 Tim，我是一个演说家，我演讲的主题是 Python</span><br></pre></td></tr></table></figure>
<h2 id="方法重写"><a href="#方法重写" class="headerlink" title="方法重写"></a>方法重写</h2><p>如果你的父类方法的功能不能满足你的需求，你可以在子类重写你父类的方法，实例如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span>:</span>        <span class="comment"># 定义父类</span></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">myMethod</span><span class="params">(self)</span>:</span></span><br><span class="line">      <span class="keyword">print</span> (<span class="string">'调用父类方法'</span>)</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span><span class="params">(Parent)</span>:</span> <span class="comment"># 定义子类</span></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">myMethod</span><span class="params">(self)</span>:</span></span><br><span class="line">      <span class="keyword">print</span> (<span class="string">'调用子类方法'</span>)</span><br><span class="line"> </span><br><span class="line">c = Child()          <span class="comment"># 子类实例</span></span><br><span class="line">c.myMethod()         <span class="comment"># 子类调用重写方法</span></span><br><span class="line">super(Child,c).myMethod() <span class="comment">#用子类对象调用父类已被覆盖的方法</span></span><br></pre></td></tr></table></figure>
<p><a href="https://www.runoob.com/python/python-func-super.html">super() 函数</a>是用于调用父类(超类)的一个方法。</p>
<p>执行以上程序输出结果为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">调用子类方法</span><br><span class="line">调用父类方法</span><br></pre></td></tr></table></figure>
<h2 id="类属性与方法"><a href="#类属性与方法" class="headerlink" title="类属性与方法"></a>类属性与方法</h2><h3 id="类的私有属性"><a href="#类的私有属性" class="headerlink" title="类的私有属性"></a>类的私有属性</h3><p><strong>__private_attrs</strong>：两个下划线开头，声明该属性为私有，不能在类的外部被使用或直接访问。在类内部的方法中使用时 <strong>self.__private_attrs</strong>。</p>
<h3 id="类的方法-1"><a href="#类的方法-1" class="headerlink" title="类的方法"></a>类的方法</h3><p>在类的内部，使用 def 关键字来定义一个方法，与一般函数定义不同，类方法必须包含参数 <strong>self</strong>，且为第一个参数，<strong>self</strong> 代表的是类的实例。</p>
<p><strong>self</strong> 的名字并不是规定死的，也可以使用 <strong>this</strong>，但是最好还是按照约定是用 <strong>self</strong>。</p>
<h3 id="类的私有方法"><a href="#类的私有方法" class="headerlink" title="类的私有方法"></a>类的私有方法</h3><p><strong>__private_method</strong>：两个下划线开头，声明该方法为私有方法，只能在类的内部调用 ，不能在类的外部调用。<strong>self.__private_methods</strong>。</p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>类的私有属性实例如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JustCounter</span>:</span></span><br><span class="line">    __secretCount = <span class="number">0</span>  <span class="comment"># 私有变量</span></span><br><span class="line">    publicCount = <span class="number">0</span>    <span class="comment"># 公开变量</span></span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">count</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.__secretCount += <span class="number">1</span></span><br><span class="line">        self.publicCount += <span class="number">1</span></span><br><span class="line">        <span class="keyword">print</span> (self.__secretCount)</span><br><span class="line"> </span><br><span class="line">counter = JustCounter()</span><br><span class="line">counter.count()<span class="comment">#1</span></span><br><span class="line">counter.count()<span class="comment">#2</span></span><br><span class="line"><span class="keyword">print</span> (counter.publicCount)<span class="comment">#2</span></span><br><span class="line"><span class="keyword">print</span> (counter.__secretCount)  <span class="comment"># 报错，实例不能访问私有变量</span></span><br></pre></td></tr></table></figure>
<p>执行以上程序输出结果为：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"test.py"</span>, line <span class="number">16</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">print</span> (counter.__secretCount)  <span class="comment"># 报错，实例不能访问私有变量</span></span><br><span class="line">AttributeError: <span class="string">'JustCounter'</span> object has no attribute <span class="string">'__secretCount'</span></span><br></pre></td></tr></table></figure>
<p>类的私有方法实例如下： </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Site</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, url)</span>:</span></span><br><span class="line">        self.name = name       <span class="comment"># public</span></span><br><span class="line">        self.__url = url   <span class="comment"># private</span></span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">who</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'name  : '</span>, self.name)</span><br><span class="line">        print(<span class="string">'url : '</span>, self.__url)</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__foo</span><span class="params">(self)</span>:</span>          <span class="comment"># 私有方法</span></span><br><span class="line">        print(<span class="string">'这是私有方法'</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(self)</span>:</span>            <span class="comment"># 公共方法</span></span><br><span class="line">        print(<span class="string">'这是公共方法'</span>)</span><br><span class="line">        self.__foo()</span><br><span class="line"> </span><br><span class="line">x = Site(<span class="string">'菜鸟教程'</span>, <span class="string">'www.runoob.com'</span>)</span><br><span class="line">x.who()        <span class="comment"># 正常输出</span></span><br><span class="line">x.foo()        <span class="comment"># 正常输出</span></span><br><span class="line">x.__foo()      <span class="comment"># 报错</span></span><br></pre></td></tr></table></figure>
<p>以上实例执行结果：</p>
<p><img src="https://www.runoob.com/wp-content/uploads/2014/05/F5C2A308-3A88-42B4-B575-C719EB8F1CC4.jpg" alt="img"></p>
<h3 id="类的专有方法："><a href="#类的专有方法：" class="headerlink" title="类的专有方法："></a>类的专有方法：</h3><ul>
<li><strong><strong>init</strong> :</strong> 构造函数，在生成对象时调用</li>
<li><strong><strong>del</strong> :</strong> 析构函数，释放对象时使用</li>
<li><strong><strong>repr</strong> :</strong> 打印，转换</li>
<li><strong><strong>setitem</strong> :</strong> 按照索引赋值</li>
<li><strong><strong>getitem</strong>:</strong> 按照索引获取值</li>
<li><strong><strong>len</strong>:</strong> 获得长度</li>
<li><strong><strong>cmp</strong>:</strong> 比较运算</li>
<li><strong><strong>call</strong>:</strong> 函数调用</li>
<li><strong><strong>add</strong>:</strong> 加运算</li>
<li><strong><strong>sub</strong>:</strong> 减运算</li>
<li><strong><strong>mul</strong>:</strong> 乘运算</li>
<li><strong><strong>truediv</strong>:</strong> 除运算</li>
<li><strong><strong>mod</strong>:</strong> 求余运算</li>
<li><strong><strong>pow</strong>:</strong> 乘方</li>
</ul>
<h3 id="运算符重载"><a href="#运算符重载" class="headerlink" title="运算符重载"></a>运算符重载</h3><p>Python同样支持运算符重载，我们可以对类的专有方法进行重载，实例如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vector</span>:</span></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, a, b)</span>:</span></span><br><span class="line">      self.a = a</span><br><span class="line">      self.b = b</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">      <span class="keyword">return</span> <span class="string">'Vector (%d, %d)'</span> % (self.a, self.b)</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">__add__</span><span class="params">(self,other)</span>:</span></span><br><span class="line">      <span class="keyword">return</span> Vector(self.a + other.a, self.b + other.b)</span><br><span class="line"> </span><br><span class="line">v1 = Vector(<span class="number">2</span>,<span class="number">10</span>)</span><br><span class="line">v2 = Vector(<span class="number">5</span>,<span class="number">-2</span>)</span><br><span class="line"><span class="keyword">print</span> (v1 + v2)</span><br></pre></td></tr></table></figure>
<p>$$ —- \mathcal{End} —- $$</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python语法</tag>
      </tags>
  </entry>
  <entry>
    <title>双向链表java实现</title>
    <url>/2020/07/12/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/java%E5%AE%9E%E7%8E%B0%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/</url>
    <content><![CDATA[<h3 id="一-双向链表简介"><a href="#一-双向链表简介" class="headerlink" title="一 双向链表简介"></a>一 双向链表简介</h3><p>双向链表的定义是，一个节点有两个方向，分别储存当前节点的前驱节点，和后续节点；双向链表的删除只需要指定前驱节点，或者后续节点就可以进行删除操作；但是缺点也很明显每次添加节点时都需要2个指向，额外增加了内存空间消耗；</p>
<h3 id="二-双向链表的实现"><a href="#二-双向链表的实现" class="headerlink" title="二 双向链表的实现"></a>二 双向链表的实现</h3><h4 id="3-1-定义链表节点"><a href="#3-1-定义链表节点" class="headerlink" title="3.1 定义链表节点"></a>3.1 定义链表节点</h4><ol>
<li>定义data存储数据，知识追寻者使用的时int类型，读者可以改为object类型；</li>
<li>定义前驱节点previous</li>
<li>定义后续节点next</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> lsc</span></span><br><span class="line"><span class="comment"> * &lt;p&gt; 双向链表节点 &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DoubleNode</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//数据</span></span><br><span class="line">    <span class="keyword">private</span> Integer data;</span><br><span class="line">    <span class="comment">//后续节点节点</span></span><br><span class="line">    <span class="keyword">private</span> DoubleNode next;</span><br><span class="line">    <span class="comment">//前驱节点</span></span><br><span class="line">    <span class="keyword">private</span> DoubleNode previous;</span><br><span class="line">    <span class="comment">// 省略set get</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="3-2-插入头节点"><a href="#3-2-插入头节点" class="headerlink" title="3.2 插入头节点"></a>3.2 插入头节点</h2><p>思路如下:</p>
<ol>
<li>将新节点的前驱节点指向nul</li>
<li>新节点的后续节点指向表头</li>
<li>将表头的前驱节点指向新节点</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DoubleList</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> DoubleNode head;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFirst</span><span class="params">(<span class="keyword">int</span> data)</span></span>&#123;</span><br><span class="line">       <span class="comment">// 创建新节点</span></span><br><span class="line">       DoubleNode newNode = <span class="keyword">new</span> DoubleNode();</span><br><span class="line">       <span class="comment">// 为新节点添加数据</span></span><br><span class="line">       newNode.setData(data);</span><br><span class="line">       <span class="comment">// 如果表头为空直接将新节点作为头</span></span><br><span class="line">       <span class="keyword">if</span> (head==<span class="keyword">null</span>)&#123;</span><br><span class="line">           head = newNode;</span><br><span class="line">       &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="comment">//将新节点的前驱节点指向null(声明的时候本来就是null)</span></span><br><span class="line">           <span class="comment">//新节点的后续节点指向表头</span></span><br><span class="line">           newNode.setNext(head);</span><br><span class="line">           <span class="comment">// 将表头的前驱节点指向新节点</span></span><br><span class="line">           head.setPrevious(newNode);</span><br><span class="line">           <span class="comment">// head重新赋值</span></span><br><span class="line">           head = newNode;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">     <span class="comment">/* *</span></span><br><span class="line"><span class="comment">     * @Author lsc</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;顺序打印链表</span></span><br><span class="line"><span class="comment">      思路：从链表的头遍历到链表的尾巴</span></span><br><span class="line"><span class="comment">     * &lt;/p&gt;</span></span><br><span class="line"><span class="comment">     * @Param []</span></span><br><span class="line"><span class="comment">     * @Return void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">displayNext</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="comment">// 将表头作为当前节点</span></span><br><span class="line">       DoubleNode currentNode = head;</span><br><span class="line">       <span class="comment">// 遍历链表</span></span><br><span class="line">       <span class="keyword">while</span> (currentNode!=<span class="keyword">null</span>)&#123;</span><br><span class="line">           <span class="comment">// 打印数据</span></span><br><span class="line">           System.out.println(currentNode.getData());</span><br><span class="line">           <span class="comment">// 将下一个节点作为当前节点</span></span><br><span class="line">           currentNode = currentNode.getNext();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试代码如下，往前插入数据，打印出来就是倒序</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">      DoubleList doubleList = <span class="keyword">new</span> DoubleList();</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">5</span> ; i++) &#123;</span><br><span class="line">          doubleList.addFirst(i);</span><br><span class="line">      &#125;</span><br><span class="line">      doubleList.displayNext();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>结果</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">4</span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">1</span><br><span class="line">0</span><br></pre></td></tr></table></figure>
<h2 id="3-3-插入尾节点"><a href="#3-3-插入尾节点" class="headerlink" title="3.3 插入尾节点"></a>3.3 插入尾节点</h2><p>思路如下</p>
<ol>
<li>表尾的后续节点指向新节点</li>
<li>新节点的前驱节点指向表尾</li>
<li>新节点的后续节点指向null</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* *</span></span><br><span class="line"><span class="comment">     * @Author lsc</span></span><br><span class="line"><span class="comment">     * &lt;p&gt; 表尾插入节点</span></span><br><span class="line"><span class="comment">     * &lt;/p&gt;</span></span><br><span class="line"><span class="comment">     * @Param [data]</span></span><br><span class="line"><span class="comment">     * @Return void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addLast</span><span class="params">(<span class="keyword">int</span> data)</span></span>&#123;</span><br><span class="line">       <span class="comment">// 创建新节点</span></span><br><span class="line">       DoubleNode newNode = <span class="keyword">new</span> DoubleNode();</span><br><span class="line">       <span class="comment">// 为新节点添加数据</span></span><br><span class="line">       newNode.setData(data);</span><br><span class="line">       <span class="comment">// 如果表头为空直接将新节点作为头</span></span><br><span class="line">       <span class="keyword">if</span> (head==<span class="keyword">null</span>)&#123;</span><br><span class="line">           head = newNode;</span><br><span class="line">       &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">           DoubleNode currentNode = head;</span><br><span class="line">           <span class="comment">//寻找尾节点</span></span><br><span class="line">           <span class="keyword">while</span> (currentNode.getNext()!=<span class="keyword">null</span>)&#123;</span><br><span class="line">               currentNode = currentNode.getNext();</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="comment">//表尾的后续节点指向新节点</span></span><br><span class="line">           currentNode.setNext(newNode);</span><br><span class="line">           <span class="comment">//新节点的前驱节点指向表尾</span></span><br><span class="line">           newNode.setPrevious(currentNode);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>测试代码如下，往表为插入数据，也就是顺序打印</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">      DoubleList doubleList = <span class="keyword">new</span> DoubleList();</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">5</span> ; i++) &#123;</span><br><span class="line">          <span class="comment">//doubleList.addFirst(i);</span></span><br><span class="line">          doubleList.addLast(i);</span><br><span class="line">      &#125;</span><br><span class="line">      doubleList.displayNext();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>结果</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td></tr></table></figure>
<h2 id="3-4-获取链表长度"><a href="#3-4-获取链表长度" class="headerlink" title="3.4 获取链表长度"></a>3.4 获取链表长度</h2><p>思路 ：遍历链表，一个节点代表一个单位的长度</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="comment">/* *</span></span><br><span class="line"><span class="comment">  * @Author lsc</span></span><br><span class="line"><span class="comment">  * &lt;p&gt; 获得链表长度</span></span><br><span class="line"><span class="comment">  * 思路：遍历链表，一个节点代表一个单位的长度</span></span><br><span class="line"><span class="comment">  *  &lt;/p&gt;</span></span><br><span class="line"><span class="comment">  * @Param []</span></span><br><span class="line"><span class="comment">  * @Return int</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">length</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> length = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 当前节点</span></span><br><span class="line">    DoubleNode currentNode = head;</span><br><span class="line">    <span class="keyword">while</span> (currentNode!=<span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="comment">// 一个节点 length 长度就加1</span></span><br><span class="line">         length++;</span><br><span class="line">         <span class="comment">// 将下一个节点作为当前节点</span></span><br><span class="line">         currentNode = currentNode.getNext();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-5-指定位置插入节点"><a href="#3-5-指定位置插入节点" class="headerlink" title="3.5 指定位置插入节点"></a>3.5 指定位置插入节点</h2><p>思路： 假设在BC直接插入新节点N</p>
<ol>
<li>B 节点的后续节点指向 N</li>
<li>N 节点 的前驱节点指向 B</li>
<li>N 节点的后续节点指向 C</li>
<li>C 节点的前驱节点指向 N</li>
</ol>
<p>重要的也就是要找到B节点的位置，转存C节点；</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* *</span></span><br><span class="line"><span class="comment">    * @Author lsc</span></span><br><span class="line"><span class="comment">    * &lt;p&gt; 指定位置插入节点</span></span><br><span class="line"><span class="comment">    * 思路： 假设在AB直接插入新节点N</span></span><br><span class="line"><span class="comment">    *       1 A 节点的后续节点指向 N</span></span><br><span class="line"><span class="comment">    *       2 N 节点 的前驱节点指向 A</span></span><br><span class="line"><span class="comment">    *       3 N 节点的后续节点指向 B</span></span><br><span class="line"><span class="comment">    *       4 B 节点的前驱节点指向 N</span></span><br><span class="line"><span class="comment">    * 重点也是找到A节点的位置</span></span><br><span class="line"><span class="comment">    *  &lt;/p&gt;</span></span><br><span class="line"><span class="comment">    * @Param [data]</span></span><br><span class="line"><span class="comment">    * @Return void</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> data, <span class="keyword">int</span> index)</span></span>&#123;</span><br><span class="line">       <span class="comment">// 索引超出，非法</span></span><br><span class="line">       <span class="keyword">if</span> (index&lt;<span class="number">0</span> || index&gt;length())&#123;</span><br><span class="line">           System.out.println(<span class="string">"非法索引"</span>);</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// 如果索引为0，调用addFirst方法</span></span><br><span class="line">       <span class="keyword">if</span> (index==<span class="number">0</span>)&#123;</span><br><span class="line">           addFirst(data);</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// 如果索引等于链表的长度，调用addLast方法</span></span><br><span class="line">       <span class="keyword">if</span> (index==length())&#123;</span><br><span class="line">           addLast(data);</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// 创建新节点</span></span><br><span class="line">       DoubleNode newNode = <span class="keyword">new</span> DoubleNode();</span><br><span class="line">       <span class="comment">// 为新节点添加数据</span></span><br><span class="line">       newNode.setData(data);</span><br><span class="line">       <span class="comment">// 当前节点</span></span><br><span class="line">       DoubleNode currentNode = head;</span><br><span class="line">       <span class="comment">// 定义指针</span></span><br><span class="line">       <span class="keyword">int</span> point = <span class="number">0</span>;</span><br><span class="line">       <span class="comment">// 寻找插入新节点的上一个节点A</span></span><br><span class="line">       <span class="keyword">while</span> ((index-<span class="number">1</span>)!= point)&#123;</span><br><span class="line">           currentNode = currentNode.getNext();</span><br><span class="line">           point++;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// 转存当前节点的后续节点</span></span><br><span class="line">       DoubleNode nextNode = currentNode.getNext();</span><br><span class="line">       <span class="comment">// 当前节点的后续节点指向新节点</span></span><br><span class="line">       currentNode.setNext(newNode);</span><br><span class="line">       <span class="comment">// 新接的前驱节点指向当前节点</span></span><br><span class="line">       newNode.setPrevious(currentNode);</span><br><span class="line">       <span class="comment">// 新节点的后续节点指向转存的节点</span></span><br><span class="line">       newNode.setNext(nextNode);</span><br><span class="line">       <span class="comment">// 转存节点的前驱节点指向新节点</span></span><br><span class="line">       nextNode.setPrevious(newNode);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>测试代码</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    DoubleList doubleList = new DoubleList();</span><br><span class="line">    for (int i = 0; i &lt;5 ; i++) &#123;</span><br><span class="line">        doubleList.addLast(i);</span><br><span class="line">    &#125;</span><br><span class="line">    doubleList.add(666,3);</span><br><span class="line">    doubleList.displayNext();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">666</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td></tr></table></figure>
<h2 id="3-6-删除表头"><a href="#3-6-删除表头" class="headerlink" title="3.6 删除表头"></a>3.6 删除表头</h2><p>思路如下</p>
<ol>
<li>创建一个临时节点,存储表头的后续节点</li>
<li>将临时节点的前驱节点指向null</li>
<li>将临时节点赋值给表头</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* *</span></span><br><span class="line"><span class="comment">   * @Author lsc</span></span><br><span class="line"><span class="comment">   * &lt;p&gt; 删除表头</span></span><br><span class="line"><span class="comment">    思路： 1 创建一个临时节点,存储表头的后续节点</span></span><br><span class="line"><span class="comment">    *     2 将临时节点的前驱节点指向null</span></span><br><span class="line"><span class="comment">    *     3 将临时节点赋值给表头</span></span><br><span class="line"><span class="comment">   * &lt;/p&gt;</span></span><br><span class="line"><span class="comment">   * @Param []</span></span><br><span class="line"><span class="comment">   * @Return void</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeFirst</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (length()==<span class="number">0</span>)&#123;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 只有一个节点直接清空表头</span></span><br><span class="line">      <span class="keyword">if</span> (length()==<span class="number">1</span>)&#123;</span><br><span class="line">          head=<span class="keyword">null</span>;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 创建一个临时节点,存储表头的后续节点</span></span><br><span class="line">      DoubleNode temNode = head.getNext();</span><br><span class="line">      <span class="comment">// 将临时节点的前驱节点指向null</span></span><br><span class="line">      temNode.setPrevious(<span class="keyword">null</span>);</span><br><span class="line">      <span class="comment">// 将临时节点赋值给表头</span></span><br><span class="line">      head = temNode;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>测试代码</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    DoubleList doubleList = <span class="keyword">new</span> DoubleList();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">5</span> ; i++) &#123;</span><br><span class="line">        doubleList.addLast(i);</span><br><span class="line">    &#125;</span><br><span class="line">    doubleList.removeFirst();</span><br><span class="line">    doubleList.displayNext();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td></tr></table></figure>
<h2 id="3-7-删除表尾"><a href="#3-7-删除表尾" class="headerlink" title="3.7 删除表尾"></a>3.7 删除表尾</h2><p>思路</p>
<ol>
<li>找到表尾的前驱节点</li>
<li>将表尾的前驱节点的后续节点置为null</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* *</span></span><br><span class="line"><span class="comment">   * @Author lsc</span></span><br><span class="line"><span class="comment">   * &lt;p&gt; 删除表尾</span></span><br><span class="line"><span class="comment">       思路： 1 找到表尾的前驱节点</span></span><br><span class="line"><span class="comment">       *     2 将表尾的前驱节点的后续节点置为null</span></span><br><span class="line"><span class="comment">       *     3</span></span><br><span class="line"><span class="comment">   * &lt;/p&gt;</span></span><br><span class="line"><span class="comment">   * @Param []</span></span><br><span class="line"><span class="comment">   * @Return void</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeLast</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (length()==<span class="number">0</span>)&#123;</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line">      <span class="comment">// 只有一个节点直接清空表头</span></span><br><span class="line">      <span class="keyword">if</span> (length()==<span class="number">1</span>)&#123;</span><br><span class="line">          head=<span class="keyword">null</span>;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      DoubleNode previousNode = head;</span><br><span class="line">      <span class="comment">// 寻找尾节点的前驱节点</span></span><br><span class="line">      <span class="keyword">while</span> (previousNode.getNext().getNext()!=<span class="keyword">null</span>)&#123;</span><br><span class="line">          previousNode = previousNode.getNext();</span><br><span class="line">      &#125;</span><br><span class="line">      previousNode.setNext(<span class="keyword">null</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>测试代码</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    DoubleList doubleList = <span class="keyword">new</span> DoubleList();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">5</span> ; i++) &#123;</span><br><span class="line">        <span class="comment">//doubleList.addFirst(i);</span></span><br><span class="line">        doubleList.addLast(i);</span><br><span class="line">    &#125;</span><br><span class="line">    doubleList.removeLast();</span><br><span class="line">    doubleList.displayNext();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure>
<h2 id="3-8-删除指定节点"><a href="#3-8-删除指定节点" class="headerlink" title="3.8 删除指定节点"></a>3.8 删除指定节点</h2><p>思路： 假设有BCD节点要删除B节点</p>
<ol>
<li>将 B 节点的后续节点指向 D节点</li>
<li>将D节点前驱节点指向B节点</li>
</ol>
<p>重要的也就是要找到B节点位置，转存D节点；</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* *</span></span><br><span class="line"><span class="comment">    * @Author lsc</span></span><br><span class="line"><span class="comment">    * &lt;p&gt;  指定位置删除节点</span></span><br><span class="line"><span class="comment">      思路： 假设有ABC节点要删除B节点</span></span><br><span class="line"><span class="comment">      *     1 将 A 节点的后续节点指向 C节点</span></span><br><span class="line"><span class="comment">      *     2 将C节点前驱节点指向A节点</span></span><br><span class="line"><span class="comment">    * &lt;/p&gt;</span></span><br><span class="line"><span class="comment">    * @Param [index]</span></span><br><span class="line"><span class="comment">    * @Return void</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span></span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (index&lt;<span class="number">0</span> || index&gt;=length())&#123;</span><br><span class="line">           System.out.println(<span class="string">"非法索引"</span>);</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// 头节点</span></span><br><span class="line">       <span class="keyword">if</span> (index==<span class="number">0</span>)&#123;</span><br><span class="line">           removeFirst();</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// 尾节点</span></span><br><span class="line">       <span class="keyword">if</span> (index==(length()-<span class="number">1</span>))&#123;</span><br><span class="line">           removeLast();</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// 欲想删除节点的前驱节点</span></span><br><span class="line">       DoubleNode previousNode = head;</span><br><span class="line">       <span class="comment">// 定义指针</span></span><br><span class="line">       <span class="keyword">int</span> point = <span class="number">0</span>;</span><br><span class="line">       <span class="comment">// 寻找新节</span></span><br><span class="line">       <span class="keyword">while</span> ((index-<span class="number">1</span>)!=point)&#123;</span><br><span class="line">           previousNode = previousNode.getNext();</span><br><span class="line">           point++;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// 欲想删除节点的后续节点</span></span><br><span class="line">       DoubleNode nextNode = previousNode.getNext().getNext();</span><br><span class="line">       <span class="comment">// 将欲想删除节点的前驱节点的后续节点指向欲想删除节点的后续节点</span></span><br><span class="line">       previousNode.setNext(nextNode);</span><br><span class="line">       <span class="comment">// 将欲想删除节点的后续节点的前驱节点指向欲想删除节点的前驱节点</span></span><br><span class="line">       nextNode.setPrevious(previousNode);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>测试代码</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    DoubleList doubleList = <span class="keyword">new</span> DoubleList();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">5</span> ; i++) &#123;</span><br><span class="line">        <span class="comment">//doubleList.addFirst(i);</span></span><br><span class="line">        doubleList.addLast(i);</span><br><span class="line">    &#125;</span><br><span class="line">    doubleList.remove(<span class="number">3</span>);</span><br><span class="line">    doubleList.displayNext();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">4</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>数据结构与算法</tag>
      </tags>
  </entry>
  <entry>
    <title>leetcode 1-50</title>
    <url>/2019/07/12/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/leetcode1-50/</url>
    <content><![CDATA[<h3 id="1-两数之和"><a href="#1-两数之和" class="headerlink" title="1. 两数之和"></a>1. 两数之和</h3><p>Given an array of integers, return indices of the two numbers such that they add up to a specific target.</p>
<p>You may assume that each input would have exactly one solution, and you may not use the same element twice.</p>
<p>Example:</p>
<a id="more"></a>
<blockquote>
<p>Given nums = [2, 7, 11, 15], target = 9,</p>
<p>Because nums[0] + nums[1] = 2 + 7 = 9,<br>return [0, 1].</p>
<p>这个是没有用到字典的代码，虽然实现了上述功能但是，时间花费很多。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;<span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">def</span> <span class="title">twoSum</span><span class="params">(self, nums,target)</span>:</span></span><br><span class="line">&gt;<span class="keyword">for</span> i <span class="keyword">in</span> nums:</span><br><span class="line">&gt;  j=target-i</span><br><span class="line">&gt;  start_index = nums.index(i)</span><br><span class="line">&gt;  next_index = start_index+<span class="number">1</span></span><br><span class="line">&gt;  temp_nums = nums[next_index:] //将从next_index到最后最后这些元素新建一个Array</span><br><span class="line">&gt;  <span class="keyword">if</span> j <span class="keyword">in</span> temp_nums:    //判断一下j是否在temp_nums这个数组中</span><br><span class="line">&gt;      <span class="keyword">return</span>(nums.index(i),next_index+temp_nums.index(j))</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="keyword">null</span> || nums.length&lt;<span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;-<span class="number">1</span>,-<span class="number">1</span>&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">       <span class="keyword">int</span>[] res=<span class="keyword">new</span> <span class="keyword">int</span> []&#123;-<span class="number">1</span>,-<span class="number">1</span>&#125;; <span class="comment">//为了存最后的访问结果 </span></span><br><span class="line">        HashMap&lt;Integer,Integer &gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();<span class="comment">//定义一个HashMap</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;nums.length;i++)&#123;              <span class="comment">//遍历这个数组</span></span><br><span class="line">             <span class="keyword">if</span> (map.containsKey(target-nums[i]))&#123;</span><br><span class="line">                 res[<span class="number">0</span>]= map.get(target-nums[i]);</span><br><span class="line">                 res[<span class="number">1</span>]=i;</span><br><span class="line">                 <span class="keyword">break</span>;</span><br><span class="line">             &#125; </span><br><span class="line">             map.put(nums[i],i);            <span class="comment">//HashMap存对应的每个值，和index</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这段代码主要用到了hashmap的算法，大大提高了效率，但是暂时还不会</p>
<h3 id="9-回文数"><a href="#9-回文数" class="headerlink" title="9. 回文数"></a>9. 回文数</h3><h4 id="题目摘要"><a href="#题目摘要" class="headerlink" title="题目摘要"></a>题目摘要</h4><p>判断一个整数是否是回文数。回文数是指正序（从左向右）和倒序（从右向左）读都是一样的整数。</p>
<h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>一些一定不为回文数的数：<br>1.负数<br>2.大于0，但末位为0的数（x&gt; 0 &amp;&amp; x % 10 == 0）<br>如果是上面这些情况则直接返回false。</p>
<p>将整数的每一位存入数组中，arr[i]代表整数的倒数i+1位。</p>
<p>然后判断arr[i]是否和arr[num -1 -i]位是否相等，如果相等则判断下一位；否则返回false<br>当i&gt; num-i-1时如果还没返回则代表所有字符的是相对称的，也就是回文数，返回true</p>
<h4 id="下面是python的代码："><a href="#下面是python的代码：" class="headerlink" title="下面是python的代码："></a>下面是python的代码：</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isPalindrome</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type x: int</span></span><br><span class="line"><span class="string">        :rtype: bool</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        a=abs(x)</span><br><span class="line">        sum=<span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span>(a!=<span class="number">0</span>):</span><br><span class="line">            p=x%<span class="number">10</span></span><br><span class="line">            sum=sum*<span class="number">10</span>+p</span><br><span class="line">            a=a//<span class="number">10</span></span><br><span class="line">        <span class="keyword">if</span> x&gt;=<span class="number">0</span> <span class="keyword">and</span> x==sum:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<h4 id="下面是高级版python代码：希望以后再回来看将它弄懂"><a href="#下面是高级版python代码：希望以后再回来看将它弄懂" class="headerlink" title="下面是高级版python代码：希望以后再回来看将它弄懂"></a>下面是高级版python代码：希望以后再回来看将它弄懂</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isPalindrome</span><span class="params">(self, x: int)</span> -&gt; bool:</span></span><br><span class="line">        r = list(map(<span class="keyword">lambda</span> i: int(<span class="number">10</span>**-i * x % <span class="number">10</span>), range(int(math.log10(x)), <span class="number">-1</span>, <span class="number">-1</span>))) <span class="keyword">if</span> x &gt; <span class="number">0</span> <span class="keyword">else</span> [<span class="number">0</span>, x]</span><br><span class="line">        <span class="keyword">return</span> r == r[::<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>
<h4 id="下面是java的代码："><a href="#下面是java的代码：" class="headerlink" title="下面是java的代码："></a>下面是java的代码：</h4><p>简单暴力型的主要是用到java自带的函数：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">///简单粗暴，看看就行</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        String reversedStr = (<span class="keyword">new</span> StringBuilder(x + <span class="string">""</span>)).reverse().toString();</span><br><span class="line">        <span class="keyword">return</span> (x + <span class="string">""</span>).equals(reversedStr);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="解法二："><a href="#解法二：" class="headerlink" title="解法二："></a>解法二：</h4><p>进阶解法—数学解法<br>通过取整和取余操作获取整数中对应的数字进行比较。</p>
<p>举个例子：1221 这个数字。具体做法如下：</p>
<ul>
<li>通过计算 1221 / 1000， 得首位1</li>
<li>通过计算 1221 % 10， 可得末位 1</li>
<li>进行比较</li>
<li>再将 22 取出来继续比较</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;  <span class="comment">//定义一个布尔类型的方法</span></span><br><span class="line">        <span class="comment">//边界判断</span></span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">int</span> div = <span class="number">1</span>;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="keyword">while</span> (x / div &gt;= <span class="number">10</span>) div *= <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">while</span> (x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> left = x / div;</span><br><span class="line">            <span class="keyword">int</span> right = x % <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">if</span> (left != right) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            x = (x % div) / <span class="number">10</span>;</span><br><span class="line">            div /= <span class="number">100</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="解法三："><a href="#解法三：" class="headerlink" title="解法三："></a>解法三：</h4><p>进阶解法—巧妙解法<br>直观上来看待回文数的话，就感觉像是将数字进行对折后看能否一一对应。</p>
<p>所以这个解法的操作就是 取出后半段数字进行翻转。</p>
<p>这里需要注意的一个点就是由于回文数的位数可奇可偶，所以当它的长度是偶数时，它对折过来应该是相等的；当它的长度是奇数时，那么它对折过来后，有一个的长度需要去掉一位数（除以 10 并取整）。</p>
<p>具体做法如下：</p>
<ul>
<li>每次进行取余操作 （ %10），取出最低的数字：<code>y = x % 10</code></li>
<li>将最低的数字加到取出数的末尾：<code>revertNum = revertNum * 10 + y</code></li>
<li>每取一个最低位数字，x 都要自除以 10</li>
<li>判断 x 是不是小于<code>revertNum</code> ，当它小于的时候，说明数字已经对半或者过半了</li>
<li>最后，判断奇偶数情况：如果是偶数的话，revertNum 和 x 相等；如果是奇数的话，最中间的数      字就在revertNum 的最低位上，将它除以 10 以后应该和 x 相等。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//思考：这里大家可以思考一下，为什么末尾为 0 就可以直接返回 false</span></span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span> || (x % <span class="number">10</span> == <span class="number">0</span> &amp;&amp; x != <span class="number">0</span>)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">int</span> revertedNumber = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (x &gt; revertedNumber) &#123;</span><br><span class="line">            revertedNumber = revertedNumber * <span class="number">10</span> + x % <span class="number">10</span>;</span><br><span class="line">            x /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> x == revertedNumber || x == revertedNumber / <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="14-最长公共前缀"><a href="#14-最长公共前缀" class="headerlink" title="14. 最长公共前缀"></a>14. 最长公共前缀</h3><p>难度 easy 题目名称 </p>
<!-- more -->
<h4 id="题目摘要-1"><a href="#题目摘要-1" class="headerlink" title="题目摘要"></a>题目摘要</h4><p>编写一个函数来查找字符串数组中的最长公共前缀。</p>
<p>如果不存在公共前缀，返回空字符串 “”。</p>
<p>示例 1:</p>
<blockquote>
<p>输入: [“flower”,”flow”,”flight”]<br>输出: “fl”<br>示例 2:</p>
</blockquote>
<blockquote>
<p>输入: [“dog”,”racecar”,”car”]<br>输出:<code>&quot;&quot;</code><br>解释: 输入不存在公共前缀。</p>
</blockquote>
<h4 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h4><p>首先判断字符串是否为空，如果是直接输出<code>&quot;&quot;</code>之后建立两个for循环，第一层循环是遍历第一个字符串，第二个循环是从第二个字符串开始和第一个字符串进行比较，这里有一些反常，就是不满足条件就退出。这个条件是i大于字符串的长度，或者就是遇到不相等的了，返回这个前缀，当然如果是一个空字符串，就返回<code>&quot;&quot;</code><br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">longestCommonPrefix</span><span class="params">(self, strs: List[str])</span> -&gt; str:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> strs:</span><br><span class="line">            <span class="keyword">return</span><span class="string">""</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(strs[<span class="number">0</span>])):</span><br><span class="line">            <span class="keyword">for</span> string <span class="keyword">in</span> strs[<span class="number">1</span>:]:  <span class="comment">#从列表中第一个位置与第0的位置比较</span></span><br><span class="line">                <span class="keyword">if</span>  i&gt;=len(string) <span class="keyword">or</span> string[i] != strs[<span class="number">0</span>][i] :  <span class="comment">#就是遍历的i大于单词的长度</span></span><br><span class="line">                    <span class="keyword">return</span> strs[<span class="number">0</span>][:i]</span><br><span class="line">        <span class="keyword">return</span> strs[<span class="number">0</span>]             <span class="comment">#如果是一个[""],这种情况下返回第一个字符</span></span><br></pre></td></tr></table></figure></p>
<p>下面是高级一些的python代码：</p>
<h4 id="思路2"><a href="#思路2" class="headerlink" title="思路2"></a>思路2</h4><p>我先设置一个空的字符串，<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">longestCommonPrefix</span><span class="params">(self, strs: List[str])</span> -&gt; str:</span></span><br><span class="line">        result =<span class="string">""</span></span><br><span class="line">        i=<span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                sets=set(string[i]<span class="keyword">for</span> string <span class="keyword">in</span> strs)</span><br><span class="line"><span class="comment">#因为set是集合的概念，遍历这个列表的每一个字符串的第i位，输出的都是不同的值，如果相同就输出一个，</span></span><br><span class="line">                <span class="keyword">if</span> len(sets)==<span class="number">1</span>:    <span class="comment">#如果对应位置不是同一个字符，那么就不会是1</span></span><br><span class="line">                    result+=sets.pop()</span><br><span class="line"><span class="comment"># pop是出栈的意思，后进后出（当然也只有一个元素）弹出加在result后面</span></span><br><span class="line">                    i+=<span class="number">1</span></span><br><span class="line"><span class="comment">#在去检查下一个字符</span></span><br><span class="line">                <span class="keyword">else</span>: <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:  <span class="comment">#</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure></p>
<p>$$ —- \mathcal{End} —- $$</p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>数据结构与算法</tag>
      </tags>
  </entry>
  <entry>
    <title>Numpy语法总结</title>
    <url>/2020/08/12/python/Numpy%E8%AF%AD%E6%B3%95%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<p><code>最近更新： 2020-9-10</code></p>
<h2 id="第一章-数据IO"><a href="#第一章-数据IO" class="headerlink" title="第一章.数据IO"></a>第一章.数据IO</h2><p>NumPy提供了多种存取数组内容的文件操作函数。保存数组数据的文件可以是二进制格式或者文本格式。二进制格式的文件又分为NumPy专用的格式化二进制类型和无格式类型</p>
<h3 id="一，tofile-和fromfile"><a href="#一，tofile-和fromfile" class="headerlink" title="一，tofile()和fromfile()"></a>一，tofile()和fromfile()</h3><a id="more"></a>
<ul>
<li><ul>
<li>tofile()将数组中的数据以二进制格式写进文件</li>
<li>tofile()输出的数据不保存数组形状和元素类型等信息</li>
<li>fromfile()函数读回数据时需要用户指定元素类型，并对数组的形状进行适当的修改</li>
</ul>
</li>
</ul>
<p><img src="http://images2015.cnblogs.com/blog/713263/201512/713263-20151201085914812-261106528.png" alt="image"></p>
<p>从上面的例子可以看出，在读入数据时:需要正确设置dtype参数，并修改数组的shape属性才能得到和原始数据一致的结果。无论数据的排列顺序是C语言格式还是Fortran语言格式，tofile()都统一使用C语言格式输出。此外如果指定了sep参数，则fromfile()和tofile()将以文本格式对数组进行输入输出。sep参数指定的是文本数据中数值的分隔符。</p>
<h3 id="二-save-和load"><a href="#二-save-和load" class="headerlink" title="二.save()和load()"></a>二.save()和load()</h3><h4 id="save（）"><a href="#save（）" class="headerlink" title="save（）"></a>save（）</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from tempfile import TemporaryFile</span><br><span class="line">outfile = TemporaryFile()</span><br><span class="line"></span><br><span class="line">x = np.arange(10)</span><br><span class="line">np.save(outfile, x)</span><br><span class="line"></span><br><span class="line">_ = outfile.seek(0) # Only needed here to simulate closing &amp; reopening file</span><br><span class="line">np.load(outfile)</span><br><span class="line">#结果：array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</span><br><span class="line">with open(&apos;test.npy&apos;, &apos;wb&apos;) as f:</span><br><span class="line">    np.save(f, np.array([1, 2]))</span><br><span class="line">    np.save(f, np.array([1, 3]))</span><br><span class="line">with open(&apos;test.npy&apos;, &apos;rb&apos;) as f:</span><br><span class="line">    a = np.load(f)</span><br><span class="line">    b = np.load(f)</span><br><span class="line">print(a, b)</span><br><span class="line"># [1 2] [1 3]</span><br></pre></td></tr></table></figure>
<ol>
<li>如果想将多个数组保存到一个文件中，可以使用savez()</li>
<li>savez()的第一个参数是文件名，其后的参数都是需要保存的数组，也可以使用关键字参数为数组起名</li>
<li>非关键字参数传递的数组会自动起名为arr_0、arr_1、…。</li>
<li>savez()输出的是一个扩展名为npz的压缩文件，其中每个文件都是一个save()保存的npy文件，文件名和数组名相同</li>
<li>load()自动识别npz文件，并且返回一个类似于字典的对象，可以通过数组名作为键获取数组的内容</li>
</ol>
<p><a href="http://images2015.cnblogs.com/blog/713263/201512/713263-20151201085920530-2035402235.png"><img src="http://images2015.cnblogs.com/blog/713263/201512/713263-20151201085921046-705156815.png" alt="image"></a></p>
<p><a href="http://images2015.cnblogs.com/blog/713263/201512/713263-20151201085921358-1416278519.png"><img src="http://images2015.cnblogs.com/blog/713263/201512/713263-20151201085921671-1618280714.png" alt="image"></a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="第二章数据类型"><a href="#第二章数据类型" class="headerlink" title="第二章数据类型"></a>第二章数据类型</h2><p>固定长度的整型，包括有符号整型或无符号整型。</p>
<h3 id="1-整型"><a href="#1-整型" class="headerlink" title="1.整型"></a>1.整型</h3><h4 id="整型范围"><a href="#整型范围" class="headerlink" title="整型范围"></a>整型范围</h4><ul>
<li>Int8 - [-128 : 127]</li>
<li>Int16 - [-32768 : 32767]</li>
<li>Int32 - [-2147483648 : 2147483647]</li>
<li>Int64 - [-9223372036854775808 : 9223372036854775807]</li>
</ul>
<h4 id="无符号整型范围"><a href="#无符号整型范围" class="headerlink" title="无符号整型范围"></a>无符号整型范围</h4><ul>
<li>UInt8 - [0 : 255]</li>
<li>UInt16 - [0 : 65535]</li>
<li>UInt32 - [0 : 4294967295]</li>
<li>UInt64 - [0 : 18446744073709551615]</li>
</ul>
<h3 id="2-浮点数据类型"><a href="#2-浮点数据类型" class="headerlink" title="2.浮点数据类型"></a>2.浮点数据类型</h3><h4 id="single数据类型"><a href="#single数据类型" class="headerlink" title="single数据类型"></a>single数据类型</h4><p>存储有符号的 IEEE 格式 32 位（4 个字节）单精度浮点数，负数取值范围为 －3.4028235E+38～－1.401298E－45，正数取值范围为 1.401298E－45 到 3.4028235E+38。单精度数值存储实数数值的近似值。</p>
<h3 id="3-nan值数据类型"><a href="#3-nan值数据类型" class="headerlink" title="3.nan值数据类型"></a>3.nan值数据类型</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l=np.array([[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">2</span>,<span class="number">3</span>],[np.nan,<span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l</span><br><span class="line">array([[ <span class="number">1.</span>,  <span class="number">2.</span>],</span><br><span class="line">       [ <span class="number">2.</span>,  <span class="number">3.</span>],</span><br><span class="line">       [nan,  <span class="number">3.</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l.mean()</span><br><span class="line">nan</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l[np.isnan(l)]=<span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l</span><br><span class="line">array([[<span class="number">1.</span>, <span class="number">2.</span>],</span><br><span class="line">       [<span class="number">2.</span>, <span class="number">3.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">3.</span>]])</span><br></pre></td></tr></table></figure>
<h2 id="第三章数组形状"><a href="#第三章数组形状" class="headerlink" title="第三章数组形状"></a>第三章数组形状</h2><h3 id="1改变数组形状"><a href="#1改变数组形状" class="headerlink" title="1改变数组形状"></a>1改变数组形状</h3><h4 id="1-1将数组变为具体的形状"><a href="#1-1将数组变为具体的形状" class="headerlink" title="1.1将数组变为具体的形状"></a>1.1将数组变为具体的形状</h4><p><strong>reshape(shape)</strong> ： 不改变数组元素，返回一个shape形状的数组，原数组不变。是对每行元素进行处理<br><strong>resize(shape)</strong> ： 与.reshape()功能一致，但修改原数组</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">1</span>]: a = np.arange(<span class="number">20</span>)</span><br><span class="line"><span class="comment">#原数组不变</span></span><br><span class="line">In [<span class="number">2</span>]: a.reshape([<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line">Out[<span class="number">2</span>]:</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">       [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>]])</span><br><span class="line"> </span><br><span class="line">In [<span class="number">3</span>]: a</span><br><span class="line">Out[<span class="number">3</span>]:</span><br><span class="line">array([ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>,</span><br><span class="line">       <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>])</span><br><span class="line"> </span><br><span class="line"><span class="comment">#修改原数组</span></span><br><span class="line">In [<span class="number">4</span>]: a.resize([<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line"> </span><br><span class="line">In [<span class="number">5</span>]: a</span><br><span class="line">Out[<span class="number">5</span>]:</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">       [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>]])</span><br></pre></td></tr></table></figure>
<p><strong>.swapaxes(ax1,ax2) ：</strong> 将数组n个维度中两个维度进行调换，不改变原数组</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">6</span>]: a.swapaxes(<span class="number">1</span>,<span class="number">0</span>)</span><br><span class="line">Out[<span class="number">6</span>]:</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>],</span><br><span class="line">       [ <span class="number">1</span>,  <span class="number">6</span>, <span class="number">11</span>, <span class="number">16</span>],</span><br><span class="line">       [ <span class="number">2</span>,  <span class="number">7</span>, <span class="number">12</span>, <span class="number">17</span>],</span><br><span class="line">       [ <span class="number">3</span>,  <span class="number">8</span>, <span class="number">13</span>, <span class="number">18</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">9</span>, <span class="number">14</span>, <span class="number">19</span>]])</span><br></pre></td></tr></table></figure>
<h4 id="1-2将多维数组转为一维数组"><a href="#1-2将多维数组转为一维数组" class="headerlink" title="1.2将多维数组转为一维数组"></a>1.2将多维数组转为一维数组</h4><p><strong>ravel()</strong>：如果没有必要，不会产生源数据的副本<br><strong>flatten()：</strong>返回源数据的副本<br><strong>squeeze()：</strong>只能对维数为1的维度降维</p>
<p>另外，<strong>reshape(-1)</strong>也可以“拉平”多维数组</p>
<p><img src="https://img-blog.csdn.net/20180109095535985?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdHltYXRsYWI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><img src="https://img-blog.csdn.net/20180109095535985?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdHltYXRsYWI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p>
<p>$$ —- \mathcal{End} —- $$</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python库</tag>
        <tag>numpy</tag>
      </tags>
  </entry>
</search>
